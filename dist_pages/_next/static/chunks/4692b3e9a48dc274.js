(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,97751,e=>{"use strict";var t=e.i(87155),i=e.i(62311),l=e.i(30104),a=e.i(97966),s=e.i(47890),r=e.i(83763),n=e.i(54552),o=e.i(26297),c=e.i(67709),d=e.i(51588),x=e.i(10164),h=e.i(67090);let p=i.forwardRef(function({title:e,titleId:t,...l},a){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},l),e?i.createElement("title",{id:t},e):null,i.createElement("path",{d:"M21.731 2.269a2.625 2.625 0 0 0-3.712 0l-1.157 1.157 3.712 3.712 1.157-1.157a2.625 2.625 0 0 0 0-3.712ZM19.513 8.199l-3.712-3.712-12.15 12.15a5.25 5.25 0 0 0-1.32 2.214l-.8 2.685a.75.75 0 0 0 .933.933l2.685-.8a5.25 5.25 0 0 0 2.214-1.32L19.513 8.2Z"}))}),m=i.forwardRef(function({title:e,titleId:t,...l},a){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},l),e?i.createElement("title",{id:t},e):null,i.createElement("path",{fillRule:"evenodd",d:"M16.5 4.478v.227a48.816 48.816 0 0 1 3.878.512.75.75 0 1 1-.256 1.478l-.209-.035-1.005 13.07a3 3 0 0 1-2.991 2.77H8.084a3 3 0 0 1-2.991-2.77L4.087 6.66l-.209.035a.75.75 0 0 1-.256-1.478A48.567 48.567 0 0 1 7.5 4.705v-.227c0-1.564 1.213-2.9 2.816-2.951a52.662 52.662 0 0 1 3.369 0c1.603.051 2.815 1.387 2.815 2.951Zm-6.136-1.452a51.196 51.196 0 0 1 3.273 0C14.39 3.05 15 3.684 15 4.478v.113a49.488 49.488 0 0 0-6 0v-.113c0-.794.609-1.428 1.364-1.452Zm-.355 5.945a.75.75 0 1 0-1.5.058l.347 9a.75.75 0 1 0 1.499-.058l-.346-9Zm5.48.058a.75.75 0 1 0-1.498-.058l-.347 9a.75.75 0 0 0 1.5.058l.345-9Z",clipRule:"evenodd"}))}),g=i.forwardRef(function({title:e,titleId:t,...l},a){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},l),e?i.createElement("title",{id:t},e):null,i.createElement("path",{fillRule:"evenodd",d:"M5.625 1.5c-1.036 0-1.875.84-1.875 1.875v17.25c0 1.035.84 1.875 1.875 1.875h12.75c1.035 0 1.875-.84 1.875-1.875V12.75A3.75 3.75 0 0 0 16.5 9h-1.875a1.875 1.875 0 0 1-1.875-1.875V5.25A3.75 3.75 0 0 0 9 1.5H5.625ZM7.5 15a.75.75 0 0 1 .75-.75h7.5a.75.75 0 0 1 0 1.5h-7.5A.75.75 0 0 1 7.5 15Zm.75 2.25a.75.75 0 0 0 0 1.5H12a.75.75 0 0 0 0-1.5H8.25Z",clipRule:"evenodd"}),i.createElement("path",{d:"M12.971 1.816A5.23 5.23 0 0 1 14.25 5.25v1.875c0 .207.168.375.375.375H16.5a5.23 5.23 0 0 1 3.434 1.279 9.768 9.768 0 0 0-6.963-6.963Z"}))}),u=i.forwardRef(function({title:e,titleId:t,...l},a){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},l),e?i.createElement("title",{id:t},e):null,i.createElement("path",{fillRule:"evenodd",d:"M1.5 6a2.25 2.25 0 0 1 2.25-2.25h16.5A2.25 2.25 0 0 1 22.5 6v12a2.25 2.25 0 0 1-2.25 2.25H3.75A2.25 2.25 0 0 1 1.5 18V6ZM3 16.06V18c0 .414.336.75.75.75h16.5A.75.75 0 0 0 21 18v-1.94l-2.69-2.689a1.5 1.5 0 0 0-2.12 0l-.88.879.97.97a.75.75 0 1 1-1.06 1.06l-5.16-5.159a1.5 1.5 0 0 0-2.12 0L3 16.061Zm10.125-7.81a1.125 1.125 0 1 1 2.25 0 1.125 1.125 0 0 1-2.25 0Z",clipRule:"evenodd"}))});var f=e.i(88978);let b=i.forwardRef(function({title:e,titleId:t,...l},a){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},l),e?i.createElement("title",{id:t},e):null,i.createElement("path",{fillRule:"evenodd",d:"M4.755 10.059a7.5 7.5 0 0 1 12.548-3.364l1.903 1.903h-3.183a.75.75 0 1 0 0 1.5h4.992a.75.75 0 0 0 .75-.75V4.356a.75.75 0 0 0-1.5 0v3.18l-1.9-1.9A9 9 0 0 0 3.306 9.67a.75.75 0 1 0 1.45.388Zm15.408 3.352a.75.75 0 0 0-.919.53 7.5 7.5 0 0 1-12.548 3.364l-1.902-1.903h3.183a.75.75 0 0 0 0-1.5H2.984a.75.75 0 0 0-.75.75v4.992a.75.75 0 0 0 1.5 0v-3.18l1.9 1.9a9 9 0 0 0 15.059-4.035.75.75 0 0 0-.53-.918Z",clipRule:"evenodd"}))}),v=i.forwardRef(function({title:e,titleId:t,...l},a){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},l),e?i.createElement("title",{id:t},e):null,i.createElement("path",{fillRule:"evenodd",d:"M19.902 4.098a3.75 3.75 0 0 0-5.304 0l-4.5 4.5a3.75 3.75 0 0 0 1.035 6.037.75.75 0 0 1-.646 1.353 5.25 5.25 0 0 1-1.449-8.45l4.5-4.5a5.25 5.25 0 1 1 7.424 7.424l-1.757 1.757a.75.75 0 1 1-1.06-1.06l1.757-1.757a3.75 3.75 0 0 0 0-5.304Zm-7.389 4.267a.75.75 0 0 1 1-.353 5.25 5.25 0 0 1 1.449 8.45l-4.5 4.5a5.25 5.25 0 1 1-7.424-7.424l1.757-1.757a.75.75 0 1 1 1.06 1.06l-1.757 1.757a3.75 3.75 0 1 0 5.304 5.304l4.5-4.5a3.75 3.75 0 0 0-1.035-6.037.75.75 0 0 1-.354-1Z",clipRule:"evenodd"}))});var j=e.i(77448);let w=i.forwardRef(function({title:e,titleId:t,...l},a){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},l),e?i.createElement("title",{id:t},e):null,i.createElement("path",{fillRule:"evenodd",d:"M3 4.875C3 3.839 3.84 3 4.875 3h4.5c1.036 0 1.875.84 1.875 1.875v4.5c0 1.036-.84 1.875-1.875 1.875h-4.5A1.875 1.875 0 0 1 3 9.375v-4.5ZM4.875 4.5a.375.375 0 0 0-.375.375v4.5c0 .207.168.375.375.375h4.5a.375.375 0 0 0 .375-.375v-4.5a.375.375 0 0 0-.375-.375h-4.5Zm7.875.375c0-1.036.84-1.875 1.875-1.875h4.5C20.16 3 21 3.84 21 4.875v4.5c0 1.036-.84 1.875-1.875 1.875h-4.5a1.875 1.875 0 0 1-1.875-1.875v-4.5Zm1.875-.375a.375.375 0 0 0-.375.375v4.5c0 .207.168.375.375.375h4.5a.375.375 0 0 0 .375-.375v-4.5a.375.375 0 0 0-.375-.375h-4.5ZM6 6.75A.75.75 0 0 1 6.75 6h.75a.75.75 0 0 1 .75.75v.75a.75.75 0 0 1-.75.75h-.75A.75.75 0 0 1 6 7.5v-.75Zm9.75 0A.75.75 0 0 1 16.5 6h.75a.75.75 0 0 1 .75.75v.75a.75.75 0 0 1-.75.75h-.75a.75.75 0 0 1-.75-.75v-.75ZM3 14.625c0-1.036.84-1.875 1.875-1.875h4.5c1.036 0 1.875.84 1.875 1.875v4.5c0 1.035-.84 1.875-1.875 1.875h-4.5A1.875 1.875 0 0 1 3 19.125v-4.5Zm1.875-.375a.375.375 0 0 0-.375.375v4.5c0 .207.168.375.375.375h4.5a.375.375 0 0 0 .375-.375v-4.5a.375.375 0 0 0-.375-.375h-4.5Zm7.875-.75a.75.75 0 0 1 .75-.75h.75a.75.75 0 0 1 .75.75v.75a.75.75 0 0 1-.75.75h-.75a.75.75 0 0 1-.75-.75v-.75Zm6 0a.75.75 0 0 1 .75-.75h.75a.75.75 0 0 1 .75.75v.75a.75.75 0 0 1-.75.75h-.75a.75.75 0 0 1-.75-.75v-.75ZM6 16.5a.75.75 0 0 1 .75-.75h.75a.75.75 0 0 1 .75.75v.75a.75.75 0 0 1-.75.75h-.75a.75.75 0 0 1-.75-.75v-.75Zm9.75 0a.75.75 0 0 1 .75-.75h.75a.75.75 0 0 1 .75.75v.75a.75.75 0 0 1-.75.75h-.75a.75.75 0 0 1-.75-.75v-.75Zm-3 3a.75.75 0 0 1 .75-.75h.75a.75.75 0 0 1 .75.75v.75a.75.75 0 0 1-.75.75h-.75a.75.75 0 0 1-.75-.75v-.75Zm6 0a.75.75 0 0 1 .75-.75h.75a.75.75 0 0 1 .75.75v.75a.75.75 0 0 1-.75.75h-.75a.75.75 0 0 1-.75-.75v-.75Z",clipRule:"evenodd"}))}),y=i.forwardRef(function({title:e,titleId:t,...l},a){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},l),e?i.createElement("title",{id:t},e):null,i.createElement("path",{fillRule:"evenodd",d:"M1.5 6.375c0-1.036.84-1.875 1.875-1.875h17.25c1.035 0 1.875.84 1.875 1.875v3.026a.75.75 0 0 1-.375.65 2.249 2.249 0 0 0 0 3.898.75.75 0 0 1 .375.65v3.026c0 1.035-.84 1.875-1.875 1.875H3.375A1.875 1.875 0 0 1 1.5 17.625v-3.026a.75.75 0 0 1 .374-.65 2.249 2.249 0 0 0 0-3.898.75.75 0 0 1-.374-.65V6.375Zm15-1.125a.75.75 0 0 1 .75.75v.75a.75.75 0 0 1-1.5 0V6a.75.75 0 0 1 .75-.75Zm.75 4.5a.75.75 0 0 0-1.5 0v.75a.75.75 0 0 0 1.5 0v-.75Zm-.75 3a.75.75 0 0 1 .75.75v.75a.75.75 0 0 1-1.5 0v-.75a.75.75 0 0 1 .75-.75Zm.75 4.5a.75.75 0 0 0-1.5 0V18a.75.75 0 0 0 1.5 0v-.75ZM6 12a.75.75 0 0 1 .75-.75H12a.75.75 0 0 1 0 1.5H6.75A.75.75 0 0 1 6 12Zm.75 2.25a.75.75 0 0 0 0 1.5h3a.75.75 0 0 0 0-1.5h-3Z",clipRule:"evenodd"}))});var z=e.i(92377),k=e.i(23281),N=e.i(86788);let _=(0,N.createServerReference)("406e281089d76262c7c4bcb5eca369facde7378d41",N.callServer,void 0,N.findSourceMapURL,"deleteTimelineEntry");e.i(40140);var C=e.i(69762),S=e.i(15462);function E({imageUrl:e,onClose:i}){return(0,t.jsx)(o.AnimatePresence,{children:(0,t.jsxs)(n.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 backdrop-blur-lg z-90 flex items-center justify-center p-4",onClick:i,children:[(0,t.jsx)("button",{onClick:i,className:"absolute top-4 right-4 z-[60] p-2 rounded-full text-gray-300 hover:text-white hover:bg-white/20 transition-colors",children:(0,t.jsx)(j.XMarkIcon,{className:"w-8 h-8"})}),(0,t.jsx)(n.motion.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},transition:{type:"spring",damping:25,stiffness:300},className:"relative w-full h-full max-w-5xl max-h-[90vh]",onClick:e=>e.stopPropagation(),children:(0,t.jsx)(d.default,{src:e,alt:"Timeline entry photo",layout:"fill",objectFit:"contain",className:"rounded-lg"})})]})})}let R=i.forwardRef(function({title:e,titleId:t,...l},a){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},l),e?i.createElement("title",{id:t},e):null,i.createElement("path",{fillRule:"evenodd",d:"M6.75 2.25A.75.75 0 0 1 7.5 3v1.5h9V3A.75.75 0 0 1 18 3v1.5h.75a3 3 0 0 1 3 3v11.25a3 3 0 0 1-3 3H5.25a3 3 0 0 1-3-3V7.5a3 3 0 0 1 3-3H6V3a.75.75 0 0 1 .75-.75Zm13.5 9a1.5 1.5 0 0 0-1.5-1.5H5.25a1.5 1.5 0 0 0-1.5 1.5v7.5a1.5 1.5 0 0 0 1.5 1.5h13.5a1.5 1.5 0 0 0 1.5-1.5v-7.5Z",clipRule:"evenodd"}))});var A=e.i(43372),I=e.i(13600);let L=(0,N.createServerReference)("40e7b2cc38b97e02723fa1a69b8372d45365f40226",N.callServer,void 0,N.findSourceMapURL,"getProfileCardData");var T=e.i(51913);function M({user:e,onClose:a}){let[s,r]=(0,i.useState)(null),[c,x]=(0,i.useState)(!0);(0,i.useEffect)(()=>{!async function(){x(!0);try{let t=await L(e.username);t.profile&&r(t)}catch(e){console.error("Failed to fetch profile card data:",e)}finally{x(!1)}}()},[e.username]);let h=s?.profile?new Date(s.profile.created_at).toLocaleDateString("en-US",{year:"numeric",month:"short"}):null;return(0,t.jsx)(o.AnimatePresence,{children:(0,t.jsx)(n.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-[60] flex items-center justify-center p-4",onClick:a,children:(0,t.jsxs)(n.motion.div,{initial:{scale:.95,opacity:0,y:10},animate:{scale:1,opacity:1,y:0},exit:{scale:.95,opacity:0,y:10},transition:{type:"spring",damping:25,stiffness:300},className:"relative bg-white dark:bg-zinc-950 rounded-2xl shadow-2xl max-w-sm w-full border border-zinc-200 dark:border-zinc-800 overflow-hidden",onClick:e=>e.stopPropagation(),children:[(0,t.jsx)("button",{onClick:a,className:"absolute top-3 right-3 z-20 p-1.5 rounded-full bg-black/20 hover:bg-black/40 text-white backdrop-blur-sm transition-colors",children:(0,t.jsx)(j.XMarkIcon,{className:"w-4 h-4"})}),(0,t.jsxs)("div",{className:"relative h-24 w-full bg-zinc-100 dark:bg-zinc-900",children:[e.profile_pic_url&&(0,t.jsx)(d.default,{src:e.profile_pic_url,alt:"Banner",fill:!0,className:"object-cover opacity-60 blur-xl scale-110"}),(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent to-white dark:to-zinc-950/80"})]}),(0,t.jsxs)("div",{className:"px-6 pb-6 -mt-10 relative z-10",children:[(0,t.jsx)("div",{className:"relative inline-block",children:(0,t.jsx)("div",{className:"h-20 w-20 rounded-full p-1 bg-white dark:bg-zinc-950 shadow-lg",children:(0,t.jsx)(d.default,{src:e.profile_pic_url||"/default-avatar.png",alt:e.username,width:72,height:72,className:"rounded-full object-cover w-full h-full bg-zinc-100 dark:bg-zinc-900"})})}),(0,t.jsxs)("div",{className:"mt-3",children:[(0,t.jsx)("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white truncate",children:s?.profile.display_name||e.username}),(0,t.jsxs)("p",{className:"text-sm text-zinc-500 dark:text-zinc-400 font-medium",children:["@",e.username]}),c?(0,t.jsx)("div",{className:"py-6 flex justify-center",children:(0,t.jsx)(T.default,{})}):s?(0,t.jsxs)("div",{className:"mt-4 space-y-5",children:[s.profile.bio?(0,t.jsx)("p",{className:"text-sm text-zinc-600 dark:text-zinc-300 leading-relaxed",children:s.profile.bio}):(0,t.jsx)("p",{className:"text-sm text-zinc-400 italic",children:"No bio available."}),(0,t.jsxs)("div",{className:"flex items-center gap-6 border-y border-zinc-100 dark:border-zinc-800 py-3",children:[(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("span",{className:"font-bold text-lg text-zinc-900 dark:text-white leading-none",children:s.followerCount}),(0,t.jsx)("span",{className:"text-xs text-zinc-500 dark:text-zinc-400 uppercase tracking-wide mt-1",children:"Followers"})]}),(0,t.jsx)("div",{className:"w-px h-8 bg-zinc-100 dark:bg-zinc-800"}),(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("span",{className:"font-bold text-lg text-zinc-900 dark:text-white leading-none",children:s.followingCount}),(0,t.jsx)("span",{className:"text-xs text-zinc-500 dark:text-zinc-400 uppercase tracking-wide mt-1",children:"Following"})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between pt-1",children:[(0,t.jsxs)("div",{className:"space-y-1.5",children:[s.profile.country&&(0,t.jsxs)("div",{className:"flex items-center gap-1.5 text-xs text-zinc-500 dark:text-zinc-400",children:[(0,t.jsx)(A.MapPinIcon,{className:"w-3.5 h-3.5"}),s.profile.country]}),h&&(0,t.jsxs)("div",{className:"flex items-center gap-1.5 text-xs text-zinc-500 dark:text-zinc-400",children:[(0,t.jsx)(R,{className:"w-3.5 h-3.5"}),"Joined ",h]})]}),(0,t.jsxs)(l.default,{href:`/profile/${e.username}`,onClick:a,className:"flex items-center gap-2 px-4 py-2 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-full text-xs font-bold hover:bg-zinc-800 dark:hover:bg-zinc-200 transition-colors",children:["View Profile ",(0,t.jsx)(I.ArrowRightIcon,{className:"w-3 h-3"})]})]})]}):(0,t.jsx)("p",{className:"mt-4 text-sm text-zinc-500",children:"Failed to load details."})]})]})]})})})}var Z=e.i(4405),P=e.i(48652),D=e.i(14595);let $=D.default.env.NEXT_PUBLIC_SITE_URL?D.default.env.NEXT_PUBLIC_SITE_URL:"http://localhost:3000",F=e=>e?e.startsWith("http")?e:`https://image.tmdb.org/t/p/original${e}`:null,W=({filled:e})=>(0,t.jsx)("svg",{width:"36",height:"36",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,t.jsx)("path",{d:"M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z",fill:e?"#e4e4e7":"none",stroke:e?"#e4e4e7":"#52525b",strokeWidth:"1.5",strokeLinejoin:"miter"})}),B=()=>(0,t.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"#e4e4e7",strokeWidth:"2",strokeLinecap:"square",strokeLinejoin:"miter",children:[(0,t.jsx)("path",{d:"M2 10s3-3 3-8"}),(0,t.jsx)("path",{d:"M22 10s-3-3-3-8"}),(0,t.jsx)("path",{d:"M10 2h4"}),(0,t.jsx)("path",{d:"M2 22h20"}),(0,t.jsx)("path",{d:"M12 22V12"}),(0,t.jsx)("rect",{x:"2",y:"10",width:"20",height:"12"})]}),V={Netflix:{logo:"/logos/netflix.svg"},"Prime Video":{logo:"/logos/prime-video.svg"},"Disney+":{logo:"/logos/disney-plus.svg"},Hulu:{logo:"/logos/hulu.svg"},Max:{logo:"/logos/max.svg"},"Apple TV+":{logo:"/logos/apple-tv.svg"}};function H({entry:e}){let i=e.movies||e.series;if(!i)return(0,t.jsx)("div",{style:{display:"flex",width:1080,height:1920,backgroundColor:"#09090b",color:"white",alignItems:"center",justifyContent:"center"},children:(0,t.jsx)("h1",{children:"Media Not Found"})});let l=F(i.backdrop_url),a=F(i.poster_url),s=e.profiles,r=Number(e.rating)||0,n=i.release_date?.split("-")[0]||"N/A",o=new Date(e.watched_on).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),c=e.timeline_collaborators?.map(e=>e.profiles)||[],d=e.viewing_context,x=null,h=`Watched on ${o}`;if(d){if(h=`${d} • ${o}`,"Theatre"===d)x=(0,t.jsx)(B,{});else if(V[d]){let e=V[d].logo;x=(0,t.jsx)("img",{src:`${$}${e}`,width:"28",height:"28",style:{objectFit:"contain",filter:"Apple TV+"===d?"invert(1)":"none"}})}}let p=Array.from({length:5},(e,t)=>t<Math.round(r));return(0,t.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:"100%",height:"100%",backgroundColor:"#09090b",color:"#fafafa",fontFamily:'"Inter", sans-serif',position:"relative"},children:[l?(0,t.jsx)("img",{src:l,style:{position:"absolute",top:0,left:0,width:"100%",height:"1100px",objectFit:"cover",opacity:.35}}):(0,t.jsx)("img",{src:a||"",style:{position:"absolute",top:0,left:0,width:"100%",height:"1100px",objectFit:"cover",filter:"blur(50px)",opacity:.2}}),(0,t.jsx)("div",{style:{display:"flex",position:"absolute",top:0,left:0,width:"100%",height:"1200px",background:"linear-gradient(to bottom, transparent 0%, #09090b 95%)"}}),(0,t.jsxs)("div",{style:{position:"relative",display:"flex",flexDirection:"column",height:"100%",padding:"80px"},children:[(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"24px",marginBottom:"auto"},children:[s.profile_pic_url&&(0,t.jsx)("img",{src:s.profile_pic_url,width:"96",height:"96",style:{borderRadius:"50%",border:"4px solid #27272a"}}),(0,t.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[(0,t.jsx)("span",{style:{fontSize:"32px",fontWeight:700,color:"#fff"},children:s.display_name}),(0,t.jsxs)("span",{style:{fontSize:"24px",color:"#a1a1aa"},children:["@",s.username]})]})]}),(0,t.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"60px",marginTop:"120px"},children:[(0,t.jsxs)("div",{style:{display:"flex",alignItems:"flex-end",gap:"60px"},children:[(0,t.jsx)("div",{style:{display:"flex",width:"380px",height:"570px",backgroundColor:"#18181b",borderRadius:"8px",border:"1px solid rgba(255,255,255,0.1)",boxShadow:"0 40px 80px rgba(0,0,0,0.7)",overflow:"hidden",position:"relative",flexShrink:0},children:a?(0,t.jsx)("img",{src:a,style:{width:"100%",height:"100%",objectFit:"cover"}}):(0,t.jsx)("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",color:"#52525b"},children:"No Poster"})}),(0,t.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"24px",flex:1,paddingBottom:"10px"},children:[(0,t.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[(0,t.jsx)("h1",{style:{fontSize:"88px",fontWeight:300,lineHeight:"1",letterSpacing:"-0.03em",color:"#ffffff",margin:0,textShadow:"0 4px 30px rgba(0,0,0,0.5)"},children:i.title}),(0,t.jsx)("span",{style:{fontSize:"32px",fontWeight:500,color:"#a1a1aa"},children:n})]}),r>0&&(0,t.jsx)("div",{style:{display:"flex",gap:"8px",marginTop:"8px"},children:p.map((e,i)=>(0,t.jsx)(W,{filled:e},i))}),(0,t.jsx)("div",{style:{display:"flex",marginTop:"24px"},children:(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"16px",padding:"16px 28px",backgroundColor:"rgba(39, 39, 42, 0.4)",borderRadius:"100px",border:"1px solid rgba(255,255,255,0.08)",backdropFilter:"blur(10px)"},children:[x,(0,t.jsx)("span",{style:{fontSize:"28px",fontWeight:500,color:"#e4e4e7"},children:h})]})})]})]}),c.length>0&&(0,t.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"20px",borderTop:"1px solid rgba(255,255,255,0.1)",paddingTop:"40px"},children:[(0,t.jsx)("span",{style:{fontSize:"20px",fontWeight:600,textTransform:"uppercase",letterSpacing:"0.15em",color:"#71717a"},children:"Watched With"}),(0,t.jsx)("div",{style:{display:"flex",alignItems:"center",gap:"24px"},children:c.map((e,i)=>(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[e.profile_pic_url?(0,t.jsx)("img",{src:e.profile_pic_url,width:"56",height:"56",style:{borderRadius:"50%",border:"2px solid #52525b"}}):(0,t.jsx)("div",{style:{width:"56px",height:"56px",borderRadius:"50%",backgroundColor:"#27272a",border:"2px solid #52525b"}}),(0,t.jsx)("span",{style:{fontSize:"28px",color:"#e4e4e7"},children:e.username})]},i))})]}),e.notes&&(0,t.jsx)("div",{style:{display:"flex",flexDirection:"column",marginTop:c.length>0?"20px":"40px"},children:(0,t.jsxs)("p",{style:{fontSize:"48px",lineHeight:"1.4",fontWeight:300,color:"#d4d4d8",margin:0,fontStyle:"italic",fontFamily:'"Inter", sans-serif'},children:['"',e.notes,'"']})})]}),(0,t.jsx)("div",{style:{marginTop:"auto",display:"flex",justifyContent:"center",paddingTop:"60px",opacity:.4},children:(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[(0,t.jsx)("div",{style:{display:"flex",width:"28px",height:"28px",backgroundColor:"#e4e4e7",borderRadius:"4px"}}),(0,t.jsx)("span",{style:{fontSize:"26px",fontWeight:600,letterSpacing:"0.05em",color:"#e4e4e7"},children:"deeperweave.com"})]})})]})]})}let U=D.default.env.NEXT_PUBLIC_SITE_URL?D.default.env.NEXT_PUBLIC_SITE_URL:"http://localhost:3000",O=e=>e?e.startsWith("http")?e:`https://image.tmdb.org/t/p/original${e}`:null,X=({filled:e})=>(0,t.jsx)("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,t.jsx)("path",{d:"M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z",fill:e?"#ffffff":"none",stroke:e?"#ffffff":"#52525b",strokeWidth:"1.5",strokeLinejoin:"miter"})}),q={Netflix:{logo:"/logos/netflix.svg"},"Prime Video":{logo:"/logos/prime-video.svg"},"Disney+":{logo:"/logos/disney-plus.svg"},Hulu:{logo:"/logos/hulu.svg"},Max:{logo:"/logos/max.svg"},"Apple TV+":{logo:"/logos/apple-tv.svg"}};function G({entry:e}){let i=e.movies||e.series;if(!i)return(0,t.jsx)("div",{style:{display:"flex",width:1080,height:1920,backgroundColor:"#09090b",color:"white",alignItems:"center",justifyContent:"center"},children:(0,t.jsx)("h1",{children:"Media Not Found"})});let l=O(i.backdrop_url),a=O(i.poster_url),s=e.profiles,r=Number(e.rating)||0,n=i.release_date?.split("-")[0]||"N/A",o=new Date(e.watched_on).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}),c=e.viewing_context,d=Array.from({length:5},(e,t)=>t<Math.round(r));return(0,t.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:"100%",height:"100%",backgroundColor:"#000000",color:"#ffffff",fontFamily:'"Inter", sans-serif',position:"relative",alignItems:"center"},children:[(0,t.jsxs)("div",{style:{display:"flex",position:"absolute",top:0,left:0,width:"100%",height:"920px"},children:[l?(0,t.jsx)("img",{src:l,style:{width:"100%",height:"100%",objectFit:"cover",objectPosition:"top center",opacity:.8}}):(0,t.jsx)("div",{style:{width:"100%",height:"100%",background:"linear-gradient(to bottom, #27272a, #000)"}}),(0,t.jsx)("div",{style:{display:"flex",position:"absolute",bottom:0,left:0,width:"100%",height:"400px",background:"linear-gradient(to bottom, transparent 0%, #000000 100%)"}}),(0,t.jsx)("div",{style:{display:"flex",position:"absolute",top:0,left:0,width:"100%",height:"300px",background:"linear-gradient(to top, transparent 0%, rgba(0,0,0,0.6) 100%)"}})]}),(0,t.jsxs)("div",{style:{position:"relative",display:"flex",flexDirection:"column",height:"100%",width:"100%",padding:"80px",alignItems:"center"},children:[(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"20px",marginTop:"20px",backgroundColor:"rgba(0, 0, 0, 0.4)",padding:"12px 28px",borderRadius:"100px",border:"1px solid rgba(255,255,255,0.15)",backdropFilter:"blur(8px)"},children:[s.profile_pic_url&&(0,t.jsx)("img",{src:s.profile_pic_url,width:"56",height:"56",style:{borderRadius:"50%"}}),(0,t.jsxs)("span",{style:{fontSize:"26px",fontWeight:600,color:"#e4e4e7"},children:["@",s.username]})]}),(0,t.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",marginTop:"240px",width:"100%"},children:[(0,t.jsxs)("div",{style:{display:"flex",position:"relative",marginBottom:"60px"},children:[(0,t.jsx)("div",{style:{position:"absolute",inset:0,boxShadow:"0 30px 80px -10px rgba(0,0,0,1)",borderRadius:"16px"}}),(0,t.jsx)("img",{src:a||"",width:"500",height:"750",style:{borderRadius:"16px",border:"1px solid rgba(255,255,255,0.15)",objectFit:"cover",zIndex:10}})]}),(0,t.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"16px",width:"100%"},children:[(0,t.jsx)("h1",{style:{fontSize:"80px",fontWeight:700,textAlign:"center",lineHeight:"1.1",letterSpacing:"-0.02em",color:"#ffffff",margin:0,maxWidth:"900px"},children:i.title}),(0,t.jsx)("span",{style:{fontSize:"36px",color:"#71717a",fontWeight:500},children:n}),r>0&&(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"16px",marginTop:"16px"},children:[(0,t.jsx)("div",{style:{display:"flex",gap:"8px"},children:d.map((e,i)=>(0,t.jsx)(X,{filled:e},i))}),(0,t.jsx)("span",{style:{fontSize:"40px",fontWeight:700,color:"#e4e4e7"},children:r.toFixed(1)})]}),(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"16px",marginTop:"40px",padding:"16px 32px",backgroundColor:"#18181b",borderRadius:"12px",border:"1px solid #27272a"},children:[c&&q[c]&&(0,t.jsx)("img",{src:`${U}${q[c].logo}`,width:"32",height:"32",style:{objectFit:"contain",filter:"Apple TV+"===c?"invert(1)":"none"}}),(0,t.jsxs)("span",{style:{fontSize:"28px",color:"#d4d4d8",fontWeight:500},children:["Watched on ",o]})]})]})]}),(0,t.jsx)("div",{style:{marginTop:"auto",display:"flex",paddingBottom:"20px",opacity:.3},children:(0,t.jsx)("span",{style:{fontSize:"22px",fontWeight:700,letterSpacing:"0.15em",textTransform:"uppercase"},children:"deeperweave.com"})})]})]})}let K=({platform:e})=>{let i=e.toLowerCase().trim(),l={bg:"bg-zinc-100 dark:bg-zinc-800",text:"text-zinc-600 dark:text-zinc-400",icon:null,label:e};return i.includes("netflix")?l={bg:"bg-black",text:"text-[#E50914]",icon:(0,t.jsx)(d.default,{src:"/logos/netflix.svg",alt:"Netflix",width:50,height:14,className:"h-3.5 w-auto object-contain"}),label:"Netflix"}:i.includes("prime")||i.includes("amazon")?l={bg:"bg-[#00A8E1]",text:"text-white",icon:(0,t.jsx)(d.default,{src:"/logos/prime-video.svg",alt:"Prime Video",width:50,height:14,className:"h-3.5 w-auto object-contain brightness-0 invert"}),label:"Prime"}:i.includes("disney")?l={bg:"bg-[#113CCF]",text:"text-white",icon:(0,t.jsx)(d.default,{src:"/logos/disney-plus.svg",alt:"Disney+",width:50,height:16,className:"h-4 w-auto object-contain"}),label:"Disney+"}:i.includes("hulu")?l={bg:"bg-[#1CE783]",text:"text-black",icon:(0,t.jsx)(d.default,{src:"/logos/hulu.svg",alt:"Hulu",width:50,height:14,className:"h-3 w-auto object-contain"}),label:"Hulu"}:i.includes("max")||i.includes("hbo")?l={bg:"bg-[#002BE7]",text:"text-white",icon:(0,t.jsx)(d.default,{src:"/logos/max.svg",alt:"Max",width:50,height:14,className:"h-3.5 w-auto object-contain brightness-0 invert"}),label:"Max"}:i.includes("apple")||i.includes("tv+")?l={bg:"bg-white",text:"text-black",icon:(0,t.jsx)(d.default,{src:"/logos/apple-tv.svg",alt:"Apple TV",width:50,height:14,className:"h-3.5 w-auto object-contain"}),label:"Apple TV"}:i.includes("cinema")||i.includes("theater")?l={bg:"bg-rose-600",text:"text-white",icon:(0,t.jsx)(y,{className:"w-3.5 h-3.5"}),label:"Cinema"}:(i.includes("tv")||i.includes("television"))&&(l={bg:"bg-zinc-800",text:"text-zinc-300",icon:(0,t.jsx)(z.TvIcon,{className:"w-3.5 h-3.5"}),label:"TV"}),(0,t.jsx)("div",{className:`inline-flex items-center justify-center gap-1.5 px-2 py-0.5 rounded-sm ${l.bg} shadow-sm border border-black/5 dark:border-white/5`,children:l.icon?l.icon:(0,t.jsx)("span",{className:`text-[10px] font-bold uppercase tracking-wide ${l.text}`,children:l.label})})};function J({entry:e,username:a,isOpen:s,onClose:r,onDownload:d,isDownloading:x}){let[f,b]=(0,i.useState)(!1);if(!s)return null;let y=e=>{e.preventDefault(),e.stopPropagation()},z=async()=>{confirm("Are you sure you want to delete this log?")&&(r(),k.toast.promise(_(e.id),{loading:"Deleting...",success:"Entry deleted",error:"Failed to delete"}))};return(0,c.createPortal)((0,t.jsx)(o.AnimatePresence,{children:(0,t.jsxs)("div",{className:"fixed inset-0 z-[9999] isolate",children:[(0,t.jsx)(n.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e=>{y(e),r()},className:"absolute inset-0 bg-black/60 backdrop-blur-sm"}),f?(0,t.jsx)("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:(0,t.jsxs)(n.motion.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},onClick:y,className:"w-full max-w-sm bg-white dark:bg-zinc-950 border border-zinc-200 dark:border-zinc-800 rounded-lg p-6 shadow-2xl relative overflow-hidden pointer-events-auto",children:[(0,t.jsx)("button",{onClick:()=>b(!1),className:"absolute top-4 right-4 text-zinc-400 hover:text-zinc-900 dark:hover:text-zinc-100",children:(0,t.jsx)(j.XMarkIcon,{className:"w-5 h-5"})}),(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-6",children:[(0,t.jsx)("div",{className:"p-2 bg-zinc-100 dark:bg-zinc-900 rounded-md",children:(0,t.jsx)(w,{className:"w-5 h-5 text-zinc-700 dark:text-zinc-300"})}),(0,t.jsx)("h3",{className:"text-sm font-bold uppercase tracking-widest text-zinc-700 dark:text-zinc-300",children:"Share Log"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3 mb-6",children:[(0,t.jsxs)("button",{onClick:()=>d("notes"),disabled:x,className:"flex flex-col items-center gap-3 p-4 border border-zinc-200 dark:border-zinc-800 rounded-md hover:bg-zinc-50 dark:hover:bg-zinc-900 hover:border-zinc-300 dark:hover:border-zinc-700 transition-all group",children:[(0,t.jsx)(g,{className:"w-6 h-6 text-zinc-400 group-hover:text-zinc-900 dark:group-hover:text-zinc-100 transition-colors"}),(0,t.jsx)("span",{className:"text-xs font-bold text-zinc-600 dark:text-zinc-400",children:"With Notes"})]}),(0,t.jsxs)("button",{onClick:()=>d("clean"),disabled:x,className:"flex flex-col items-center gap-3 p-4 border border-zinc-200 dark:border-zinc-800 rounded-md hover:bg-zinc-50 dark:hover:bg-zinc-900 hover:border-zinc-300 dark:hover:border-zinc-700 transition-all group",children:[(0,t.jsx)(u,{className:"w-6 h-6 text-zinc-400 group-hover:text-zinc-900 dark:group-hover:text-zinc-100 transition-colors"}),(0,t.jsx)("span",{className:"text-xs font-bold text-zinc-600 dark:text-zinc-400",children:"Poster Only"})]})]}),x&&(0,t.jsx)("p",{className:"text-center text-[10px] text-zinc-400 animate-pulse mb-3 font-medium tracking-wide",children:"GENERATING IMAGE..."}),(0,t.jsxs)("button",{onClick:()=>{navigator.clipboard.writeText(`${window.location.origin}/profile/${a}/timeline#entry-${e.id}`),k.toast.success("Link copied to clipboard"),b(!1),r()},className:"w-full py-3 bg-zinc-900 dark:bg-white text-white dark:text-black rounded-md text-xs font-bold uppercase tracking-wide flex items-center justify-center gap-2 hover:opacity-90 transition-opacity shadow-lg",children:[(0,t.jsx)(v,{className:"w-4 h-4"})," Copy Link"]})]})}):(0,t.jsx)("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:(0,t.jsxs)(n.motion.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},onClick:y,className:"w-full max-w-xs bg-white dark:bg-zinc-950 border border-zinc-200 dark:border-zinc-800 rounded-xl shadow-2xl overflow-hidden pointer-events-auto",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-zinc-100 dark:border-zinc-800",children:[(0,t.jsx)("h3",{className:"text-sm font-bold text-zinc-900 dark:text-zinc-100",children:"Manage Entry"}),(0,t.jsx)("button",{onClick:r,className:"p-1 text-zinc-400 hover:text-zinc-900 dark:hover:text-zinc-100 bg-zinc-100 dark:bg-zinc-900 rounded-full",children:(0,t.jsx)(j.XMarkIcon,{className:"w-4 h-4"})})]}),(0,t.jsxs)("div",{className:"p-2 space-y-1",children:[(0,t.jsxs)("button",{onClick:()=>b(!0),className:"flex w-full items-center gap-3 px-3 py-3 text-sm font-medium text-zinc-600 dark:text-zinc-300 hover:bg-zinc-50 dark:hover:bg-zinc-900 rounded-xl transition-colors",children:[(0,t.jsx)(h.ShareIcon,{className:"w-4 h-4"})," Share"]}),(0,t.jsxs)(l.default,{href:`/profile/${a}/timeline/edit/${e.id}`,onClick:r,className:"flex w-full items-center gap-3 px-3 py-3 text-sm font-medium text-zinc-600 dark:text-zinc-300 hover:bg-zinc-50 dark:hover:bg-zinc-900 rounded-xl transition-colors",children:[(0,t.jsx)(p,{className:"w-4 h-4"})," Edit"]}),(0,t.jsxs)("button",{onClick:z,className:"flex w-full items-center gap-3 px-3 py-3 text-sm font-medium text-red-600 hover:bg-red-50 dark:hover:bg-red-950/30 rounded-xl transition-colors",children:[(0,t.jsx)(m,{className:"w-4 h-4"})," Delete"]})]})]})})]})}),document.body)}function Q({isOpen:e,onClose:i,notes:l,title:a,posterUrl:s,date:r,rating:x}){return e?(0,c.createPortal)((0,t.jsx)(o.AnimatePresence,{children:(0,t.jsxs)("div",{className:"fixed inset-0 z-[9999] isolate",children:[(0,t.jsx)(n.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e=>{e.stopPropagation(),i()},className:"absolute inset-0 bg-zinc-950/60 backdrop-blur-sm"}),(0,t.jsx)("div",{className:"absolute inset-0 flex items-center justify-center p-4 sm:p-6 pointer-events-none",children:(0,t.jsxs)(n.motion.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},className:"relative w-full max-w-lg bg-white dark:bg-zinc-950 border border-zinc-200 dark:border-zinc-800 rounded-lg shadow-2xl flex flex-col max-h-[85vh] overflow-hidden pointer-events-auto",onClick:e=>e.stopPropagation(),children:[(0,t.jsxs)("div",{className:"shrink-0 flex items-start gap-4 p-5 border-b border-zinc-100 dark:border-zinc-900 bg-zinc-50/50 dark:bg-zinc-900/20",children:[(0,t.jsx)("div",{className:"relative w-12 h-16 shrink-0 rounded-sm overflow-hidden shadow-sm border border-zinc-200 dark:border-zinc-800",children:(0,t.jsx)(d.default,{src:s,alt:"Poster",fill:!0,className:"object-cover"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0 pt-0.5",children:[(0,t.jsx)("h3",{className:"text-base font-bold text-zinc-900 dark:text-zinc-100 leading-tight truncate pr-8",children:a}),(0,t.jsxs)("div",{className:"flex items-center gap-2 mt-1.5 text-xs text-zinc-500 dark:text-zinc-400",children:[(0,t.jsx)("span",{className:"font-medium",children:r}),x&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:"text-zinc-300 dark:text-zinc-700",children:"•"}),(0,t.jsxs)("div",{className:"flex items-center gap-1 text-zinc-900 dark:text-zinc-100 font-semibold",children:[(0,t.jsx)(f.StarIcon,{className:"w-3 h-3 text-zinc-400 dark:text-zinc-600"}),x]})]})]})]}),(0,t.jsx)("button",{onClick:i,className:"absolute top-4 right-4 p-1 text-zinc-400 hover:text-zinc-900 dark:hover:text-zinc-100 transition-colors rounded-md hover:bg-zinc-200/50 dark:hover:bg-zinc-800",children:(0,t.jsx)(j.XMarkIcon,{className:"w-5 h-5"})})]}),(0,t.jsx)("div",{className:"overflow-y-auto p-5 custom-scrollbar",children:(0,t.jsx)("div",{className:`${C.geistSans.className} text-base leading-relaxed text-zinc-800 dark:text-zinc-300 whitespace-pre-wrap`,children:l})})]})})]})}),document.body):null}function Y({entry:e,index:a,isOwnProfile:s,username:r,isSFW:o}){let c=e.movies||e.series,[h,p]=(0,i.useState)(null),[m,g]=(0,i.useState)(null),[j,w]=(0,i.useState)(null),[y,z]=(0,i.useState)(!1),[N,_]=(0,i.useState)(null),R=(0,i.useRef)(null),[A,I]=(0,i.useState)(!1),[L,T]=(0,i.useState)(!1),D=e.movies?.adult===!0||e.series?.adult===!0;if((0,i.useEffect)(()=>{N&&R.current&&(async()=>{z(!0);try{await new Promise(e=>setTimeout(e,500));let e=await (0,P.toPng)(R.current,{cacheBust:!0,pixelRatio:1,width:1080,height:1920,backgroundColor:"#09090b"}),t=c?.title.replace(/[^a-z0-9]/gi,"_").toLowerCase()||"story",i=document.createElement("a");i.download=`${t}_${N}.png`,i.href=e,i.click(),k.toast.success("Image saved")}catch(e){console.error(e),k.toast.error("Failed to generate image")}finally{z(!1),_(null)}})()},[N,c?.title]),!c)return null;let $=new Date(e.watched_on).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",year:"numeric"}),F=Number(e.rating),W=F%1==0?F.toString():F.toFixed(1),B=e.rewatch_count||0,V=e.is_rewatch||B>0,U=c.release_date?.split("-")[0],O=()=>w({tmdb_id:c.tmdb_id,title:c.title,media_type:e.movies?"movie":"tv"});return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.motion.div,{initial:{opacity:0,y:10},whileInView:{opacity:1,y:0},viewport:{once:!0,margin:"-50px"},className:"group relative w-full mb-4",id:`entry-${e.id}`,children:(0,t.jsxs)("div",{className:"flex flex-row w-full bg-white dark:bg-zinc-950 border border-zinc-200 dark:border-zinc-800 rounded-md overflow-hidden shadow-sm hover:shadow-md transition-all duration-300",children:[(0,t.jsxs)("div",{className:"relative w-24 min-h-[140px] md:w-32 shrink-0 cursor-pointer bg-zinc-100 dark:bg-zinc-900 group/poster",onClick:O,children:[(0,t.jsx)(Z.default,{isAdult:D,isSFW:o,children:(0,t.jsx)(d.default,{src:c.poster_url||"/placeholder-poster.png",alt:c.title,fill:!0,className:"object-cover object-center group-hover/poster:scale-105 transition-transform duration-500"})}),D&&(0,t.jsx)("div",{className:"absolute top-1 left-1 pointer-events-none z-10",children:(0,t.jsx)("div",{className:"w-2 h-2 rounded-full bg-red-600 shadow-sm border border-white/20"})})]}),(0,t.jsxs)("div",{className:"flex-1 flex flex-col p-4 min-w-0 relative",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-1",children:[(0,t.jsx)("span",{className:"text-xs uppercase tracking-wide font-semibold text-zinc-500 dark:text-zinc-500 italic",children:$}),s&&(0,t.jsx)("button",{onClick:e=>{e.stopPropagation(),I(!0)},className:"p-1 text-zinc-400 hover:text-zinc-900 dark:hover:text-zinc-100 transition-colors rounded-md hover:bg-zinc-100 dark:bg-zinc-900",children:(0,t.jsx)(x.EllipsisHorizontalIcon,{className:"w-5 h-5"})})]}),(0,t.jsxs)("div",{className:"flex items-baseline gap-2 mb-2 pr-6",children:[(0,t.jsx)("h3",{className:"text-base md:text-lg font-bold leading-tight text-zinc-900 dark:text-zinc-100 cursor-pointer hover:underline decoration-zinc-300 underline-offset-2 truncate",onClick:O,title:c.title,children:c.title}),U&&(0,t.jsxs)("span",{className:"text-sm font-normal text-zinc-400 shrink-0",children:["(",U,")"]})]}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-x-2 gap-y-1 text-xs text-zinc-500 dark:text-zinc-400 mb-2.5",children:[F>0&&(0,t.jsxs)("div",{className:"flex items-center gap-1 font-bold text-zinc-900 dark:text-zinc-100",children:[(0,t.jsx)(f.StarIcon,{className:"w-3.5 h-3.5 text-zinc-400 dark:text-zinc-600"}),(0,t.jsx)("span",{children:W})]}),F>0&&e.viewing_context&&(0,t.jsx)("span",{className:"text-zinc-300 dark:text-zinc-700",children:"•"}),e.viewing_context&&(0,t.jsx)(K,{platform:e.viewing_context}),(F>0||e.viewing_context)&&V&&(0,t.jsx)("span",{className:"text-zinc-300 dark:text-zinc-700",children:"•"}),V&&(0,t.jsxs)("div",{className:"inline-flex items-center gap-1 px-1.5 py-0.5 rounded bg-amber-100 dark:bg-amber-500/10 text-amber-700 dark:text-amber-500 font-bold uppercase tracking-wider text-[10px]",title:`You have rewatched this ${B} times`,children:[(0,t.jsx)(b,{className:"w-3 h-3 stroke-[3]"}),(0,t.jsx)("span",{children:B>0?`Rewatch ${B}`:"Rewatch"})]}),(F>0||e.viewing_context||V)&&e.timeline_collaborators.length>0&&(0,t.jsx)("span",{className:"text-zinc-300 dark:text-zinc-700",children:"•"}),e.timeline_collaborators.length>0&&(0,t.jsx)("div",{className:"flex -space-x-1",children:e.timeline_collaborators.slice(0,3).map(e=>e.profiles&&(0,t.jsx)("img",{src:e.profiles.profile_pic_url||"/placeholder-user.jpg",alt:e.profiles.username,className:"w-4 h-4 rounded-sm ring-1 ring-white dark:ring-zinc-950 object-cover hover:scale-110 hover:z-10 transition-transform cursor-pointer",onClick:t=>{t.stopPropagation(),g(e.profiles)},title:e.profiles.username},e.profiles.id))}),(F>0||e.viewing_context||V||e.timeline_collaborators.length>0)&&e.photo_url&&(0,t.jsx)("span",{className:"text-zinc-300 dark:text-zinc-700",children:"•"}),e.photo_url&&(0,t.jsx)("button",{onClick:t=>{t.stopPropagation(),p(e.photo_url)},className:"text-zinc-400 hover:text-zinc-900 dark:text-zinc-500 dark:hover:text-zinc-200 transition-colors",children:(0,t.jsx)(u,{className:"w-3.5 h-3.5"})})]}),e.notes&&(0,t.jsx)("div",{className:"mb-2 group/notes cursor-pointer",onClick:()=>T(!0),title:"Click to read full notes",children:(0,t.jsx)("p",{className:`text-sm text-zinc-600 dark:text-zinc-300 leading-relaxed line-clamp-2 group-hover/notes:text-zinc-900 dark:group-hover/notes:text-zinc-100 transition-colors ${C.geistSans.className}`,children:e.notes})}),e.posts?.slug&&(0,t.jsx)("div",{className:"mt-auto pt-1",children:(0,t.jsxs)(l.default,{href:`/blog/${e.posts.slug}`,className:"flex items-center gap-1.5 text-xs font-semibold text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 transition-colors",children:[(0,t.jsx)(v,{className:"w-3 h-3"}),(0,t.jsx)("span",{children:"Read Review"})]})})]})]})}),(0,t.jsx)(J,{entry:e,username:r,isOpen:A,onClose:()=>I(!1),onDownload:e=>{_(e)},isDownloading:y}),(0,t.jsx)(Q,{isOpen:L,onClose:()=>T(!1),notes:e.notes||"",title:c.title,posterUrl:c.poster_url||"/placeholder-poster.png",date:$,rating:W}),j&&(0,t.jsx)(S.default,{tmdbId:j.tmdb_id,mediaType:j.media_type,initialData:"movie"===j.media_type?e.movies:e.series,isOpen:!0,onClose:()=>w(null)}),h&&(0,t.jsx)(E,{imageUrl:h,onClose:()=>p(null)}),m&&(0,t.jsx)(M,{user:m,onClose:()=>g(null)}),N&&(0,t.jsx)("div",{style:{position:"fixed",top:0,left:"-9999px",width:"1080px",height:"1920px",zIndex:-1,background:"#09090b"},children:(0,t.jsx)("div",{ref:R,style:{width:"100%",height:"100%"},children:"clean"===N?(0,t.jsx)(G,{entry:e}):(0,t.jsx)(H,{entry:e})})})]})}var ee=e.i(53320),et=e.i(12313);let ei=async e=>{let t=(0,et.createClient)(),{data:i,error:l}=await t.from("timeline_entries").select(`
      *,
      user:profiles!timeline_entries_user_id_fkey!inner(username, display_name, profile_pic_url),
      movies:movies(*),
      series:series(*),
      timeline_collaborators(*, profiles(id, username, display_name, profile_pic_url))
    `).eq("user.username",e).order("watched_on",{ascending:!0}).order("created_at",{ascending:!0});if(l)throw console.error("Supabase Timeline Error:",JSON.stringify(l,null,2)),l;let a={};return(i||[]).map(e=>{let t=Array.isArray(e.movies)?e.movies[0]:e.movies,i=Array.isArray(e.series)?e.series[0]:e.series,l=Array.isArray(e.user)?e.user[0]:e.user,s=(e.timeline_collaborators||[]).map(e=>({...e,profiles:Array.isArray(e.profiles)?e.profiles[0]:e.profiles})),r=t?`movie_${t.tmdb_id}`:i?`tv_${i.tmdb_id}`:null,n=0;return r&&(a[r]=(a[r]||0)+1,n=a[r]-1),{...e,movies:t||null,series:i||null,profiles:l||null,timeline_collaborators:s,is_rewatch:n>0,rewatch_count:n}}).reverse()};var el=e.i(87200);let ea={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.08}}};function es({username:e,isOwnProfile:c}){let{data:d,isLoading:x}=(0,ee.useQuery)({queryKey:["timeline",e],queryFn:()=>ei(e),staleTime:3e5}),[h,p]=(0,i.useState)(!0);(0,i.useEffect)(()=>{(async()=>{let e=(0,et.createClient)(),{data:{user:t}}=await e.auth.getUser();p("sfw"===(t?.user_metadata?.content_preference||"sfw"))})()},[]);let m=d||[],[g,u]=(0,i.useState)(10),f=m.slice(0,g),b=g<m.length;return(0,t.jsxs)("div",{className:"w-full animate-in fade-in slide-in-from-bottom-4 duration-500 pb-20 relative z-10 max-w-4xl mx-auto pt-8 px-4 md:px-6",children:[(0,t.jsxs)("div",{className:"max-w-4xl flex items-center justify-between mb-6",children:[(0,t.jsx)("div",{className:"flex items-baseline gap-3",children:(0,t.jsxs)("h2",{className:"text-xl font-bold text-zinc-900 dark:text-zinc-100",children:["Watch History ",m.length>0&&`(${m.length})`]})}),c&&(0,t.jsxs)(l.default,{href:`/profile/${e}/timeline/create`,className:"flex items-center gap-2 px-3 py-1.5 bg-zinc-900 dark:bg-zinc-100 text-white dark:text-zinc-900 rounded-full text-xs font-bold transition-transform active:scale-95 hover:opacity-90",children:[(0,t.jsx)(a.PlusIcon,{className:"w-3.5 h-3.5"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"Log Entry"})]})]}),x?(0,t.jsx)(el.TimelineSkeletonList,{}):m.length>0?(0,t.jsx)("div",{className:"flex flex-col items-center",children:(0,t.jsxs)("div",{className:"w-full max-w-4xl",children:[(0,t.jsx)(n.motion.div,{variants:ea,initial:"hidden",animate:"visible",children:(0,t.jsx)(o.AnimatePresence,{children:f.map((i,l)=>(0,t.jsx)(Y,{entry:i,index:l,isOwnProfile:c,username:e,isSFW:h},i.id))})}),b&&(0,t.jsx)("div",{className:"flex justify-center mt-12 mb-8 relative z-20",children:(0,t.jsxs)(n.motion.button,{onClick:()=>{u(e=>Math.min(e+10,m.length))},whileHover:{scale:1.02},whileTap:{scale:.98},className:"group flex items-center gap-3 px-8 py-3 bg-white dark:bg-black border border-zinc-200 dark:border-zinc-800 hover:border-zinc-400 dark:hover:border-zinc-600 text-zinc-900 dark:text-zinc-100 transition-all rounded-sm shadow-sm",children:[(0,t.jsx)("span",{className:"text-xs font-bold uppercase tracking-widest",children:"Expand Log"}),(0,t.jsx)(s.ChevronDownIcon,{className:"w-4 h-4 text-zinc-400 group-hover:translate-y-1 transition-transform"}),(0,t.jsxs)("span",{className:"text-[10px] font-mono text-zinc-400 ml-2",children:["[",m.length-g," REMAINING]"]})]})})]})}):(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center py-20 border-2 border-dashed border-zinc-200 dark:border-zinc-800 rounded-3xl bg-zinc-50/50 dark:bg-zinc-900/20",children:[(0,t.jsx)("div",{className:"w-16 h-16 bg-zinc-100 dark:bg-zinc-800 rounded-full flex items-center justify-center mb-4 text-zinc-400",children:(0,t.jsx)(r.ArchiveBoxXMarkIcon,{className:"w-8 h-8",strokeWidth:1.5})}),(0,t.jsx)("h3",{className:"text-sm font-bold text-zinc-900 dark:text-zinc-100",children:"TimeLine Empty"}),(0,t.jsx)("p",{className:"text-xs text-zinc-500 mt-1 max-w-xs text-center",children:c?"No watch history recorded.":`${e} hasn't logged any watch history yet.`}),c&&(0,t.jsx)(l.default,{href:`/profile/${e}/timeline/create`,className:"mt-6 text-xs font-bold text-blue-600 dark:text-blue-400 hover:underline",children:"Log first film? →"})]})]})}e.s(["default",()=>es],97751)}]);