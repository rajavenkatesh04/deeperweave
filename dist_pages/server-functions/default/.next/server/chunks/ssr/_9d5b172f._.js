module.exports=[42002,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={getClientReferenceManifest:function(){return q},getServerActionsManifest:function(){return r},getServerModuleMap:function(){return s},selectWorkerForForwarding:function(){return n},setManifestsSingleton:function(){return o}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(89382),g=a.r(34022),h=a.r(43910),i=a.r(54546),j=a.r(56704),k=Symbol.for("next.server.manifests"),l=globalThis;function m(a){return(0,h.pathHasPrefix)(a,"app")?a:"app"+a}function n(a,b){var c,d;let e=null==(c=r().node[a])?void 0:c.workers;if(e&&!e[m(b)])return d=Object.keys(e)[0],(0,g.normalizeAppPath)((0,i.removePathPrefix)(d,"app"))}function o({page:a,clientReferenceManifest:b,serverActionsManifest:c}){let d=l[k];if(d)d.clientReferenceManifestsPerRoute.set((0,g.normalizeAppPath)(a),b),d.serverActionsManifest=c;else{let d,e=new Map([[(0,g.normalizeAppPath)(a),b]]),h=(d=new Map,new Proxy({},{get(a,b){let c=j.workAsyncStorage.getStore();switch(b){case"moduleLoading":case"entryCSSFiles":case"entryJSFiles":{if(!c)throw Object.defineProperty(new f.InvariantError(`Cannot access "${b}" without a work store.`),"__NEXT_ERROR_CODE",{value:"E952",enumerable:!1,configurable:!0});let a=e.get(c.route);if(!a)throw Object.defineProperty(new f.InvariantError(`The client reference manifest for route "${c.route}" does not exist.`),"__NEXT_ERROR_CODE",{value:"E951",enumerable:!1,configurable:!0});return a[b]}case"clientModules":case"rscModuleMapping":case"edgeRscModuleMapping":case"ssrModuleMapping":case"edgeSSRModuleMapping":{let a=d.get(b);!a&&(a=new Proxy({},{get(a,c){let d=j.workAsyncStorage.getStore();if(d){let a=e.get(d.route);if(null==a?void 0:a[b][c])return a[b][c]}else for(let a of e.values()){let d=a[b][c];if(void 0!==d)return d}}}),d.set(b,a));return a}default:throw Object.defineProperty(new f.InvariantError(`This is a proxied client reference manifest. The property "${String(b)}" is not handled.`),"__NEXT_ERROR_CODE",{value:"E953",enumerable:!1,configurable:!0})}}}));l[k]={clientReferenceManifestsPerRoute:e,proxiedClientReferenceManifest:h,serverActionsManifest:c,serverModuleMap:new Proxy({},{get:(a,b)=>{var c,d;let e,f=null==(d=r().node)||null==(c=d[b])?void 0:c.workers;if(!f)return;let g=j.workAsyncStorage.getStore();if(!(e=g?f[m(g.page)]:Object.values(f).at(0)))return;let{moduleId:h,async:i}=e;return{id:h,name:b,chunks:[],async:i}}})}}}function p(){let a=l[k];if(!a)throw Object.defineProperty(new f.InvariantError("The manifests singleton was not initialized."),"__NEXT_ERROR_CODE",{value:"E950",enumerable:!1,configurable:!0});return a}function q(){return p().proxiedClientReferenceManifest}function r(){return p().serverActionsManifest}function s(){return p().serverModuleMap}},28512,(a,b,c)=>{"use strict";let d;Object.defineProperty(c,"__esModule",{value:!0});var e={arrayBufferToString:function(){return i},decrypt:function(){return l},encrypt:function(){return k},getActionEncryptionKey:function(){return m},stringToUint8Array:function(){return j}};for(var f in e)Object.defineProperty(c,f,{enumerable:!0,get:e[f]});let g=a.r(89382),h=a.r(42002);function i(a){let b=new Uint8Array(a),c=b.byteLength;if(c<65535)return String.fromCharCode.apply(null,b);let d="";for(let a=0;a<c;a++)d+=String.fromCharCode(b[a]);return d}function j(a){let b=a.length,c=new Uint8Array(b);for(let d=0;d<b;d++)c[d]=a.charCodeAt(d);return c}function k(a,b,c){return crypto.subtle.encrypt({name:"AES-GCM",iv:b},a,c)}function l(a,b,c){return crypto.subtle.decrypt({name:"AES-GCM",iv:b},a,c)}async function m(){if(d)return d;let a=(0,h.getServerActionsManifest)(),b=process.env.NEXT_SERVER_ACTIONS_ENCRYPTION_KEY||a.encryptionKey;if(void 0===b)throw Object.defineProperty(new g.InvariantError("Missing encryption key for Server Actions"),"__NEXT_ERROR_CODE",{value:"E571",enumerable:!1,configurable:!0});return d=await crypto.subtle.importKey("raw",j(atob(b)),"AES-GCM",!0,["encrypt","decrypt"])}},51156,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d,e,f={decryptActionBoundArgs:function(){return x},encryptActionBoundArgs:function(){return w}};for(var g in f)Object.defineProperty(c,g,{enumerable:!0,get:f[g]});a.r(76012);let h=a.r(96299),i=a.r(63793),j=a.r(60487),k=a.r(28512),l=a.r(42002),m=a.r(32319),n=a.r(26285),o=(d=a.r(38704))&&d.__esModule?d:{default:d},p=new TextEncoder,q=new TextDecoder,r,s;async function t(a,b){let c=await (0,k.getActionEncryptionKey)();if(void 0===c)throw Object.defineProperty(Error("Missing encryption key for Server Action. This is a bug in Next.js"),"__NEXT_ERROR_CODE",{value:"E65",enumerable:!1,configurable:!0});let d=atob(b),e=d.slice(0,16),f=d.slice(16),g=q.decode(await (0,k.decrypt)(c,(0,k.stringToUint8Array)(e),(0,k.stringToUint8Array)(f)));if(!g.startsWith(a))throw Object.defineProperty(Error("Invalid Server Action payload: failed to decrypt."),"__NEXT_ERROR_CODE",{value:"E191",enumerable:!1,configurable:!0});return g.slice(a.length)}async function u(a,b){let c=await (0,k.getActionEncryptionKey)();if(void 0===c)throw Object.defineProperty(Error("Missing encryption key for Server Action. This is a bug in Next.js"),"__NEXT_ERROR_CODE",{value:"E65",enumerable:!1,configurable:!0});let d=new Uint8Array(16);m.workUnitAsyncStorage.exit(()=>crypto.getRandomValues(d));let e=(0,k.arrayBufferToString)(d.buffer),f=await (0,k.encrypt)(c,d,p.encode(a+b));return btoa(e+(0,k.arrayBufferToString)(f))}var v=((e=v||{})[e.Ready=0]="Ready",e[e.Pending=1]="Pending",e[e.Complete=2]="Complete",e);let w=o.default.cache(async function a(b,...c){let d=m.workUnitAsyncStorage.getStore(),e=d?(0,m.getCacheSignal)(d):void 0,{clientModules:f}=(0,l.getClientReferenceManifest)(),g=Error();Error.captureStackTrace(g,a);let i=!1,k=d?(0,n.createHangingInputAbortSignal)(d):void 0,o=0;function p(){0===o&&(o=1,null==e||e.beginRead())}function q(){1===o&&(null==e||e.endRead()),o=2}k&&e&&k.addEventListener("abort",p,{once:!0});let s=await (0,j.streamToString)((0,h.renderToReadableStream)(c,f,{filterStackFrame:r,signal:k,onError(a){(null==k?void 0:k.aborted)||i||(i=!0,g.message=a instanceof Error?a.message:String(a))}}),k);if(i)throw q(),g;if(!d)return u(b,s);p();let t=(0,m.getPrerenderResumeDataCache)(d),v=(0,m.getRenderResumeDataCache)(d),w=b+s,x=(null==t?void 0:t.encryptedBoundArgs.get(w))??(null==v?void 0:v.encryptedBoundArgs.get(w));if(x)return x;let y=await u(b,s);return q(),null==t||t.encryptedBoundArgs.set(w,y),y});async function x(a,b){let c,d=await b,e=m.workUnitAsyncStorage.getStore();if(e){let b=(0,m.getCacheSignal)(e),f=(0,m.getPrerenderResumeDataCache)(e),g=(0,m.getRenderResumeDataCache)(e);(c=(null==f?void 0:f.decryptedBoundArgs.get(d))??(null==g?void 0:g.decryptedBoundArgs.get(d)))||(null==b||b.beginRead(),c=await t(a,d),null==b||b.endRead(),null==f||f.decryptedBoundArgs.set(d,c))}else c=await t(a,d);let{edgeRscModuleMapping:f,rscModuleMapping:g}=(0,l.getClientReferenceManifest)();return await (0,i.createFromReadableStream)(new ReadableStream({start(a){switch(a.enqueue(p.encode(c)),null==e?void 0:e.type){case"prerender":case"prerender-runtime":e.renderSignal.aborted?a.close():e.renderSignal.addEventListener("abort",()=>a.close(),{once:!0});break;case"prerender-client":case"prerender-ppr":case"prerender-legacy":case"request":case"cache":case"private-cache":case"unstable-cache":case void 0:return a.close()}}}),{findSourceMapURL:s,serverConsumerManifest:{moduleLoading:null,moduleMap:g,serverModuleMap:(0,l.getServerModuleMap)()}})}},73309,a=>{"use strict";a.s(["default",()=>b]);let b=(0,a.i(96299).registerClientReference)(function(){throw Error("Attempted to call the default export of [project]/app/ui/notifications/NotificationItem.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/app/ui/notifications/NotificationItem.tsx <module evaluation>","default")},18195,a=>{"use strict";a.s(["default",()=>b]);let b=(0,a.i(96299).registerClientReference)(function(){throw Error("Attempted to call the default export of [project]/app/ui/notifications/NotificationItem.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/app/ui/notifications/NotificationItem.tsx","default")},27052,a=>{"use strict";a.i(73309);var b=a.i(18195);a.n(b)},11365,58596,a=>{"use strict";var b=a.i(20239),c=a.i(41063),d=a.i(51156),e=a.i(76181),f=a.i(29024),g=a.i(69168);async function h(a){(0,g.unstable_noStore)();let b=await (0,f.createClient)(),{data:c,error:d}=await b.from("notifications").select(`
            *,
            actor:actor_id (
                username,
                display_name,
                profile_pic_url
            ),
            post:target_post_id (
                id,
                slug,
                title,
                banner_url
            )
        `).eq("recipient_id",a).order("created_at",{ascending:!1});return d?(console.error("Error fetching notifications:",d),[]):c}(0,a.i(72273).ensureServerEntryExports)([h]),(0,c.registerServerReference)(h,"40c89e2cbb6702bdc24dec93e9490cde71308582b2",null),a.s(["getNotifications",()=>h],58596);var i=a.i(74377),j=a.i(27052);a.i(16162);var k=a.i(25161);a.i(10171);var l=a.i(10443),m=a.i(52756),n=a.i(38704);let o=n.forwardRef(function({title:a,titleId:b,...c},d){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:d,"aria-labelledby":b},c),a?n.createElement("title",{id:b},a):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5 8.25 12l7.5-7.5"}))}),p=n.forwardRef(function({title:a,titleId:b,...c},d){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:d,"aria-labelledby":b},c),a?n.createElement("title",{id:b},a):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0"}))}),q=n.forwardRef(function({title:a,titleId:b,...c},d){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:d,"aria-labelledby":b},c),a?n.createElement("title",{id:b},a):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}),r=async function(a){var[b]=await (0,d.decryptActionBoundArgs)("4069a531b5e4b67419f67ed5235a91cab3c55043b3",a);await (0,i.markAllNotificationsAsRead)(b)};async function s(){let a=await (0,e.getUserProfile)();a?.user||(0,k.redirect)("/auth/login");let c=a.user.id,[f,g]=await Promise.all([(0,e.getFollowRequests)(c),h(c)]),i=[...f.map(a=>({id:a.follower_id,type:"FOLLOW_REQUEST",actor:{id:a.follower_id,username:a.profiles.username,display_name:a.profiles.display_name,profile_pic_url:a.profiles.profile_pic_url||void 0},is_read:!1,timestamp:a.created_at,payload:null})),...g.map(a=>({id:a.id,type:a.type.toUpperCase(),actor:{id:a.actor_id,username:a.actor.username,display_name:a.actor.display_name,profile_pic_url:a.actor.profile_pic_url||void 0},is_read:a.is_read,timestamp:a.created_at,payload:a.post?{post_id:a.post.id,slug:a.post.slug,title:a.post.title,post_thumbnail:a.post.banner_url}:null}))].sort((a,b)=>new Date(b.timestamp).getTime()-new Date(a.timestamp).getTime()),n=i.filter(a=>!a.is_read).length;return(0,b.jsxs)("div",{className:`w-full animate-in fade-in slide-in-from-bottom-4 duration-500 pb-20 relative z-10 max-w-2xl mx-auto pt-8 px-4 md:px-6 ${l.geistSans.className}`,children:[(0,b.jsxs)("div",{className:"flex flex-col gap-6 mb-10",children:[(0,b.jsxs)(m.default,{href:"/profile",className:"self-start flex items-center gap-1.5 px-3 py-1.5 -ml-3 rounded-full text-xs font-bold uppercase tracking-widest text-zinc-500 hover:text-zinc-900 dark:hover:text-zinc-100 hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-all",children:[(0,b.jsx)(o,{className:"w-3.5 h-3.5",strokeWidth:2.5}),"Back"]}),(0,b.jsxs)("div",{className:"flex items-end justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-light text-zinc-900 dark:text-zinc-100 tracking-tight",children:"Notifications"}),(0,b.jsxs)("p",{className:"text-sm text-zinc-500 mt-1",children:["You have ",(0,b.jsx)("span",{className:"font-bold text-zinc-900 dark:text-zinc-100",children:n})," unread updates."]})]}),n>0&&(0,b.jsx)("form",{action:r.bind(null,(0,d.encryptActionBoundArgs)("4069a531b5e4b67419f67ed5235a91cab3c55043b3",c)),children:(0,b.jsxs)("button",{className:"flex items-center gap-2 px-4 py-2 bg-zinc-900 dark:bg-zinc-100 text-white dark:text-zinc-900 rounded-full text-xs font-bold uppercase tracking-wide hover:opacity-90 transition-opacity",children:[(0,b.jsx)(q,{className:"w-4 h-4"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Mark Read"})]})})]})]}),(0,b.jsx)("div",{className:"space-y-4",children:0===i.length?(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center py-20 border-2 border-dashed border-zinc-200 dark:border-zinc-800 rounded-2xl bg-zinc-50/50 dark:bg-zinc-900/20",children:[(0,b.jsx)("div",{className:"w-12 h-12 flex items-center justify-center mb-3 text-zinc-300 dark:text-zinc-700 bg-white dark:bg-zinc-800 rounded-full shadow-sm",children:(0,b.jsx)(p,{className:"w-6 h-6"})}),(0,b.jsx)("p",{className:"text-sm font-medium text-zinc-900 dark:text-zinc-100",children:"All caught up!"}),(0,b.jsx)("p",{className:"text-xs text-zinc-500",children:"Check back later for new activity."})]}):(0,b.jsx)("div",{className:"flex flex-col gap-1",children:i.map(a=>(0,b.jsx)(j.default,{...a},a.id))})})]})}(0,c.registerServerReference)(r,"4069a531b5e4b67419f67ed5235a91cab3c55043b3",null),a.s(["$$RSC_SERVER_ACTION_0",0,r,"default",()=>s],11365)}];

//# sourceMappingURL=_9d5b172f._.js.map