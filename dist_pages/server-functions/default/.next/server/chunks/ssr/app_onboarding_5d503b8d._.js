module.exports=[29359,a=>{"use strict";a.s(["OnboardingForm",()=>b]);let b=(0,a.i(96299).registerClientReference)(function(){throw Error("Attempted to call OnboardingForm() from the server but OnboardingForm is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/app/onboarding/onboarding-form.tsx <module evaluation>","OnboardingForm")},35785,a=>{"use strict";a.s(["OnboardingForm",()=>b]);let b=(0,a.i(96299).registerClientReference)(function(){throw Error("Attempted to call OnboardingForm() from the server but OnboardingForm is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/app/onboarding/onboarding-form.tsx","OnboardingForm")},74807,a=>{"use strict";a.i(29359);var b=a.i(35785);a.n(b)},85686,a=>{"use strict";var b=a.i(20239),c=a.i(76181),d=a.i(74807);a.i(16162);var e=a.i(25161),f=a.i(69168),g=a.i(47299),h=a.i(43698),i=a.i(52420);a.i(27028),a.i(81111),a.i(51615),a.i(12057),a.i(17045),a.i(57764),a.i(61095),a.i(2157),a.i(50227);let j=!!globalThis.process?.env?.FORCE_NODE_FETCH,k=!j&&globalThis.fetch||i.fetch,l=(!j&&globalThis.Blob||i.Blob,!j&&globalThis.File||i.File,!j&&globalThis.FormData||i.FormData,!j&&globalThis.Headers||i.Headers),m=(!j&&globalThis.Request||i.Request,!j&&globalThis.Response||i.Response,!j&&globalThis.AbortController||i.AbortController),n=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,o=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,p=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function q(a,b){var c;return"__proto__"===a||"constructor"===a&&b&&"object"==typeof b&&"prototype"in b?void(c=a,console.warn(`[destr] Dropping "${c}" key to prevent prototype pollution.`)):b}function r(a,b={}){if("string"!=typeof a)return a;if('"'===a[0]&&'"'===a[a.length-1]&&-1===a.indexOf("\\"))return a.slice(1,-1);let c=a.trim();if(c.length<=9)switch(c.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return NaN;case"infinity":return 1/0;case"-infinity":return-1/0}if(!p.test(a)){if(b.strict)throw SyntaxError("[destr] Invalid JSON");return a}try{if(n.test(a)||o.test(a)){if(b.strict)throw Error("[destr] Possible prototype pollution");return JSON.parse(a,q)}return JSON.parse(a)}catch(c){if(b.strict)throw c;return a}}let s=/#/g,t=/&/g,u=/\//g,v=/=/g,w=/\+/g,x=/%5e/gi,y=/%60/gi,z=/%7c/gi,A=/%20/gi;function B(a){return encodeURI(""+("string"==typeof a?a:JSON.stringify(a))).replace(z,"|").replace(w,"%2B").replace(A,"+").replace(s,"%23").replace(t,"%26").replace(y,"`").replace(x,"^").replace(u,"%2F")}function C(a){return B(a).replace(v,"%3D")}function D(a=""){try{return decodeURIComponent(""+a)}catch{return""+a}}let E=/^[\s\w\0+.-]{2,}:([/\\]{1,2})/,F=/^[\s\w\0+.-]{2,}:([/\\]{2})?/,G=/^([/\\]\s*){2,}[^/\\]/,H=/\/$|\/\?|\/#/,I=/^\.?\//;function J(a,b={}){return("boolean"==typeof b&&(b={acceptRelative:b}),b.strict)?E.test(a):F.test(a)||!!b.acceptRelative&&G.test(a)}let K=Symbol.for("ufo:protocolRelative");function L(a=""){let[b="",c="",d=""]=(a.match(/([^#?]*)(\?[^#]*)?(#.*)?/)||[]).splice(1);return{pathname:b,search:c,hash:d}}class M extends Error{constructor(a,b){super(a,b),this.name="FetchError",b?.cause&&!this.cause&&(this.cause=b.cause)}}let N=new Set(Object.freeze(["PATCH","POST","PUT","DELETE"]));function O(a="GET"){return N.has(a.toUpperCase())}let P=new Set(["image/svg","application/xml","application/xhtml","application/html"]),Q=/^application\/(?:[\w!#$%&*.^`~-]*\+)?json(;.+)?$/i;async function R(a,b){if(b)if(Array.isArray(b))for(let c of b)await c(a);else await b(a)}let S=new Set([408,409,425,429,500,502,503,504]),T=new Set([101,204,205,304]),U=function a(b={}){let{fetch:c=globalThis.fetch,Headers:d=globalThis.Headers,AbortController:e=globalThis.AbortController}=b;async function f(a){let b=a.error&&"AbortError"===a.error.name&&!a.options.timeout||!1;if(!1!==a.options.retry&&!b){let b;b="number"==typeof a.options.retry?a.options.retry:+!O(a.options.method);let c=a.response&&a.response.status||500;if(b>0&&(Array.isArray(a.options.retryStatusCodes)?a.options.retryStatusCodes.includes(c):S.has(c))){let c="function"==typeof a.options.retryDelay?a.options.retryDelay(a):a.options.retryDelay||0;return c>0&&await new Promise(a=>setTimeout(a,c)),g(a.request,{...a.options,retry:b-1})}}let c=function(a){let b=a.error?.message||a.error?.toString()||"",c=a.request?.method||a.options?.method||"GET",d=a.request?.url||String(a.request)||"/",e=`[${c}] ${JSON.stringify(d)}`,f=a.response?`${a.response.status} ${a.response.statusText}`:"<no response>",g=new M(`${e}: ${f}${b?` ${b}`:""}`,a.error?{cause:a.error}:void 0);for(let b of["request","options","response"])Object.defineProperty(g,b,{get:()=>a[b]});for(let[b,c]of[["data","_data"],["status","status"],["statusCode","status"],["statusText","statusText"],["statusMessage","statusText"]])Object.defineProperty(g,b,{get:()=>a.response&&a.response[c]});return g}(a);throw Error.captureStackTrace&&Error.captureStackTrace(c,g),c}let g=async function(a,g={}){var h,i,j,k;let l,m,n,o={request:a,options:(h=b.defaults,n=function(a,b,c){if(!b)return new c(a);let d=new c(b);if(a)for(let[b,e]of Symbol.iterator in a||Array.isArray(a)?a:new c(a))d.set(b,e);return d}(g?.headers??a?.headers,h?.headers,d),(h?.query||h?.params||g?.params||g?.query)&&(m={...h?.params,...h?.query,...g?.params,...g?.query}),{...h,...g,query:m,params:m,headers:n}),response:void 0,error:void 0};if(o.options.method&&(o.options.method=o.options.method.toUpperCase()),o.options.onRequest&&(await R(o,o.options.onRequest),o.options.headers instanceof d||(o.options.headers=new d(o.options.headers||{}))),"string"==typeof o.request){if(o.options.baseURL&&(o.request=function(a,b){var c;if(!(c=b)||"/"===c||J(a))return a;let d=function(a="",b){return(!function(a="",b){return a.endsWith("/")}(a)?a:a.slice(0,-1))||"/"}(b);if(a.startsWith(d)){let b=a[d.length];if(!b||"/"===b||"?"===b)return a}return function(a,...b){let c=a||"";for(let a of b.filter(a=>a&&"/"!==a))if(c){let b=a.replace(I,"");c=function(a="",b){return a.endsWith("/")?a:a+"/"}(c)+b}else c=a;return c}(d,a)}(o.request,o.options.baseURL)),o.options.query){let a,b,c,d,e,f,g;i=o.request,j=o.options.query,b={...function(a=""){let b=Object.create(null);for(let c of("?"===a[0]&&(a=a.slice(1)),a.split("&"))){let a=c.match(/([^=]+)=?(.*)/)||[];if(a.length<2)continue;let d=D(a[1].replace(w," "));if("__proto__"===d||"constructor"===d)continue;let e=D((a[2]||"").replace(w," "));void 0===b[d]?b[d]=e:Array.isArray(b[d])?b[d].push(e):b[d]=[b[d],e]}return b}((a=function a(b="",c){let d=b.match(/^[\s\0]*(blob:|data:|javascript:|vbscript:)(.*)/i);if(d){let[,a,b=""]=d;return{protocol:a.toLowerCase(),pathname:b,href:a+b,auth:"",host:"",search:"",hash:""}}if(!J(b,{acceptRelative:!0}))return c?a(c+b):L(b);let[,e="",f,g=""]=b.replace(/\\/g,"/").match(/^[\s\0]*([\w+.-]{2,}:)?\/\/([^/@]+@)?(.*)/)||[],[,h="",i=""]=g.match(/([^#/?]*)(.*)?/)||[];"file:"===e&&(i=i.replace(/\/(?=[A-Za-z]:)/,""));let{pathname:j,search:k,hash:l}=L(i);return{protocol:e.toLowerCase(),auth:f?f.slice(0,Math.max(0,f.length-1)):"",host:h,pathname:j,search:k,hash:l,[K]:!e}}(i)).search),...j},a.search=Object.keys(b).filter(a=>void 0!==b[a]).map(a=>{var c;return(("number"==typeof(c=b[a])||"boolean"==typeof c)&&(c=String(c)),c)?Array.isArray(c)?c.map(b=>`${C(a)}=${B(b)}`).join("&"):`${C(a)}=${B(c)}`:C(a)}).filter(Boolean).join("&"),c=(k=a).pathname||"",d=k.search?(k.search.startsWith("?")?"":"?")+k.search:"",e=k.hash||"",f=k.auth?k.auth+"@":"",g=k.host||"",o.request=(k.protocol||k[K]?(k.protocol||"")+"//":"")+f+g+c+d+e,delete o.options.query}"query"in o.options&&delete o.options.query,"params"in o.options&&delete o.options.params}if(o.options.body&&O(o.options.method))if(function(a){if(void 0===a)return!1;let b=typeof a;return"string"===b||"number"===b||"boolean"===b||null===b||"object"===b&&(!!Array.isArray(a)||!(a.buffer||a instanceof FormData||a instanceof URLSearchParams)&&(a.constructor&&"Object"===a.constructor.name||"function"==typeof a.toJSON))}(o.options.body)){let a=o.options.headers.get("content-type");"string"!=typeof o.options.body&&(o.options.body="application/x-www-form-urlencoded"===a?new URLSearchParams(o.options.body).toString():JSON.stringify(o.options.body)),a||o.options.headers.set("content-type","application/json"),o.options.headers.has("accept")||o.options.headers.set("accept","application/json")}else("pipeTo"in o.options.body&&"function"==typeof o.options.body.pipeTo||"function"==typeof o.options.body.pipe)&&!("duplex"in o.options)&&(o.options.duplex="half");if(!o.options.signal&&o.options.timeout){let a=new e;l=setTimeout(()=>{let b=Error("[TimeoutError]: The operation was aborted due to timeout");b.name="TimeoutError",b.code=23,a.abort(b)},o.options.timeout),o.options.signal=a.signal}try{o.response=await c(o.request,o.options)}catch(a){return o.error=a,o.options.onRequestError&&await R(o,o.options.onRequestError),await f(o)}finally{l&&clearTimeout(l)}if((o.response.body||o.response._bodyInit)&&!T.has(o.response.status)&&"HEAD"!==o.options.method){let a=(o.options.parseResponse?"json":o.options.responseType)||function(a=""){if(!a)return"json";let b=a.split(";").shift()||"";return Q.test(b)?"json":"text/event-stream"===b?"stream":P.has(b)||b.startsWith("text/")?"text":"blob"}(o.response.headers.get("content-type")||"");switch(a){case"json":{let a=await o.response.text(),b=o.options.parseResponse||r;o.response._data=b(a);break}case"stream":o.response._data=o.response.body||o.response._bodyInit;break;default:o.response._data=await o.response[a]()}}return(o.options.onResponse&&await R(o,o.options.onResponse),!o.options.ignoreResponseError&&o.response.status>=400&&o.response.status<600)?(o.options.onResponseError&&await R(o,o.options.onResponseError),await f(o)):o.response},h=async function(a,b){return(await g(a,b))._data};return h.raw=g,h.native=(...a)=>c(...a),h.create=(c={},d={})=>a({...b,...d,defaults:{...b.defaults,...d.defaults,...c}}),h}({fetch:globalThis.fetch?(...a)=>globalThis.fetch(...a):function(){if(!JSON.parse(process.env.FETCH_KEEP_ALIVE||"false"))return k;let a={keepAlive:!0},b=new g.default.Agent(a),c=new h.default.Agent(a),d={agent:a=>"http:"===a.protocol?b:c};return function(a,b){return k(a,{...d,...b})}}(),Headers:globalThis.Headers||l,AbortController:globalThis.AbortController||m});async function V(){(0,f.unstable_noStore)();let a=process.env.TMDB_API_KEY;if(!a)return console.error("TMDB API Key is not configured on the server."),null;try{let b=await U(`https://api.themoviedb.org/3/movie/popular?api_key=${a}&language=en-US&page=1`);if(!b.results||0===b.results.length)return console.error("No popular movies found from TMDB API."),null;let c=b.results[Math.floor(Math.random()*b.results.length)];if(!c.backdrop_path)return console.warn("Selected random movie does not have a backdrop path."),null;return{backdrop_url:`https://image.tmdb.org/t/p/original${c.backdrop_path}`,title:c.title}}catch(a){return console.error("Error fetching random movie from TMDB:",a),null}}async function W(){let a=await (0,c.getUserProfile)();a?.user||(0,e.redirect)("/auth/login");let f=await V();return(0,b.jsx)(d.OnboardingForm,{profile:a.profile,randomMovie:f||{backdrop_url:"",title:"Cinematic"},email:a.user.email})}a.s(["default",()=>W],85686)}];

//# sourceMappingURL=app_onboarding_5d503b8d._.js.map