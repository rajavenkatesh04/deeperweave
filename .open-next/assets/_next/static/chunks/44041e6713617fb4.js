(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,88978,e=>{"use strict";var t=e.i(62311);let a=t.forwardRef(function({title:e,titleId:a,...l},r){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":a},l),e?t.createElement("title",{id:a},e):null,t.createElement("path",{fillRule:"evenodd",d:"M10.788 3.21c.448-1.077 1.976-1.077 2.424 0l2.082 5.006 5.404.434c1.164.093 1.636 1.545.749 2.305l-4.117 3.527 1.257 5.273c.271 1.136-.964 2.033-1.96 1.425L12 18.354 7.373 21.18c-.996.608-2.231-.29-1.96-1.425l1.257-5.273-4.117-3.527c-.887-.76-.415-2.212.749-2.305l5.404-.434 2.082-5.005Z",clipRule:"evenodd"}))});e.s(["StarIcon",0,a],88978)},47921,78982,3566,e=>{"use strict";var t=e.i(86788);let a=(0,t.createServerReference)("40caf8e6eb284073880d186f232af97efac0fe1041",t.callServer,void 0,t.findSourceMapURL,"uploadBanner");e.s(["uploadBanner",()=>a],47921);var l=e.i(87155),r=e.i(7284),s=e.i(30104);function n({breadcrumbs:e}){return(0,l.jsx)("nav",{"aria-label":"Breadcrumb",className:"mb-6 block",children:(0,l.jsx)("ol",{className:"flex items-center flex-wrap",children:e.map((t,a)=>(0,l.jsxs)("li",{"aria-current":t.active?"page":void 0,className:"flex items-center",children:[(0,l.jsx)(s.default,{href:t.href,className:(0,r.clsx)("font-mono text-[10px] md:text-xs uppercase tracking-[0.15em] transition-all duration-200",t.active?"text-zinc-900 dark:text-zinc-100 font-bold border-b-2 border-zinc-900 dark:border-zinc-100":"text-zinc-400 hover:text-zinc-900 dark:text-zinc-600 dark:hover:text-zinc-300 no-underline"),children:t.label}),a<e.length-1?(0,l.jsx)("span",{className:"mx-3 text-zinc-300 dark:text-zinc-800 font-mono text-[10px] select-none",children:"/"}):null]},t.href))})})}e.s(["default",()=>n],78982);var i=e.i(62311);let d=i.forwardRef(function({title:e,titleId:t,...a},l){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},a),e?i.createElement("title",{id:t},e):null,i.createElement("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25Zm-1.72 6.97a.75.75 0 1 0-1.06 1.06L10.94 12l-1.72 1.72a.75.75 0 1 0 1.06 1.06L12 13.06l1.72 1.72a.75.75 0 1 0 1.06-1.06L13.06 12l1.72-1.72a.75.75 0 1 0-1.06-1.06L12 10.94l-1.72-1.72Z",clipRule:"evenodd"}))});e.s(["XCircleIcon",0,d],3566)},54091,e=>{"use strict";var t=e.i(87155),a=e.i(62311),l=e.i(86788);let r=(0,l.createServerReference)("609ee5f20023be9a1cc338f7e049fb83021701fcc7",l.callServer,void 0,l.findSourceMapURL,"updatePost");var s=e.i(47921),n=e.i(78982),i=e.i(3566);let d=a.forwardRef(function({title:e,titleId:t,...l},r){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},l),e?a.createElement("title",{id:t},e):null,a.createElement("path",{fillRule:"evenodd",d:"M10.5 3.75a6 6 0 0 0-5.98 6.496A5.25 5.25 0 0 0 6.75 20.25H18a4.5 4.5 0 0 0 2.206-8.423 3.75 3.75 0 0 0-4.133-4.303A6.001 6.001 0 0 0 10.5 3.75Zm2.03 5.47a.75.75 0 0 0-1.06 0l-3 3a.75.75 0 1 0 1.06 1.06l1.72-1.72v4.94a.75.75 0 0 0 1.5 0v-4.94l1.72 1.72a.75.75 0 1 0 1.06-1.06l-3-3Z",clipRule:"evenodd"}))});var c=e.i(88978),o=e.i(51913),u=e.i(51588),m=e.i(9727),x=e.i(7284),b=e.i(67709);function h({label:e,isEnabled:a,setIsEnabled:l,name:r}){return(0,t.jsxs)("label",{htmlFor:r,className:"flex items-center justify-between cursor-pointer",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-gray-900 dark:text-zinc-200",children:e}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{id:r,name:r,type:"checkbox",className:"sr-only",checked:a,onChange:()=>l(!a)}),(0,t.jsx)("div",{className:(0,x.clsx)("block h-6 w-10 rounded-full transition-colors",a?"bg-indigo-600":"bg-gray-300 dark:bg-zinc-700")}),(0,t.jsx)("div",{className:(0,x.clsx)("dot absolute left-1 top-1 h-4 w-4 rounded-full bg-white transition-transform",a&&"translate-x-full")})]})]})}function f({rating:e,setRating:a}){return(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[[1,2,3,4,5].map(l=>(0,t.jsx)("button",{type:"button",onClick:()=>a(l===e?0:l),children:(0,t.jsx)(c.StarIcon,{className:(0,x.clsx)("h-6 w-6",l<=e?"text-yellow-500":"text-gray-300")})},l)),(0,t.jsx)("input",{type:"hidden",name:"rating",value:e})]})}function p(){let{pending:e}=(0,b.useFormStatus)();return(0,t.jsx)("button",{type:"submit",disabled:e,className:"flex h-10 items-center justify-center rounded-lg bg-indigo-600 px-6 text-sm font-medium text-white hover:bg-indigo-700 disabled:opacity-50",children:e?"Updating...":"Update Post"})}function g({post:e}){let[l,c]=(0,a.useActionState)(r,{message:null,errors:{}}),[x,b]=(0,a.useState)(e.content_html||""),[g,v]=(0,a.useState)(e.rating||0),[j,w]=(0,a.useState)(e.is_premium||!1),[N,y]=(0,a.useState)(e.is_nsfw||!1),[k,S]=(0,a.useState)(e.has_spoilers||!1),[z,R]=(0,a.useState)(e.banner_url),E=e.movie?{...e.movie,id:e.movie.tmdb_id}:e.series?{...e.series,id:e.series.tmdb_id}:null,[_]=(0,a.useState)(E),[B,C]=(0,a.useState)(!1),I=(0,a.useRef)(null),L=async e=>{let t=e.target.files?.[0];if(!t)return;C(!0);let a=new FormData;a.append("banner",t);let l=await (0,s.uploadBanner)(a);l.success&&l.url&&R(l.url),C(!1)};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.default,{breadcrumbs:[{label:"Blog",href:"/blog"},{label:e.title,href:`/blog/${e.slug}`},{label:"Edit",href:"#",active:!0}]}),(0,t.jsxs)("form",{action:c,className:"mt-6 space-y-8",children:[(0,t.jsx)("input",{type:"hidden",name:"postId",value:e.id}),(0,t.jsxs)("div",{className:"rounded-lg border bg-white p-6 dark:bg-zinc-900 dark:border-zinc-800",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Banner Image"}),z?(0,t.jsxs)("div",{className:"relative aspect-video w-full max-w-md",children:[(0,t.jsx)(u.default,{src:z,alt:"Banner",fill:!0,className:"rounded-md object-cover"}),(0,t.jsx)("button",{type:"button",onClick:()=>R(null),className:"absolute top-2 right-2 p-1 bg-black/60 text-white rounded-full",children:(0,t.jsx)(i.XCircleIcon,{className:"h-5 w-5"})})]}):(0,t.jsxs)("label",{className:"flex flex-col items-center justify-center w-full h-32 border-2 border-dashed rounded-lg cursor-pointer hover:bg-gray-50 dark:hover:bg-zinc-800",children:[B?(0,t.jsx)(o.default,{}):(0,t.jsx)(d,{className:"w-8 h-8 text-gray-400"}),(0,t.jsx)("input",{ref:I,type:"file",onChange:L,className:"hidden",accept:"image/*"})]}),(0,t.jsx)("input",{type:"hidden",name:"banner_url",value:z||""})]}),(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"p-4 bg-white rounded-lg border dark:bg-zinc-900 dark:border-zinc-800",children:[(0,t.jsx)("h3",{className:"font-semibold mb-3",children:"Post Settings"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(h,{label:"Premium",isEnabled:j,setIsEnabled:w,name:"is_premium"}),(0,t.jsx)(h,{label:"NSFW",isEnabled:N,setIsEnabled:y,name:"is_nsfw"}),(0,t.jsx)(h,{label:"Spoilers",isEnabled:k,setIsEnabled:S,name:"has_spoilers"})]})]}),(0,t.jsxs)("div",{className:"p-4 bg-white rounded-lg border dark:bg-zinc-900 dark:border-zinc-800",children:[(0,t.jsx)("h3",{className:"font-semibold mb-3",children:"Rating"}),(0,t.jsx)(f,{rating:g,setRating:v})]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("input",{name:"title",defaultValue:e.title,className:"w-full text-2xl font-bold bg-transparent border-0 border-b border-gray-200 focus:ring-0 px-0 dark:border-zinc-700",placeholder:"Post Title"}),(0,t.jsxs)("div",{className:"min-h-[400px] border rounded-lg dark:border-zinc-700",children:[(0,t.jsx)(m.SimpleEditor,{value:x,onChange:b}),(0,t.jsx)("input",{type:"hidden",name:"content_html",value:x})]}),l.errors?.content_html&&(0,t.jsx)("p",{className:"text-red-500",children:l.errors.content_html[0]})]}),_&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("input",{type:"hidden",name:"cinematicApiId",value:_.id}),(0,t.jsx)("input",{type:"hidden",name:"media_type",value:e.movie_id?"movie":"tv"})]}),(0,t.jsx)("div",{className:"flex justify-end gap-4",children:(0,t.jsx)(p,{})}),l.message&&(0,t.jsx)("p",{className:"text-red-500 text-right",children:l.message})]})]})}e.s(["default",()=>g],54091)}]);