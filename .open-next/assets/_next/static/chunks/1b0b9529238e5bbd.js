(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,53941,e=>{"use strict";var t=e.i(62311),r=e.i(12313);function i({postSlug:e}){return(0,t.useEffect)(()=>{(0,r.createClient)().rpc("increment_view_count",{post_slug:e}).then(({error:e})=>{e&&console.error("Error incrementing view count:",e)})},[e]),null}e.s(["default",()=>i])},93701,(e,t,r)=>{"use strict";let{entries:i,setPrototypeOf:n,isFrozen:a,getPrototypeOf:o,getOwnPropertyDescriptor:s}=Object,{freeze:l,seal:c,create:d}=Object,{apply:u,construct:m}="u">typeof Reflect&&Reflect;l||(l=function(e){return e}),c||(c=function(e){return e}),u||(u=function(e,t){for(var r=arguments.length,i=Array(r>2?r-2:0),n=2;n<r;n++)i[n-2]=arguments[n];return e.apply(t,i)}),m||(m=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return new e(...r)});let f=z(Array.prototype.forEach),p=z(Array.prototype.lastIndexOf),h=z(Array.prototype.pop),g=z(Array.prototype.push),x=z(Array.prototype.splice),b=z(String.prototype.toLowerCase),y=z(String.prototype.toString),v=z(String.prototype.match),w=z(String.prototype.replace),k=z(String.prototype.indexOf),N=z(String.prototype.trim),T=z(Object.prototype.hasOwnProperty),_=z(RegExp.prototype.test),E=(Q=TypeError,function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return m(Q,t)});function z(e){return function(t){t instanceof RegExp&&(t.lastIndex=0);for(var r=arguments.length,i=Array(r>1?r-1:0),n=1;n<r;n++)i[n-1]=arguments[n];return u(e,t,i)}}function S(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:b;n&&n(e,null);let i=t.length;for(;i--;){let n=t[i];if("string"==typeof n){let e=r(n);e!==n&&(a(t)||(t[i]=e),n=e)}e[n]=!0}return e}function j(e){let t=d(null);for(let[r,n]of i(e))T(e,r)&&(Array.isArray(n)?t[r]=function(e){for(let t=0;t<e.length;t++)T(e,t)||(e[t]=null);return e}(n):n&&"object"==typeof n&&n.constructor===Object?t[r]=j(n):t[r]=n);return t}function A(e,t){for(;null!==e;){let r=s(e,t);if(r){if(r.get)return z(r.get);if("function"==typeof r.value)return z(r.value)}e=o(e)}return function(){return null}}let L=l(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),C=l(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),M=l(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),O=l(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),R=l(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),D=l(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),I=l(["#text"]),P=l(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),U=l(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),H=l(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),F=l(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),W=c(/\{\{[\w\W]*|[\w\W]*\}\}/gm),B=c(/<%[\w\W]*|[\w\W]*%>/gm),G=c(/\$\{[\w\W]*/gm),Y=c(/^data-[\-\w.\u00B7-\uFFFF]+$/),$=c(/^aria-[\-\w]+$/),q=c(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),K=c(/^(?:\w+script|data):/i),V=c(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),X=c(/^html$/i);var Q,J=Object.freeze({__proto__:null,ARIA_ATTR:$,ATTR_WHITESPACE:V,CUSTOM_ELEMENT:c(/^[a-z][.\w]*(-[.\w]+)+$/i),DATA_ATTR:Y,DOCTYPE_NAME:X,ERB_EXPR:B,IS_ALLOWED_URI:q,IS_SCRIPT_OR_DATA:K,MUSTACHE_EXPR:W,TMPLIT_EXPR:G});let Z=function(e,t){if("object"!=typeof e||"function"!=typeof e.createPolicy)return null;let r=null,i="data-tt-policy-suffix";t&&t.hasAttribute(i)&&(r=t.getAttribute(i));let n="dompurify"+(r?"#"+r:"");try{return e.createPolicy(n,{createHTML:e=>e,createScriptURL:e=>e})}catch(e){return console.warn("TrustedTypes policy "+n+" could not be created."),null}},ee=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};t.exports=function e(){let t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"u"<typeof window?null:window,n=t=>e(t);if(n.version="3.3.1",n.removed=[],!r||!r.document||9!==r.document.nodeType||!r.Element)return n.isSupported=!1,n;let{document:a}=r,o=a,s=o.currentScript,{DocumentFragment:c,HTMLTemplateElement:u,Node:m,Element:z,NodeFilter:W,NamedNodeMap:B=r.NamedNodeMap||r.MozNamedAttrMap,HTMLFormElement:G,DOMParser:Y,trustedTypes:$}=r,K=z.prototype,V=A(K,"cloneNode"),Q=A(K,"remove"),et=A(K,"nextSibling"),er=A(K,"childNodes"),ei=A(K,"parentNode");if("function"==typeof u){let e=a.createElement("template");e.content&&e.content.ownerDocument&&(a=e.content.ownerDocument)}let en="",{implementation:ea,createNodeIterator:eo,createDocumentFragment:es,getElementsByTagName:el}=a,{importNode:ec}=o,ed=ee();n.isSupported="function"==typeof i&&"function"==typeof ei&&ea&&void 0!==ea.createHTMLDocument;let{MUSTACHE_EXPR:eu,ERB_EXPR:em,TMPLIT_EXPR:ef,DATA_ATTR:ep,ARIA_ATTR:eh,IS_SCRIPT_OR_DATA:eg,ATTR_WHITESPACE:ex,CUSTOM_ELEMENT:eb}=J,{IS_ALLOWED_URI:ey}=J,ev=null,ew=S({},[...L,...C,...M,...R,...I]),ek=null,eN=S({},[...P,...U,...H,...F]),eT=Object.seal(d(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),e_=null,eE=null,ez=Object.seal(d(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}})),eS=!0,ej=!0,eA=!1,eL=!0,eC=!1,eM=!0,eO=!1,eR=!1,eD=!1,eI=!1,eP=!1,eU=!1,eH=!0,eF=!1,eW=!0,eB=!1,eG={},eY=null,e$=S({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),eq=null,eK=S({},["audio","video","img","source","image","track"]),eV=null,eX=S({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),eQ="http://www.w3.org/1998/Math/MathML",eJ="http://www.w3.org/2000/svg",eZ="http://www.w3.org/1999/xhtml",e0=eZ,e1=!1,e2=null,e4=S({},[eQ,eJ,eZ],y),e6=S({},["mi","mo","mn","ms","mtext"]),e5=S({},["annotation-xml"]),e8=S({},["title","style","font","a","script"]),e3=null,e9=["application/xhtml+xml","text/html"],e7=null,te=null,tt=a.createElement("form"),tr=function(e){return e instanceof RegExp||e instanceof Function},ti=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!te||te!==e){if(e&&"object"==typeof e||(e={}),e=j(e),e7="application/xhtml+xml"===(e3=-1===e9.indexOf(e.PARSER_MEDIA_TYPE)?"text/html":e.PARSER_MEDIA_TYPE)?y:b,ev=T(e,"ALLOWED_TAGS")?S({},e.ALLOWED_TAGS,e7):ew,ek=T(e,"ALLOWED_ATTR")?S({},e.ALLOWED_ATTR,e7):eN,e2=T(e,"ALLOWED_NAMESPACES")?S({},e.ALLOWED_NAMESPACES,y):e4,eV=T(e,"ADD_URI_SAFE_ATTR")?S(j(eX),e.ADD_URI_SAFE_ATTR,e7):eX,eq=T(e,"ADD_DATA_URI_TAGS")?S(j(eK),e.ADD_DATA_URI_TAGS,e7):eK,eY=T(e,"FORBID_CONTENTS")?S({},e.FORBID_CONTENTS,e7):e$,e_=T(e,"FORBID_TAGS")?S({},e.FORBID_TAGS,e7):j({}),eE=T(e,"FORBID_ATTR")?S({},e.FORBID_ATTR,e7):j({}),eG=!!T(e,"USE_PROFILES")&&e.USE_PROFILES,eS=!1!==e.ALLOW_ARIA_ATTR,ej=!1!==e.ALLOW_DATA_ATTR,eA=e.ALLOW_UNKNOWN_PROTOCOLS||!1,eL=!1!==e.ALLOW_SELF_CLOSE_IN_ATTR,eC=e.SAFE_FOR_TEMPLATES||!1,eM=!1!==e.SAFE_FOR_XML,eO=e.WHOLE_DOCUMENT||!1,eI=e.RETURN_DOM||!1,eP=e.RETURN_DOM_FRAGMENT||!1,eU=e.RETURN_TRUSTED_TYPE||!1,eD=e.FORCE_BODY||!1,eH=!1!==e.SANITIZE_DOM,eF=e.SANITIZE_NAMED_PROPS||!1,eW=!1!==e.KEEP_CONTENT,eB=e.IN_PLACE||!1,ey=e.ALLOWED_URI_REGEXP||q,e0=e.NAMESPACE||eZ,e6=e.MATHML_TEXT_INTEGRATION_POINTS||e6,e5=e.HTML_INTEGRATION_POINTS||e5,eT=e.CUSTOM_ELEMENT_HANDLING||{},e.CUSTOM_ELEMENT_HANDLING&&tr(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(eT.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&tr(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(eT.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(eT.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),eC&&(ej=!1),eP&&(eI=!0),eG&&(ev=S({},I),ek=[],!0===eG.html&&(S(ev,L),S(ek,P)),!0===eG.svg&&(S(ev,C),S(ek,U),S(ek,F)),!0===eG.svgFilters&&(S(ev,M),S(ek,U),S(ek,F)),!0===eG.mathMl&&(S(ev,R),S(ek,H),S(ek,F))),e.ADD_TAGS&&("function"==typeof e.ADD_TAGS?ez.tagCheck=e.ADD_TAGS:(ev===ew&&(ev=j(ev)),S(ev,e.ADD_TAGS,e7))),e.ADD_ATTR&&("function"==typeof e.ADD_ATTR?ez.attributeCheck=e.ADD_ATTR:(ek===eN&&(ek=j(ek)),S(ek,e.ADD_ATTR,e7))),e.ADD_URI_SAFE_ATTR&&S(eV,e.ADD_URI_SAFE_ATTR,e7),e.FORBID_CONTENTS&&(eY===e$&&(eY=j(eY)),S(eY,e.FORBID_CONTENTS,e7)),e.ADD_FORBID_CONTENTS&&(eY===e$&&(eY=j(eY)),S(eY,e.ADD_FORBID_CONTENTS,e7)),eW&&(ev["#text"]=!0),eO&&S(ev,["html","head","body"]),ev.table&&(S(ev,["tbody"]),delete e_.tbody),e.TRUSTED_TYPES_POLICY){if("function"!=typeof e.TRUSTED_TYPES_POLICY.createHTML)throw E('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof e.TRUSTED_TYPES_POLICY.createScriptURL)throw E('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');en=(t=e.TRUSTED_TYPES_POLICY).createHTML("")}else void 0===t&&(t=Z($,s)),null!==t&&"string"==typeof en&&(en=t.createHTML(""));l&&l(e),te=e}},tn=S({},[...C,...M,...O]),ta=S({},[...R,...D]),to=function(e){let t=ei(e);t&&t.tagName||(t={namespaceURI:e0,tagName:"template"});let r=b(e.tagName),i=b(t.tagName);return!!e2[e.namespaceURI]&&(e.namespaceURI===eJ?t.namespaceURI===eZ?"svg"===r:t.namespaceURI===eQ?"svg"===r&&("annotation-xml"===i||e6[i]):!!tn[r]:e.namespaceURI===eQ?t.namespaceURI===eZ?"math"===r:t.namespaceURI===eJ?"math"===r&&e5[i]:!!ta[r]:e.namespaceURI===eZ?(t.namespaceURI!==eJ||!!e5[i])&&(t.namespaceURI!==eQ||!!e6[i])&&!ta[r]&&(e8[r]||!tn[r]):"application/xhtml+xml"===e3&&!!e2[e.namespaceURI])},ts=function(e){g(n.removed,{element:e});try{ei(e).removeChild(e)}catch(t){Q(e)}},tl=function(e,t){try{g(n.removed,{attribute:t.getAttributeNode(e),from:t})}catch(e){g(n.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e)if(eI||eP)try{ts(t)}catch(e){}else try{t.setAttribute(e,"")}catch(e){}},tc=function(e){let r=null,i=null;if(eD)e="<remove></remove>"+e;else{let t=v(e,/^[\r\n\t ]+/);i=t&&t[0]}"application/xhtml+xml"===e3&&e0===eZ&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");let n=t?t.createHTML(e):e;if(e0===eZ)try{r=new Y().parseFromString(n,e3)}catch(e){}if(!r||!r.documentElement){r=ea.createDocument(e0,"template",null);try{r.documentElement.innerHTML=e1?en:n}catch(e){}}let o=r.body||r.documentElement;return(e&&i&&o.insertBefore(a.createTextNode(i),o.childNodes[0]||null),e0===eZ)?el.call(r,eO?"html":"body")[0]:eO?r.documentElement:o},td=function(e){return eo.call(e.ownerDocument||e,e,W.SHOW_ELEMENT|W.SHOW_COMMENT|W.SHOW_TEXT|W.SHOW_PROCESSING_INSTRUCTION|W.SHOW_CDATA_SECTION,null)},tu=function(e){return e instanceof G&&("string"!=typeof e.nodeName||"string"!=typeof e.textContent||"function"!=typeof e.removeChild||!(e.attributes instanceof B)||"function"!=typeof e.removeAttribute||"function"!=typeof e.setAttribute||"string"!=typeof e.namespaceURI||"function"!=typeof e.insertBefore||"function"!=typeof e.hasChildNodes)},tm=function(e){return"function"==typeof m&&e instanceof m};function tf(e,t,r){f(e,e=>{e.call(n,t,r,te)})}let tp=function(e){let t=null;if(tf(ed.beforeSanitizeElements,e,null),tu(e))return ts(e),!0;let r=e7(e.nodeName);if(tf(ed.uponSanitizeElement,e,{tagName:r,allowedTags:ev}),eM&&e.hasChildNodes()&&!tm(e.firstElementChild)&&_(/<[/\w!]/g,e.innerHTML)&&_(/<[/\w!]/g,e.textContent)||7===e.nodeType||eM&&8===e.nodeType&&_(/<[/\w]/g,e.data))return ts(e),!0;if(!(ez.tagCheck instanceof Function&&ez.tagCheck(r))&&(!ev[r]||e_[r])){if(!e_[r]&&tg(r)&&(eT.tagNameCheck instanceof RegExp&&_(eT.tagNameCheck,r)||eT.tagNameCheck instanceof Function&&eT.tagNameCheck(r)))return!1;if(eW&&!eY[r]){let t=ei(e)||e.parentNode,r=er(e)||e.childNodes;if(r&&t){let i=r.length;for(let n=i-1;n>=0;--n){let i=V(r[n],!0);i.__removalCount=(e.__removalCount||0)+1,t.insertBefore(i,et(e))}}}return ts(e),!0}return e instanceof z&&!to(e)||("noscript"===r||"noembed"===r||"noframes"===r)&&_(/<\/no(script|embed|frames)/i,e.innerHTML)?(ts(e),!0):(eC&&3===e.nodeType&&(t=e.textContent,f([eu,em,ef],e=>{t=w(t,e," ")}),e.textContent!==t&&(g(n.removed,{element:e.cloneNode()}),e.textContent=t)),tf(ed.afterSanitizeElements,e,null),!1)},th=function(e,t,r){if(eH&&("id"===t||"name"===t)&&(r in a||r in tt))return!1;if(ej&&!eE[t]&&_(ep,t));else if(eS&&_(eh,t));else if(ez.attributeCheck instanceof Function&&ez.attributeCheck(t,e));else if(!ek[t]||eE[t]){if(!(tg(e)&&(eT.tagNameCheck instanceof RegExp&&_(eT.tagNameCheck,e)||eT.tagNameCheck instanceof Function&&eT.tagNameCheck(e))&&(eT.attributeNameCheck instanceof RegExp&&_(eT.attributeNameCheck,t)||eT.attributeNameCheck instanceof Function&&eT.attributeNameCheck(t,e))||"is"===t&&eT.allowCustomizedBuiltInElements&&(eT.tagNameCheck instanceof RegExp&&_(eT.tagNameCheck,r)||eT.tagNameCheck instanceof Function&&eT.tagNameCheck(r))))return!1}else if(eV[t]);else if(_(ey,w(r,ex,"")));else if(("src"===t||"xlink:href"===t||"href"===t)&&"script"!==e&&0===k(r,"data:")&&eq[e]);else if(eA&&!_(eg,w(r,ex,"")));else if(r)return!1;return!0},tg=function(e){return"annotation-xml"!==e&&v(e,eb)},tx=function(e){tf(ed.beforeSanitizeAttributes,e,null);let{attributes:r}=e;if(!r||tu(e))return;let i={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ek,forceKeepAttr:void 0},a=r.length;for(;a--;){let{name:o,namespaceURI:s,value:l}=r[a],c=e7(o),d="value"===o?l:N(l);if(i.attrName=c,i.attrValue=d,i.keepAttr=!0,i.forceKeepAttr=void 0,tf(ed.uponSanitizeAttribute,e,i),d=i.attrValue,eF&&("id"===c||"name"===c)&&(tl(o,e),d="user-content-"+d),eM&&_(/((--!?|])>)|<\/(style|title|textarea)/i,d)||"attributename"===c&&v(d,"href")){tl(o,e);continue}if(i.forceKeepAttr)continue;if(!i.keepAttr||!eL&&_(/\/>/i,d)){tl(o,e);continue}eC&&f([eu,em,ef],e=>{d=w(d,e," ")});let u=e7(e.nodeName);if(!th(u,c,d)){tl(o,e);continue}if(t&&"object"==typeof $&&"function"==typeof $.getAttributeType)if(s);else switch($.getAttributeType(u,c)){case"TrustedHTML":d=t.createHTML(d);break;case"TrustedScriptURL":d=t.createScriptURL(d)}if(d!==l)try{s?e.setAttributeNS(s,o,d):e.setAttribute(o,d),tu(e)?ts(e):h(n.removed)}catch(t){tl(o,e)}}tf(ed.afterSanitizeAttributes,e,null)},tb=function e(t){let r=null,i=td(t);for(tf(ed.beforeSanitizeShadowDOM,t,null);r=i.nextNode();)tf(ed.uponSanitizeShadowNode,r,null),tp(r),tx(r),r.content instanceof c&&e(r.content);tf(ed.afterSanitizeShadowDOM,t,null)};return n.sanitize=function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=null,a=null,s=null,l=null;if((e1=!e)&&(e="<!-->"),"string"!=typeof e&&!tm(e))if("function"==typeof e.toString){if("string"!=typeof(e=e.toString()))throw E("dirty is not a string, aborting")}else throw E("toString is not a function");if(!n.isSupported)return e;if(eR||ti(r),n.removed=[],"string"==typeof e&&(eB=!1),eB){if(e.nodeName){let t=e7(e.nodeName);if(!ev[t]||e_[t])throw E("root node is forbidden and cannot be sanitized in-place")}}else if(e instanceof m)1===(a=(i=tc("<!---->")).ownerDocument.importNode(e,!0)).nodeType&&"BODY"===a.nodeName||"HTML"===a.nodeName?i=a:i.appendChild(a);else{if(!eI&&!eC&&!eO&&-1===e.indexOf("<"))return t&&eU?t.createHTML(e):e;if(!(i=tc(e)))return eI?null:eU?en:""}i&&eD&&ts(i.firstChild);let d=td(eB?e:i);for(;s=d.nextNode();)tp(s),tx(s),s.content instanceof c&&tb(s.content);if(eB)return e;if(eI){if(eP)for(l=es.call(i.ownerDocument);i.firstChild;)l.appendChild(i.firstChild);else l=i;return(ek.shadowroot||ek.shadowrootmode)&&(l=ec.call(o,l,!0)),l}let u=eO?i.outerHTML:i.innerHTML;return eO&&ev["!doctype"]&&i.ownerDocument&&i.ownerDocument.doctype&&i.ownerDocument.doctype.name&&_(X,i.ownerDocument.doctype.name)&&(u="<!DOCTYPE "+i.ownerDocument.doctype.name+">\n"+u),eC&&f([eu,em,ef],e=>{u=w(u,e," ")}),t&&eU?t.createHTML(u):u},n.setConfig=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ti(e),eR=!0},n.clearConfig=function(){te=null,eR=!1},n.isValidAttribute=function(e,t,r){return te||ti({}),th(e7(e),e7(t),r)},n.addHook=function(e,t){"function"==typeof t&&g(ed[e],t)},n.removeHook=function(e,t){if(void 0!==t){let r=p(ed[e],t);return -1===r?void 0:x(ed[e],r,1)[0]}return h(ed[e])},n.removeHooks=function(e){ed[e]=[]},n.removeAllHooks=function(){ed=ee()},n}()},67381,(e,t,r)=>{t.exports=self.DOMPurify||(self.DOMPurify=e.r(93701).default||e.r(93701))},38345,e=>{"use strict";let t,r;var i=e.i(87155),n=e.i(54552),a=e.i(26297),o=e.i(911),s=e.i(18699),l=e.i(62311),c=e.i(76061),d=e.i(34726);function u(e,t){let r,i=()=>{let{currentTime:i}=t,n=(null===i?0:i.value)/100;r!==n&&e(n),r=n};return d.frame.preUpdate(i,!0),()=>(0,d.cancelFrame)(i)}var m=e.i(76896),f=e.i(751),p=e.i(55209);let h=new WeakMap,g=(e,t,r)=>(i,n)=>n&&n[0]?n[0][e+"Size"]:(0,f.isSVGElement)(i)&&"getBBox"in i?i.getBBox()[t]:i[r],x=g("inline","width","offsetWidth"),b=g("block","height","offsetHeight");function y({target:e,borderBoxSize:t}){h.get(e)?.forEach(r=>{r(e,{get width(){return x(e,t)},get height(){return b(e,t)}})})}function v(e){e.forEach(y)}let w=new Set;var k=e.i(51458),N=e.i(51741);let T=()=>({current:0,offset:[],progress:0,scrollLength:0,targetOffset:0,targetLength:0,containerLength:0,velocity:0}),_={x:{length:"Width",position:"Left"},y:{length:"Height",position:"Top"}};function E(e,t,r,i){let n=r[t],{length:a,position:o}=_[t],s=n.current,l=r.time;n.current=e[`scroll${o}`],n.scrollLength=e[`scroll${a}`]-e[`client${a}`],n.offset.length=0,n.offset[0]=0,n.offset[1]=n.scrollLength,n.progress=(0,k.progress)(0,n.scrollLength,n.current);let c=i-l;n.velocity=c>50?0:(0,N.velocityPerSecond)(n.current-s,c)}e.i(14595);var z=e.i(94279),S=e.i(66320),j=e.i(79672),A=e.i(92996);let L={start:0,center:.5,end:1};function C(e,t,r=0){let i=0;if(e in L&&(e=L[e]),"string"==typeof e){let t=parseFloat(e);e.endsWith("px")?i=t:e.endsWith("%")?e=t/100:e.endsWith("vw")?i=t/100*document.documentElement.clientWidth:e.endsWith("vh")?i=t/100*document.documentElement.clientHeight:e=t}return"number"==typeof e&&(i=t*e),r+i}let M=[0,0],O=[[0,0],[1,1]],R={x:0,y:0},D=new WeakMap,I=new WeakMap,P=new WeakMap,U=new WeakMap,H=new WeakMap,F=e=>e===document.scrollingElement?window:e;function W(e,{container:i=document.scrollingElement,trackContentSize:n=!1,...a}={}){if(!i)return c.noop;let o=P.get(i);o||(o=new Set,P.set(i,o));let s=function(e,t,r,i={}){return{measure:t=>{!function(e,t=e,r){if(r.x.targetOffset=0,r.y.targetOffset=0,t!==e){let i=t;for(;i&&i!==e;)r.x.targetOffset+=i.offsetLeft,r.y.targetOffset+=i.offsetTop,i=i.offsetParent}r.x.targetLength=t===e?t.scrollWidth:t.clientWidth,r.y.targetLength=t===e?t.scrollHeight:t.clientHeight,r.x.containerLength=e.clientWidth,r.y.containerLength=e.clientHeight}(e,i.target,r),E(e,"x",r,t),E(e,"y",r,t),r.time=t,(i.offset||i.target)&&function(e,t,r){let{offset:i=O}=r,{target:n=e,axis:a="y"}=r,o="y"===a?"height":"width",s=n!==e?function(e,t){let r={x:0,y:0},i=e;for(;i&&i!==t;)if((0,A.isHTMLElement)(i))r.x+=i.offsetLeft,r.y+=i.offsetTop,i=i.offsetParent;else if("svg"===i.tagName){let e=i.getBoundingClientRect(),t=(i=i.parentElement).getBoundingClientRect();r.x+=e.left-t.left,r.y+=e.top-t.top}else if(i instanceof SVGGraphicsElement){let{x:e,y:t}=i.getBBox();r.x+=e,r.y+=t;let n=null,a=i.parentNode;for(;!n;)"svg"===a.tagName&&(n=a),a=i.parentNode;i=n}else break;return r}(n,e):R,l=n===e?{width:e.scrollWidth,height:e.scrollHeight}:"getBBox"in n&&"svg"!==n.tagName?n.getBBox():{width:n.clientWidth,height:n.clientHeight},c={width:e.clientWidth,height:e.clientHeight};t[a].offset.length=0;let d=!t[a].interpolate,u=i.length;for(let e=0;e<u;e++){let r=function(e,t,r,i){let n=Array.isArray(e)?e:M,a=0;return"number"==typeof e?n=[e,e]:"string"==typeof e&&(n=(e=e.trim()).includes(" ")?e.split(" "):[e,L[e]?e:"0"]),(a=C(n[0],r,i))-C(n[1],t)}(i[e],c[o],l[o],s[a]);d||r===t[a].interpolatorOffsets[e]||(d=!0),t[a].offset[e]=r}d&&(t[a].interpolate=(0,z.interpolate)(t[a].offset,(0,S.defaultOffset)(i),{clamp:!1}),t[a].interpolatorOffsets=[...t[a].offset]),t[a].progress=(0,j.clamp)(0,1,t[a].interpolate(t[a].current))}(e,r,i)},notify:()=>t(r)}}(i,e,{time:0,x:T(),y:T()},a);if(o.add(s),!D.has(i)){let e,n=()=>{for(let e of o)e.measure(d.frameData.timestamp);d.frame.preUpdate(a)},a=()=>{for(let e of o)e.notify()},s=()=>d.frame.read(n);D.set(i,s);let l=F(i);window.addEventListener("resize",s,{passive:!0}),i!==document.documentElement&&I.set(i,"function"==typeof i?(w.add(i),r||(r=()=>{let e={get width(){return window.innerWidth},get height(){return window.innerHeight}};w.forEach(t=>t(e))},window.addEventListener("resize",r)),()=>{w.delete(i),w.size||"function"!=typeof r||(window.removeEventListener("resize",r),r=void 0)}):(!t&&"u">typeof ResizeObserver&&(t=new ResizeObserver(v)),(e=(0,p.resolveElements)(i)).forEach(e=>{let r=h.get(e);r||(r=new Set,h.set(e,r)),r.add(s),t?.observe(e)}),()=>{e.forEach(e=>{let r=h.get(e);r?.delete(s),r?.size||t?.unobserve(e)})})),l.addEventListener("scroll",s,{passive:!0}),s()}if(n&&!H.has(i)){let e=D.get(i),t={width:i.scrollWidth,height:i.scrollHeight};U.set(i,t);let r=d.frame.read(()=>{let r=i.scrollWidth,n=i.scrollHeight;(t.width!==r||t.height!==n)&&(e(),t.width=r,t.height=n)},!0);H.set(i,r)}let l=D.get(i);return d.frame.read(l,!1,!0),()=>{(0,d.cancelFrame)(l);let e=P.get(i);if(!e||(e.delete(s),e.size))return;let t=D.get(i);D.delete(i),t&&(F(i).removeEventListener("scroll",t),I.get(i)?.(),window.removeEventListener("resize",t));let r=H.get(i);r&&((0,d.cancelFrame)(r),H.delete(i)),U.delete(i)}}let B=new Map;function G({source:e,container:t,...r}){var i;let n,a,{axis:o}=r;e&&(t=e);let s=B.get(t)??new Map;B.set(t,s);let l=r.target??"self",c=s.get(l)??{},d=o+(r.offset??[]).join(",");return c[d]||(c[d]=!r.target&&(0,m.supportsScrollTimeline)()?new ScrollTimeline({source:t,axis:o}):(i={container:t,...r},n={value:0},a=W(e=>{n.value=100*e[i.axis].progress},i),{currentTime:n,cancel:a})),c[d]}var Y=e.i(29657),$=e.i(47601);let q=()=>({scrollX:(0,o.motionValue)(0),scrollY:(0,o.motionValue)(0),scrollXProgress:(0,o.motionValue)(0),scrollYProgress:(0,o.motionValue)(0)}),K=e=>!!e&&!e.current;var V=e.i(52059),X=e.i(53950),Q=e.i(13378);let J=(0,Q.default)("arrow-up",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]),Z=(0,Q.default)("film",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]]),ee=(0,Q.default)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]),et=(0,Q.default)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),er=(0,Q.default)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),ei=(0,Q.default)("message-square",[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]]),en=(0,Q.default)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);var ea=e.i(51588),eo=e.i(30104),es=e.i(67381),el=e.i(15462),ec=e.i(53320),ed=e.i(51449),eu=e.i(59864),em=e.i(78889),ef=e.i(66271),ep=class extends em.Subscribable{#e;#t=void 0;#r;#i;constructor(e,t){super(),this.#e=e,this.setOptions(t),this.bindMethods(),this.#n()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){let t=this.options;this.options=this.#e.defaultMutationOptions(e),(0,ef.shallowEqualObjects)(this.options,t)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#r,observer:this}),t?.mutationKey&&this.options.mutationKey&&(0,ef.hashKey)(t.mutationKey)!==(0,ef.hashKey)(this.options.mutationKey)?this.reset():this.#r?.state.status==="pending"&&this.#r.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#r?.removeObserver(this)}onMutationUpdate(e){this.#n(),this.#a(e)}getCurrentResult(){return this.#t}reset(){this.#r?.removeObserver(this),this.#r=void 0,this.#n(),this.#a()}mutate(e,t){return this.#i=t,this.#r?.removeObserver(this),this.#r=this.#e.getMutationCache().build(this.#e,this.options),this.#r.addObserver(this),this.#r.execute(e)}#n(){let e=this.#r?.state??(0,ed.getDefaultState)();this.#t={...e,isPending:"pending"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset}}#a(e){eu.notifyManager.batch(()=>{if(this.#i&&this.hasListeners()){let t=this.#t.variables,r=this.#t.context,i={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};if(e?.type==="success"){try{this.#i.onSuccess?.(e.data,t,r,i)}catch(e){Promise.reject(e)}try{this.#i.onSettled?.(e.data,null,t,r,i)}catch(e){Promise.reject(e)}}else if(e?.type==="error"){try{this.#i.onError?.(e.error,t,r,i)}catch(e){Promise.reject(e)}try{this.#i.onSettled?.(void 0,e.error,t,r,i)}catch(e){Promise.reject(e)}}}this.listeners.forEach(e=>{e(this.#t)})})}},eh=e.i(36372),eg=e.i(86788);let ex=(0,eg.createServerReference)("4078da1d4fb9a5542ae1d51973e0b8a06cc0aeab4f",eg.callServer,void 0,eg.findSourceMapURL,"likePost"),eb=(0,eg.createServerReference)("40e5446b1292d63454d14ed79d9d274ea883ca0188",eg.callServer,void 0,eg.findSourceMapURL,"unlikePost");var ey=e.i(23281),ev=e.i(47257),ew=e.i(23247);function ek({postId:e,initialLikes:t,userHasLiked:r}){let n,{data:a}=(0,ec.useQuery)({queryKey:["post-likes",e],initialData:{isLiked:r,count:t},staleTime:1/0}),{mutate:o,isPending:s}=(n=(0,eh.useQueryClient)(),function(e,t){let r=(0,eh.useQueryClient)(void 0),[i]=l.useState(()=>new ep(r,e));l.useEffect(()=>{i.setOptions(e)},[i,e]);let n=l.useSyncExternalStore(l.useCallback(e=>i.subscribe(eu.notifyManager.batchCalls(e)),[i]),()=>i.getCurrentResult(),()=>i.getCurrentResult()),a=l.useCallback((e,t)=>{i.mutate(e,t).catch(ef.noop)},[i]);if(n.error&&(0,ef.shouldThrowError)(i.options.throwOnError,[n.error]))throw n.error;return{...n,mutate:a,mutateAsync:n.mutate}}({mutationFn:t=>t?eb(e):ex(e),onMutate:async t=>{await n.cancelQueries({queryKey:["post-likes",e]});let r=n.getQueryData(["post-likes",e]);return n.setQueryData(["post-likes",e],e=>({...e,isLiked:!t,count:t?e.count-1:e.count+1})),{previousData:r}},onError:(t,r,i)=>{n.setQueryData(["post-likes",e],i?.previousData),ey.toast.error("Failed to update like")},onSettled:()=>{n.invalidateQueries({queryKey:["post-likes",e]})}})),c=a.isLiked?ew.HeartIcon:ev.HeartIcon;return(0,i.jsxs)("button",{onClick:()=>{o(a.isLiked)},disabled:s,className:"flex items-center gap-2 text-gray-500 transition-colors duration-200 ease-in-out hover:text-red-500 disabled:cursor-not-allowed disabled:opacity-60 dark:text-zinc-400 dark:hover:text-red-500","aria-label":a.isLiked?"Unlike post":"Like post",children:[(0,i.jsx)(c,{className:`h-6 w-6 transition-all duration-150 ${a.isLiked?"text-red-500 scale-110":"scale-100"}`}),(0,i.jsx)("span",{className:"font-semibold",children:a.count.toLocaleString()})]})}var eN=e.i(67709);let eT=(0,eg.createServerReference)("6071c570ebbe999a62b617f1e0741c053c497daeeb",eg.callServer,void 0,eg.findSourceMapURL,"postComment"),e_=(0,Q.default)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),eE=(0,Q.default)("send-horizontal",[["path",{d:"M3.714 3.048a.498.498 0 0 0-.683.627l2.843 7.627a2 2 0 0 1 0 1.396l-2.842 7.627a.498.498 0 0 0 .682.627l18-8.5a.5.5 0 0 0 0-.904z",key:"117uat"}],["path",{d:"M6 12h16",key:"s4cdu5"}]]);function ez(){let{pending:e}=(0,eN.useFormStatus)();return(0,i.jsxs)("button",{type:"submit",disabled:e,className:"group flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-full text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:[e?"Posting...":"Comment",(0,i.jsx)(eE,{size:14,className:`group-hover:translate-x-1 transition-transform ${e?"opacity-0":"opacity-100"}`})]})}function eS({postId:e,comments:t,currentUserProfile:r}){let n=(0,l.useRef)(null),a=!!r,[o,s]=(0,l.useState)(!1),[c,d]=(0,l.useState)(""),u=async(t,r)=>{if(!a)return{error:"You must be logged in."};let i=await eT(e,r);return i?.success&&(d(""),s(!1)),i},[m,f]=(0,l.useActionState)(u,null);m?.error&&n.current&&n.current.reset();let p=[...t].reverse(),h=o||c.length>0;return(0,i.jsxs)("section",{className:"w-full max-w-4xl",children:[(0,i.jsxs)("div",{className:"flex gap-4 mb-8",children:[(0,i.jsx)("div",{className:"shrink-0 pt-1",children:a?(0,i.jsx)("div",{className:"relative w-10 h-10 rounded-full overflow-hidden bg-zinc-100 dark:bg-zinc-800",children:(0,i.jsx)(ea.default,{src:r.profile_pic_url||"/placeholder-user.jpg",fill:!0,alt:"Your Avatar",className:"object-cover"})}):(0,i.jsx)("div",{className:"w-10 h-10 rounded-full bg-zinc-200 dark:bg-zinc-800 flex items-center justify-center",children:(0,i.jsx)(e_,{size:20,className:"text-zinc-500"})})}),(0,i.jsx)("div",{className:"flex-1",children:(0,i.jsxs)("form",{ref:n,action:f,className:"relative",children:[(0,i.jsx)("label",{htmlFor:"comment",className:"sr-only",children:"Add a comment"}),(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)("textarea",{id:"comment",name:"comment",rows:o?3:1,value:c,onChange:e=>d(e.target.value),onFocus:()=>s(!0),disabled:!a,placeholder:a?"Add a comment...":"Sign in to comment...",className:"peer w-full bg-transparent border-none outline-none ring-0 shadow-none text-sm md:text-base text-zinc-900 dark:text-zinc-100 placeholder:text-zinc-500 resize-none overflow-hidden py-2 px-0 leading-relaxed",required:!0,style:{boxShadow:"none"}}),(0,i.jsx)("div",{className:"absolute bottom-0 left-0 w-full h-[1px] bg-zinc-300 dark:bg-zinc-700"}),(0,i.jsx)("div",{className:`absolute bottom-0 left-0 h-[2px] bg-zinc-900 dark:bg-white transition-all duration-300 ease-out ${o?"w-full":"w-0"}`})]}),(h||m?.error)&&(0,i.jsxs)("div",{className:"flex items-center justify-between mt-3 animate-in fade-in slide-in-from-top-1 duration-200",children:[(0,i.jsx)("div",{className:"text-red-600 text-xs",children:m?.error&&m.error}),(0,i.jsxs)("div",{className:"flex items-center gap-3 ml-auto",children:[(0,i.jsx)("button",{type:"button",onClick:()=>{s(!1),d("")},className:"px-4 py-2 text-sm font-medium text-zinc-600 dark:text-zinc-300 hover:text-zinc-900 dark:hover:text-white hover:bg-zinc-100 dark:hover:bg-zinc-800 rounded-full transition-colors",children:"Cancel"}),a?(0,i.jsx)(ez,{}):(0,i.jsx)(eo.default,{href:"/auth/login",className:"px-4 py-2 bg-blue-600 text-white rounded-full text-sm font-medium hover:bg-blue-700 transition-colors",children:"Sign In"})]})]})]})})]}),(0,i.jsx)("div",{className:"space-y-6",children:0===t.length?(0,i.jsx)("div",{className:"text-center py-10",children:(0,i.jsx)("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm",children:"No comments yet. Be the first to share your thoughts."})}):p.map(e=>{let t,r;return(0,i.jsxs)("div",{className:"flex gap-4 group",children:[(0,i.jsx)(eo.default,{href:`/profile/${e.author.username}`,className:"shrink-0 mt-1",children:(0,i.jsx)("div",{className:"relative w-10 h-10 rounded-full overflow-hidden bg-zinc-100 dark:bg-zinc-800",children:(0,i.jsx)(ea.default,{src:e.author.profile_pic_url||"/placeholder-user.jpg",fill:!0,alt:e.author.display_name,className:"object-cover"})})}),(0,i.jsxs)("div",{className:"flex-1",children:[(0,i.jsxs)("div",{className:"flex items-baseline gap-2 mb-1",children:[(0,i.jsxs)(eo.default,{href:`/profile/${e.author.username}`,className:"text-xs md:text-sm font-semibold text-zinc-900 dark:text-zinc-100 hover:text-blue-600 dark:hover:text-blue-400 transition-colors",children:["@",e.author.username]}),(0,i.jsx)("span",{className:"text-xs text-zinc-500 dark:text-zinc-400",children:(t=new Date(e.created_at),(r=Math.floor((new Date().getTime()-t.getTime())/1e3))<60?"Just now":r<3600?`${Math.floor(r/60)} minutes ago`:r<86400?`${Math.floor(r/3600)} hours ago`:r<604800?`${Math.floor(r/86400)} days ago`:t.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"}))})]}),(0,i.jsx)("p",{className:"text-sm text-zinc-800 dark:text-zinc-300 leading-relaxed whitespace-pre-wrap",children:e.content})]})]},e.id)})})]})}var ej=e.i(45662);let eA={initial:{opacity:0},animate:{opacity:1,transition:{duration:.6,ease:"easeOut"}}},eL={initial:{opacity:0,y:20},animate:{opacity:1,y:0,transition:{duration:.5,delay:.2}}},eC=()=>(0,i.jsx)(n.motion.button,{className:"fixed bottom-6 right-6 z-40 p-3 bg-zinc-900 text-white dark:bg-zinc-100 dark:text-black rounded-full shadow-lg hover:scale-110 transition-transform",onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},whileTap:{scale:.9},children:(0,i.jsx)(J,{size:20})});function eM({post:e,author:t,movie:r,series:o,likeCount:d,userHasLiked:m,comments:f,viewerData:p,nsfw:h,rating:g}){let[x,b]=(0,l.useState)(!h),[y,v]=(0,l.useState)(!1),{scrollY:w}=function({container:e,target:t,...r}={}){let i=(0,Y.useConstant)(q),n=(0,l.useRef)(null),a=(0,l.useRef)(!1),o=(0,l.useCallback)(()=>(n.current=function(e,{axis:t="y",container:r=document.scrollingElement,...i}={}){var n,a;let o;if(!r)return c.noop;let s={axis:t,container:r,...i};return"function"==typeof e?(n=e,a=s,2===n.length?W(e=>{n(e[a.axis].progress,e)},a):u(n,G(a))):(o=G(s),e.attachTimeline({timeline:s.target?void 0:o,observe:e=>(e.pause(),u(t=>{e.time=e.iterationDuration*t},o))}))}((e,{x:t,y:r})=>{i.scrollX.set(t.current),i.scrollXProgress.set(t.progress),i.scrollY.set(r.current),i.scrollYProgress.set(r.progress)},{...r,container:e?.current||void 0,target:t?.current||void 0}),()=>{n.current?.()}),[e,t,JSON.stringify(r.offset)]);return(0,$.useIsomorphicLayoutEffect)(()=>{if(a.current=!1,!(K(e)||K(t)))return o();a.current=!0},[o]),(0,l.useEffect)(()=>a.current?((0,s.invariant)(!K(e),"Container ref is defined but not hydrated","use-scroll-ref"),(0,s.invariant)(!K(t),"Target ref is defined but not hydrated","use-scroll-ref"),o()):void 0,[o]),i}(),k=(0,V.useTransform)(w,[300,400],[0,1]),N=(0,V.useTransform)(w,[0,100],[0,1]),T=es.default.sanitize(e.content_html),_=r||o,E=r?"movie":"tv";(0,l.useEffect)(()=>{e?.title&&(document.title=`${e.title} | Deeper Weave`)},[e?.title]);let z=new Date(e.created_at).toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"});return(0,i.jsxs)(n.motion.article,{className:"min-h-screen pt-16 bg-white dark:bg-black text-zinc-900 dark:text-zinc-100 font-sans selection:bg-zinc-200 dark:selection:bg-zinc-800",variants:eA,initial:"initial",animate:"animate",children:[(0,i.jsxs)(n.motion.nav,{style:{backgroundColor:`rgba(var(--background-rgb), ${N})`},className:"fixed top-0 left-0 right-0 z-[60] h-16 flex items-center px-4 md:px-8 border-b border-transparent data-[scrolled=true]:border-zinc-200 dark:data-[scrolled=true]:border-zinc-900 transition-colors",children:[(0,i.jsx)("div",{className:"absolute inset-0 bg-white/80 dark:bg-black/80 backdrop-blur-md -z-10"}),(0,i.jsxs)("div",{className:"max-w-5xl mx-auto w-full flex items-center justify-between",children:[(0,i.jsxs)("button",{onClick:()=>window.history.back(),className:"flex items-center gap-2 text-zinc-600 hover:text-black dark:text-zinc-400 dark:hover:text-white transition-colors",children:[(0,i.jsx)(et,{size:20}),(0,i.jsx)("span",{className:"text-sm font-medium",children:"Back"})]}),(0,i.jsx)(n.motion.div,{style:{opacity:k},className:"flex-1 flex justify-center px-4 overflow-hidden",children:(0,i.jsx)("span",{className:"text-sm font-semibold truncate text-zinc-900 dark:text-white",children:e.title})}),(0,i.jsx)("div",{className:"w-[60px]"})]})]}),(0,i.jsxs)("div",{className:"relative w-full h-[60vh] md:h-[80vh] flex flex-col justify-end overflow-hidden bg-zinc-50 dark:bg-zinc-950",children:[e.banner_url&&(0,i.jsxs)("div",{className:"absolute inset-0",children:[(0,i.jsx)(ea.default,{src:e.banner_url,alt:"",fill:!0,className:"object-cover transition-transform duration-[2s] hover:scale-105 opacity-100 dark:opacity-60",priority:!0}),(0,i.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-transparent via-transparent to-transparent dark:from-black dark:via-black/60 dark:to-transparent"})]}),(0,i.jsx)("div",{className:"relative z-10 w-full max-w-5xl mx-auto px-6 pb-10 md:pb-16",children:(0,i.jsxs)("div",{className:"space-y-4 md:space-y-6",children:[(0,i.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,i.jsx)("span",{className:"text-zinc-900/80 dark:text-zinc-400 text-xs md:text-sm font-medium px-2 py-1 bg-white/50 dark:bg-transparent rounded-md backdrop-blur-sm dark:backdrop-blur-none",children:z}),(e.is_premium||e.is_nsfw||e.has_spoilers)&&(0,i.jsxs)("div",{className:"flex gap-2 scale-90 origin-left",children:[e.is_premium&&(0,i.jsx)(ej.PremiumBadge,{}),e.is_nsfw&&(0,i.jsx)(ej.NsfwBadge,{}),e.has_spoilers&&(0,i.jsx)(ej.SpoilerBadge,{})]})]}),(0,i.jsx)("h1",{className:"font-serif text-3xl md:text-5xl lg:text-6xl font-bold leading-tight tracking-tight text-zinc-900 dark:text-white max-w-3xl drop-shadow-sm dark:drop-shadow-none",children:e.title}),g&&(0,i.jsx)("div",{className:"flex items-center gap-1",children:[void 0,void 0,void 0,void 0,void 0].map((e,t)=>(0,i.jsx)("div",{className:`h-1.5 w-6 rounded-full shadow-sm ${t<g?"bg-zinc-900 dark:bg-white":"bg-zinc-300/80 dark:bg-zinc-800"}`},t))})]})})]}),(0,i.jsxs)("div",{className:"relative max-w-5xl mx-auto px-6 py-12 md:py-16",children:[(0,i.jsx)(a.AnimatePresence,{children:h&&!x&&(0,i.jsxs)(n.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-x-0 top-0 z-20 h-[500px] flex flex-col items-center justify-center bg-white/90 dark:bg-black/90 backdrop-blur-sm text-center px-4",children:[(0,i.jsx)(er,{className:"w-10 h-10 mb-4 text-zinc-400"}),(0,i.jsx)("h2",{className:"text-lg font-bold text-zinc-900 dark:text-white mb-2",children:"Sensitive Content"}),(0,i.jsx)("p",{className:"text-sm text-zinc-600 dark:text-zinc-400 mb-6 max-w-md",children:"This post contains material that may not be suitable for all audiences."}),(0,i.jsx)("button",{onClick:()=>b(!0),className:"px-6 py-3 bg-zinc-900 hover:bg-zinc-800 dark:bg-white dark:hover:bg-zinc-200 text-white dark:text-black text-sm font-medium rounded-lg transition-colors",children:"View Content"})]})}),(0,i.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-10 lg:gap-16",children:[(0,i.jsxs)(n.motion.div,{className:`lg:col-span-8 space-y-12 transition-all duration-500 ${!x?"blur-sm opacity-50 h-[400px] overflow-hidden":""}`,variants:eL,children:[(0,i.jsx)("div",{className:"   prose prose-lg prose-zinc dark:prose-invert max-w-none   prose-headings:font-serif prose-headings:font-semibold      /* Updated Font Weight: Normal instead of Light */   prose-p:font-normal prose-p:leading-8   prose-p:text-zinc-800 dark:prose-p:text-zinc-300      prose-a:text-zinc-900 dark:prose-a:text-white prose-a:no-underline hover:prose-a:underline      /* Image Fixes */   [&_img]:max-w-full [&_img]:w-auto [&_img]:mx-auto [&_img]:rounded-lg [&_img]:shadow-sm   [&_img]:max-h-[350px]   md:[&_img]:max-h-[550px]      /* First Letter */   first-letter:text-4xl first-letter:font-serif first-letter:font-bold   first-letter:mr-2 first-letter:float-left text-zinc-900 dark:text-white   ",dangerouslySetInnerHTML:{__html:T}}),(0,i.jsxs)("aside",{className:"mt-12 pt-8 border-t border-zinc-200 dark:border-zinc-800 flex flex-col gap-6",children:["review"===e.type&&_&&(0,i.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,i.jsx)("h3",{className:"text-xs font-bold uppercase tracking-wider text-zinc-500 pl-1",children:"In this post"}),(0,i.jsxs)("div",{onClick:()=>v(!0),className:"group cursor-pointer flex gap-4 p-4 rounded-xl border border-zinc-200 dark:border-zinc-800 hover:border-zinc-400 dark:hover:border-zinc-600 transition-all bg-zinc-50 dark:bg-zinc-900/30",children:[(0,i.jsx)("div",{className:"relative w-16 h-24 sm:w-20 sm:h-28 flex-shrink-0 rounded-lg overflow-hidden bg-zinc-200 dark:bg-zinc-800 shadow-sm",children:_.poster_url?(0,i.jsx)(ea.default,{src:_.poster_url,alt:"",fill:!0,className:"object-cover"}):(0,i.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,i.jsx)(Z,{className:"w-6 h-6 text-zinc-400"})})}),(0,i.jsxs)("div",{className:"flex flex-col justify-center min-w-0",children:[(0,i.jsx)("h4",{className:"font-serif text-lg md:text-xl font-bold text-zinc-900 dark:text-white truncate group-hover:underline decoration-1 underline-offset-4",children:_.title}),(0,i.jsxs)("div",{className:"flex items-center gap-2 mt-1 text-xs text-zinc-500",children:[(0,i.jsx)("span",{className:"capitalize",children:"movie"===E?"Film":"Series"}),(0,i.jsx)("span",{children:"â€¢"}),(0,i.jsx)("span",{children:new Date(_.release_date).getFullYear()})]}),(0,i.jsxs)("div",{className:"mt-3 flex items-center gap-1 text-xs font-medium text-zinc-900 dark:text-zinc-300",children:["View Details ",(0,i.jsx)(ee,{size:12})]})]})]}),(0,i.jsx)(el.default,{tmdbId:_.tmdb_id,initialData:_,mediaType:E,isOpen:y,onClose:()=>v(!1)})]}),(0,i.jsxs)("div",{className:"block lg:hidden flex flex-col gap-3",children:[(0,i.jsx)("h3",{className:"text-xs font-bold uppercase tracking-wider text-zinc-500 pl-1",children:"Written By"}),(0,i.jsx)(eo.default,{href:`/profile/${t.username}`,className:"group block relative w-full",children:(0,i.jsxs)("div",{className:"flex items-center gap-4 p-4 rounded-xl border border-zinc-200 dark:border-zinc-800 hover:border-zinc-400 dark:hover:border-zinc-600 transition-all bg-zinc-50 dark:bg-zinc-900/30",children:[(0,i.jsx)("div",{className:"relative w-16 h-16 flex-shrink-0 rounded-full overflow-hidden border border-zinc-200 dark:border-zinc-700 shadow-sm group-hover:scale-105 transition-transform",children:(0,i.jsx)(ea.default,{src:t.profile_pic_url||"/placeholder-user.jpg",alt:t.display_name||"Author",fill:!0,className:"object-cover"})}),(0,i.jsxs)("div",{className:"flex flex-col justify-center min-w-0",children:[(0,i.jsx)("h4",{className:"font-serif text-lg font-bold text-zinc-900 dark:text-white group-hover:underline decoration-zinc-400 underline-offset-4 decoration-1",children:t.display_name}),(0,i.jsxs)("p",{className:"text-sm font-medium text-zinc-500 group-hover:text-zinc-700 dark:group-hover:text-zinc-400 transition-colors",children:["@",t.username]}),(0,i.jsxs)("div",{className:"mt-1 flex items-center gap-1 text-xs font-medium text-zinc-400 group-hover:text-zinc-600 dark:group-hover:text-zinc-300 transition-colors",children:["View Profile ",(0,i.jsx)(en,{size:12})]})]})]})})]})]}),(0,i.jsxs)("div",{className:"pt-2 space-y-8",children:[(0,i.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[(0,i.jsx)("h3",{className:"font-serif text-2xl font-bold text-zinc-900 dark:text-white",children:"Discussion"}),(0,i.jsxs)("div",{className:"flex items-center gap-6",children:[(0,i.jsx)(ek,{postId:e.id,initialLikes:d,userHasLiked:m}),(0,i.jsxs)("div",{className:"flex items-center gap-2 text-zinc-500 text-sm",children:[(0,i.jsx)(ei,{size:18}),(0,i.jsx)("span",{children:f.length})]}),(0,i.jsxs)("div",{className:"flex items-center gap-2 text-zinc-500 text-sm",children:[(0,i.jsx)(X.Eye,{size:18}),(0,i.jsx)("span",{children:e.view_count.toLocaleString()})]})]})]}),(0,i.jsx)(eS,{postId:e.id,comments:f,currentUserProfile:p?.profile??null})]})]}),(0,i.jsx)("div",{className:"hidden lg:block lg:col-span-4 lg:pl-8 lg:border-l border-zinc-100 dark:border-zinc-800",children:(0,i.jsx)("div",{className:"lg:sticky lg:top-24 space-y-8",children:(0,i.jsxs)("div",{className:"text-center space-y-4",children:[(0,i.jsx)(eo.default,{href:`/profile/${t.username}`,className:"block relative group",children:(0,i.jsx)("div",{className:"relative w-24 h-24 mx-auto rounded-full overflow-hidden border border-zinc-200 dark:border-zinc-800 group-hover:border-zinc-400 transition-colors",children:(0,i.jsx)(ea.default,{src:t.profile_pic_url||"/placeholder-user.jpg",alt:t.display_name||"Author",fill:!0,className:"object-cover"})})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-xs text-zinc-500 uppercase tracking-widest font-bold mb-1",children:"Written By"}),(0,i.jsx)(eo.default,{href:`/profile/${t.username}`,className:"text-lg font-bold text-zinc-900 dark:text-white hover:underline",children:t.display_name}),(0,i.jsxs)("p",{className:"text-sm text-zinc-500",children:["@",t.username]})]})]})})})]})]}),(0,i.jsx)(eC,{})]})}e.s(["default",()=>eM],38345)}]);