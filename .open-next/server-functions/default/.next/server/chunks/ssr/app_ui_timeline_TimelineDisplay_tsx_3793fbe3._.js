module.exports=[55654,a=>{"use strict";var b=a.i(72888),c=a.i(46344),d=a.i(31470),e=a.i(31493),f=a.i(37353),g=a.i(33240),h=a.i(17172),i=a.i(3896);a.i(45189);var j=a.i(81159),k=a.i(7507);let l=c.forwardRef(function({title:a,titleId:b,...d},e){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:e,"aria-labelledby":b},d),a?c.createElement("title",{id:b},a):null,c.createElement("path",{fillRule:"evenodd",d:"M1.5 6a2.25 2.25 0 0 1 2.25-2.25h16.5A2.25 2.25 0 0 1 22.5 6v12a2.25 2.25 0 0 1-2.25 2.25H3.75A2.25 2.25 0 0 1 1.5 18V6ZM3 16.06V18c0 .414.336.75.75.75h16.5A.75.75 0 0 0 21 18v-1.94l-2.69-2.689a1.5 1.5 0 0 0-2.12 0l-.88.879.97.97a.75.75 0 1 1-1.06 1.06l-5.16-5.159a1.5 1.5 0 0 0-2.12 0L3 16.061Zm10.125-7.81a1.125 1.125 0 1 1 2.25 0 1.125 1.125 0 0 1-2.25 0Z",clipRule:"evenodd"}))});var m=a.i(82827);let n=c.forwardRef(function({title:a,titleId:b,...d},e){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:e,"aria-labelledby":b},d),a?c.createElement("title",{id:b},a):null,c.createElement("path",{fillRule:"evenodd",d:"M4.755 10.059a7.5 7.5 0 0 1 12.548-3.364l1.903 1.903h-3.183a.75.75 0 1 0 0 1.5h4.992a.75.75 0 0 0 .75-.75V4.356a.75.75 0 0 0-1.5 0v3.18l-1.9-1.9A9 9 0 0 0 3.306 9.67a.75.75 0 1 0 1.45.388Zm15.408 3.352a.75.75 0 0 0-.919.53 7.5 7.5 0 0 1-12.548 3.364l-1.902-1.903h3.183a.75.75 0 0 0 0-1.5H2.984a.75.75 0 0 0-.75.75v4.992a.75.75 0 0 0 1.5 0v-3.18l1.9 1.9a9 9 0 0 0 15.059-4.035.75.75 0 0 0-.53-.918Z",clipRule:"evenodd"}))}),o=c.forwardRef(function({title:a,titleId:b,...d},e){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:e,"aria-labelledby":b},d),a?c.createElement("title",{id:b},a):null,c.createElement("path",{fillRule:"evenodd",d:"M19.902 4.098a3.75 3.75 0 0 0-5.304 0l-4.5 4.5a3.75 3.75 0 0 0 1.035 6.037.75.75 0 0 1-.646 1.353 5.25 5.25 0 0 1-1.449-8.45l4.5-4.5a5.25 5.25 0 1 1 7.424 7.424l-1.757 1.757a.75.75 0 1 1-1.06-1.06l1.757-1.757a3.75 3.75 0 0 0 0-5.304Zm-7.389 4.267a.75.75 0 0 1 1-.353 5.25 5.25 0 0 1 1.449 8.45l-4.5 4.5a5.25 5.25 0 1 1-7.424-7.424l1.757-1.757a.75.75 0 1 1 1.06 1.06l-1.757 1.757a3.75 3.75 0 1 0 5.304 5.304l4.5-4.5a3.75 3.75 0 0 0-1.035-6.037.75.75 0 0 1-.354-1Z",clipRule:"evenodd"}))}),p=c.forwardRef(function({title:a,titleId:b,...d},e){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:e,"aria-labelledby":b},d),a?c.createElement("title",{id:b},a):null,c.createElement("path",{fillRule:"evenodd",d:"M1.5 6.375c0-1.036.84-1.875 1.875-1.875h17.25c1.035 0 1.875.84 1.875 1.875v3.026a.75.75 0 0 1-.375.65 2.249 2.249 0 0 0 0 3.898.75.75 0 0 1 .375.65v3.026c0 1.035-.84 1.875-1.875 1.875H3.375A1.875 1.875 0 0 1 1.5 17.625v-3.026a.75.75 0 0 1 .374-.65 2.249 2.249 0 0 0 0-3.898.75.75 0 0 1-.374-.65V6.375Zm15-1.125a.75.75 0 0 1 .75.75v.75a.75.75 0 0 1-1.5 0V6a.75.75 0 0 1 .75-.75Zm.75 4.5a.75.75 0 0 0-1.5 0v.75a.75.75 0 0 0 1.5 0v-.75Zm-.75 3a.75.75 0 0 1 .75.75v.75a.75.75 0 0 1-1.5 0v-.75a.75.75 0 0 1 .75-.75Zm.75 4.5a.75.75 0 0 0-1.5 0V18a.75.75 0 0 0 1.5 0v-.75ZM6 12a.75.75 0 0 1 .75-.75H12a.75.75 0 0 1 0 1.5H6.75A.75.75 0 0 1 6 12Zm.75 2.25a.75.75 0 0 0 0 1.5h3a.75.75 0 0 0 0-1.5h-3Z",clipRule:"evenodd"}))});var q=a.i(83581),r=a.i(95811);a.i(2762);var s=a.i(81826),t=a.i(14591),u=a.i(30276);function v({imageUrl:a,onClose:c}){return(0,b.jsx)(i.AnimatePresence,{children:(0,b.jsxs)(h.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 backdrop-blur-lg z-90 flex items-center justify-center p-4",onClick:c,children:[(0,b.jsx)("button",{onClick:c,className:"absolute top-4 right-4 z-[60] p-2 rounded-full text-gray-300 hover:text-white hover:bg-white/20 transition-colors",children:(0,b.jsx)(u.XMarkIcon,{className:"w-8 h-8"})}),(0,b.jsx)(h.motion.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},transition:{type:"spring",damping:25,stiffness:300},className:"relative w-full h-full max-w-5xl max-h-[90vh]",onClick:a=>a.stopPropagation(),children:(0,b.jsx)(j.default,{src:a,alt:"Timeline entry photo",layout:"fill",objectFit:"contain",className:"rounded-lg"})})]})})}let w=c.forwardRef(function({title:a,titleId:b,...d},e){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:e,"aria-labelledby":b},d),a?c.createElement("title",{id:b},a):null,c.createElement("path",{fillRule:"evenodd",d:"M6.75 2.25A.75.75 0 0 1 7.5 3v1.5h9V3A.75.75 0 0 1 18 3v1.5h.75a3 3 0 0 1 3 3v11.25a3 3 0 0 1-3 3H5.25a3 3 0 0 1-3-3V7.5a3 3 0 0 1 3-3H6V3a.75.75 0 0 1 .75-.75Zm13.5 9a1.5 1.5 0 0 0-1.5-1.5H5.25a1.5 1.5 0 0 0-1.5 1.5v7.5a1.5 1.5 0 0 0 1.5 1.5h13.5a1.5 1.5 0 0 0 1.5-1.5v-7.5Z",clipRule:"evenodd"}))});var x=a.i(90212),y=a.i(5916),z=a.i(62068);let A=(0,z.createServerReference)("40e7b2cc38b97e02723fa1a69b8372d45365f40226",z.callServer,void 0,z.findSourceMapURL,"getProfileCardData");var B=a.i(382);function C({user:a,onClose:e}){let[f,g]=(0,c.useState)(null),[k,l]=(0,c.useState)(!0);(0,c.useEffect)(()=>{!async function(){l(!0);try{let b=await A(a.username);b.profile&&g(b)}catch(a){console.error("Failed to fetch profile card data:",a)}finally{l(!1)}}()},[a.username]);let m=f?.profile?new Date(f.profile.created_at).toLocaleDateString("en-US",{year:"numeric",month:"short"}):null;return(0,b.jsx)(i.AnimatePresence,{children:(0,b.jsx)(h.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-[60] flex items-center justify-center p-4",onClick:e,children:(0,b.jsxs)(h.motion.div,{initial:{scale:.95,opacity:0,y:10},animate:{scale:1,opacity:1,y:0},exit:{scale:.95,opacity:0,y:10},transition:{type:"spring",damping:25,stiffness:300},className:"relative bg-white dark:bg-zinc-950 rounded-2xl shadow-2xl max-w-sm w-full border border-zinc-200 dark:border-zinc-800 overflow-hidden",onClick:a=>a.stopPropagation(),children:[(0,b.jsx)("button",{onClick:e,className:"absolute top-3 right-3 z-20 p-1.5 rounded-full bg-black/20 hover:bg-black/40 text-white backdrop-blur-sm transition-colors",children:(0,b.jsx)(u.XMarkIcon,{className:"w-4 h-4"})}),(0,b.jsxs)("div",{className:"relative h-24 w-full bg-zinc-100 dark:bg-zinc-900",children:[a.profile_pic_url&&(0,b.jsx)(j.default,{src:a.profile_pic_url,alt:"Banner",fill:!0,className:"object-cover opacity-60 blur-xl scale-110"}),(0,b.jsx)("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent to-white dark:to-zinc-950/80"})]}),(0,b.jsxs)("div",{className:"px-6 pb-6 -mt-10 relative z-10",children:[(0,b.jsx)("div",{className:"relative inline-block",children:(0,b.jsx)("div",{className:"h-20 w-20 rounded-full p-1 bg-white dark:bg-zinc-950 shadow-lg",children:(0,b.jsx)(j.default,{src:a.profile_pic_url||"/default-avatar.png",alt:a.username,width:72,height:72,className:"rounded-full object-cover w-full h-full bg-zinc-100 dark:bg-zinc-900"})})}),(0,b.jsxs)("div",{className:"mt-3",children:[(0,b.jsx)("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white truncate",children:f?.profile.display_name||a.username}),(0,b.jsxs)("p",{className:"text-sm text-zinc-500 dark:text-zinc-400 font-medium",children:["@",a.username]}),k?(0,b.jsx)("div",{className:"py-6 flex justify-center",children:(0,b.jsx)(B.default,{})}):f?(0,b.jsxs)("div",{className:"mt-4 space-y-5",children:[f.profile.bio?(0,b.jsx)("p",{className:"text-sm text-zinc-600 dark:text-zinc-300 leading-relaxed",children:f.profile.bio}):(0,b.jsx)("p",{className:"text-sm text-zinc-400 italic",children:"No bio available."}),(0,b.jsxs)("div",{className:"flex items-center gap-6 border-y border-zinc-100 dark:border-zinc-800 py-3",children:[(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsx)("span",{className:"font-bold text-lg text-zinc-900 dark:text-white leading-none",children:f.followerCount}),(0,b.jsx)("span",{className:"text-xs text-zinc-500 dark:text-zinc-400 uppercase tracking-wide mt-1",children:"Followers"})]}),(0,b.jsx)("div",{className:"w-px h-8 bg-zinc-100 dark:bg-zinc-800"}),(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsx)("span",{className:"font-bold text-lg text-zinc-900 dark:text-white leading-none",children:f.followingCount}),(0,b.jsx)("span",{className:"text-xs text-zinc-500 dark:text-zinc-400 uppercase tracking-wide mt-1",children:"Following"})]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between pt-1",children:[(0,b.jsxs)("div",{className:"space-y-1.5",children:[f.profile.country&&(0,b.jsxs)("div",{className:"flex items-center gap-1.5 text-xs text-zinc-500 dark:text-zinc-400",children:[(0,b.jsx)(x.MapPinIcon,{className:"w-3.5 h-3.5"}),f.profile.country]}),m&&(0,b.jsxs)("div",{className:"flex items-center gap-1.5 text-xs text-zinc-500 dark:text-zinc-400",children:[(0,b.jsx)(w,{className:"w-3.5 h-3.5"}),"Joined ",m]})]}),(0,b.jsxs)(d.default,{href:`/profile/${a.username}`,onClick:e,className:"flex items-center gap-2 px-4 py-2 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-full text-xs font-bold hover:bg-zinc-800 dark:hover:bg-zinc-200 transition-colors",children:["View Profile ",(0,b.jsx)(y.ArrowRightIcon,{className:"w-3 h-3"})]})]})]}):(0,b.jsx)("p",{className:"mt-4 text-sm text-zinc-500",children:"Failed to load details."})]})]})]})})})}var D=a.i(67057),E=a.i(30979);let F=process.env.NEXT_PUBLIC_SITE_URL?process.env.NEXT_PUBLIC_SITE_URL:"http://localhost:3000",G=a=>a?a.startsWith("http")?a:`https://image.tmdb.org/t/p/original${a}`:null,H=({filled:a})=>(0,b.jsx)("svg",{width:"36",height:"36",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,b.jsx)("path",{d:"M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z",fill:a?"#e4e4e7":"none",stroke:a?"#e4e4e7":"#52525b",strokeWidth:"1.5",strokeLinejoin:"miter"})}),I=()=>(0,b.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"#e4e4e7",strokeWidth:"2",strokeLinecap:"square",strokeLinejoin:"miter",children:[(0,b.jsx)("path",{d:"M2 10s3-3 3-8"}),(0,b.jsx)("path",{d:"M22 10s-3-3-3-8"}),(0,b.jsx)("path",{d:"M10 2h4"}),(0,b.jsx)("path",{d:"M2 22h20"}),(0,b.jsx)("path",{d:"M12 22V12"}),(0,b.jsx)("rect",{x:"2",y:"10",width:"20",height:"12"})]}),J={Netflix:{logo:"/logos/netflix.svg"},"Prime Video":{logo:"/logos/prime-video.svg"},"Disney+":{logo:"/logos/disney-plus.svg"},Hulu:{logo:"/logos/hulu.svg"},Max:{logo:"/logos/max.svg"},"Apple TV+":{logo:"/logos/apple-tv.svg"}};function K({entry:a}){let c=a.movies||a.series;if(!c)return(0,b.jsx)("div",{style:{display:"flex",width:1080,height:1920,backgroundColor:"#09090b",color:"white",alignItems:"center",justifyContent:"center"},children:(0,b.jsx)("h1",{children:"Media Not Found"})});let d=G(c.backdrop_url),e=G(c.poster_url),f=a.profiles,g=Number(a.rating)||0,h=c.release_date?.split("-")[0]||"N/A",i=new Date(a.watched_on).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),j=a.timeline_collaborators?.map(a=>a.profiles)||[],k=a.viewing_context,l=null,m=`Watched on ${i}`;if(k){if(m=`${k} • ${i}`,"Theatre"===k)l=(0,b.jsx)(I,{});else if(J[k]){let a=J[k].logo;l=(0,b.jsx)("img",{src:`${F}${a}`,width:"28",height:"28",style:{objectFit:"contain",filter:"Apple TV+"===k?"invert(1)":"none"}})}}let n=Array.from({length:5},(a,b)=>b<Math.round(g));return(0,b.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:"100%",height:"100%",backgroundColor:"#09090b",color:"#fafafa",fontFamily:'"Inter", sans-serif',position:"relative"},children:[d?(0,b.jsx)("img",{src:d,style:{position:"absolute",top:0,left:0,width:"100%",height:"1100px",objectFit:"cover",opacity:.35}}):(0,b.jsx)("img",{src:e||"",style:{position:"absolute",top:0,left:0,width:"100%",height:"1100px",objectFit:"cover",filter:"blur(50px)",opacity:.2}}),(0,b.jsx)("div",{style:{display:"flex",position:"absolute",top:0,left:0,width:"100%",height:"1200px",background:"linear-gradient(to bottom, transparent 0%, #09090b 95%)"}}),(0,b.jsxs)("div",{style:{position:"relative",display:"flex",flexDirection:"column",height:"100%",padding:"80px"},children:[(0,b.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"24px",marginBottom:"auto"},children:[f.profile_pic_url&&(0,b.jsx)("img",{src:f.profile_pic_url,width:"96",height:"96",style:{borderRadius:"50%",border:"4px solid #27272a"}}),(0,b.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[(0,b.jsx)("span",{style:{fontSize:"32px",fontWeight:700,color:"#fff"},children:f.display_name}),(0,b.jsxs)("span",{style:{fontSize:"24px",color:"#a1a1aa"},children:["@",f.username]})]})]}),(0,b.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"60px",marginTop:"120px"},children:[(0,b.jsxs)("div",{style:{display:"flex",alignItems:"flex-end",gap:"60px"},children:[(0,b.jsx)("div",{style:{display:"flex",width:"380px",height:"570px",backgroundColor:"#18181b",borderRadius:"8px",border:"1px solid rgba(255,255,255,0.1)",boxShadow:"0 40px 80px rgba(0,0,0,0.7)",overflow:"hidden",position:"relative",flexShrink:0},children:e?(0,b.jsx)("img",{src:e,style:{width:"100%",height:"100%",objectFit:"cover"}}):(0,b.jsx)("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",color:"#52525b"},children:"No Poster"})}),(0,b.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"24px",flex:1,paddingBottom:"10px"},children:[(0,b.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[(0,b.jsx)("h1",{style:{fontSize:"88px",fontWeight:300,lineHeight:"1",letterSpacing:"-0.03em",color:"#ffffff",margin:0,textShadow:"0 4px 30px rgba(0,0,0,0.5)"},children:c.title}),(0,b.jsx)("span",{style:{fontSize:"32px",fontWeight:500,color:"#a1a1aa"},children:h})]}),g>0&&(0,b.jsx)("div",{style:{display:"flex",gap:"8px",marginTop:"8px"},children:n.map((a,c)=>(0,b.jsx)(H,{filled:a},c))}),(0,b.jsx)("div",{style:{display:"flex",marginTop:"24px"},children:(0,b.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"16px",padding:"16px 28px",backgroundColor:"rgba(39, 39, 42, 0.4)",borderRadius:"100px",border:"1px solid rgba(255,255,255,0.08)",backdropFilter:"blur(10px)"},children:[l,(0,b.jsx)("span",{style:{fontSize:"28px",fontWeight:500,color:"#e4e4e7"},children:m})]})})]})]}),j.length>0&&(0,b.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"20px",borderTop:"1px solid rgba(255,255,255,0.1)",paddingTop:"40px"},children:[(0,b.jsx)("span",{style:{fontSize:"20px",fontWeight:600,textTransform:"uppercase",letterSpacing:"0.15em",color:"#71717a"},children:"Watched With"}),(0,b.jsx)("div",{style:{display:"flex",alignItems:"center",gap:"24px"},children:j.map((a,c)=>(0,b.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[a.profile_pic_url?(0,b.jsx)("img",{src:a.profile_pic_url,width:"56",height:"56",style:{borderRadius:"50%",border:"2px solid #52525b"}}):(0,b.jsx)("div",{style:{width:"56px",height:"56px",borderRadius:"50%",backgroundColor:"#27272a",border:"2px solid #52525b"}}),(0,b.jsx)("span",{style:{fontSize:"28px",color:"#e4e4e7"},children:a.username})]},c))})]}),a.notes&&(0,b.jsx)("div",{style:{display:"flex",flexDirection:"column",marginTop:j.length>0?"20px":"40px"},children:(0,b.jsxs)("p",{style:{fontSize:"48px",lineHeight:"1.4",fontWeight:300,color:"#d4d4d8",margin:0,fontStyle:"italic",fontFamily:'"Inter", sans-serif'},children:['"',a.notes,'"']})})]}),(0,b.jsx)("div",{style:{marginTop:"auto",display:"flex",justifyContent:"center",paddingTop:"60px",opacity:.4},children:(0,b.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[(0,b.jsx)("div",{style:{display:"flex",width:"28px",height:"28px",backgroundColor:"#e4e4e7",borderRadius:"4px"}}),(0,b.jsx)("span",{style:{fontSize:"26px",fontWeight:600,letterSpacing:"0.05em",color:"#e4e4e7"},children:"deeperweave.com"})]})})]})]})}let L=process.env.NEXT_PUBLIC_SITE_URL?process.env.NEXT_PUBLIC_SITE_URL:"http://localhost:3000",M=a=>a?a.startsWith("http")?a:`https://image.tmdb.org/t/p/original${a}`:null,N=({filled:a})=>(0,b.jsx)("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,b.jsx)("path",{d:"M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z",fill:a?"#ffffff":"none",stroke:a?"#ffffff":"#52525b",strokeWidth:"1.5",strokeLinejoin:"miter"})}),O={Netflix:{logo:"/logos/netflix.svg"},"Prime Video":{logo:"/logos/prime-video.svg"},"Disney+":{logo:"/logos/disney-plus.svg"},Hulu:{logo:"/logos/hulu.svg"},Max:{logo:"/logos/max.svg"},"Apple TV+":{logo:"/logos/apple-tv.svg"}};function P({entry:a}){let c=a.movies||a.series;if(!c)return(0,b.jsx)("div",{style:{display:"flex",width:1080,height:1920,backgroundColor:"#09090b",color:"white",alignItems:"center",justifyContent:"center"},children:(0,b.jsx)("h1",{children:"Media Not Found"})});let d=M(c.backdrop_url),e=M(c.poster_url),f=a.profiles,g=Number(a.rating)||0,h=c.release_date?.split("-")[0]||"N/A",i=new Date(a.watched_on).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}),j=a.viewing_context,k=Array.from({length:5},(a,b)=>b<Math.round(g));return(0,b.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:"100%",height:"100%",backgroundColor:"#000000",color:"#ffffff",fontFamily:'"Inter", sans-serif',position:"relative",alignItems:"center"},children:[(0,b.jsxs)("div",{style:{display:"flex",position:"absolute",top:0,left:0,width:"100%",height:"920px"},children:[d?(0,b.jsx)("img",{src:d,style:{width:"100%",height:"100%",objectFit:"cover",objectPosition:"top center",opacity:.8}}):(0,b.jsx)("div",{style:{width:"100%",height:"100%",background:"linear-gradient(to bottom, #27272a, #000)"}}),(0,b.jsx)("div",{style:{display:"flex",position:"absolute",bottom:0,left:0,width:"100%",height:"400px",background:"linear-gradient(to bottom, transparent 0%, #000000 100%)"}}),(0,b.jsx)("div",{style:{display:"flex",position:"absolute",top:0,left:0,width:"100%",height:"300px",background:"linear-gradient(to top, transparent 0%, rgba(0,0,0,0.6) 100%)"}})]}),(0,b.jsxs)("div",{style:{position:"relative",display:"flex",flexDirection:"column",height:"100%",width:"100%",padding:"80px",alignItems:"center"},children:[(0,b.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"20px",marginTop:"20px",backgroundColor:"rgba(0, 0, 0, 0.4)",padding:"12px 28px",borderRadius:"100px",border:"1px solid rgba(255,255,255,0.15)",backdropFilter:"blur(8px)"},children:[f.profile_pic_url&&(0,b.jsx)("img",{src:f.profile_pic_url,width:"56",height:"56",style:{borderRadius:"50%"}}),(0,b.jsxs)("span",{style:{fontSize:"26px",fontWeight:600,color:"#e4e4e7"},children:["@",f.username]})]}),(0,b.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",marginTop:"240px",width:"100%"},children:[(0,b.jsxs)("div",{style:{display:"flex",position:"relative",marginBottom:"60px"},children:[(0,b.jsx)("div",{style:{position:"absolute",inset:0,boxShadow:"0 30px 80px -10px rgba(0,0,0,1)",borderRadius:"16px"}}),(0,b.jsx)("img",{src:e||"",width:"500",height:"750",style:{borderRadius:"16px",border:"1px solid rgba(255,255,255,0.15)",objectFit:"cover",zIndex:10}})]}),(0,b.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"16px",width:"100%"},children:[(0,b.jsx)("h1",{style:{fontSize:"80px",fontWeight:700,textAlign:"center",lineHeight:"1.1",letterSpacing:"-0.02em",color:"#ffffff",margin:0,maxWidth:"900px"},children:c.title}),(0,b.jsx)("span",{style:{fontSize:"36px",color:"#71717a",fontWeight:500},children:h}),g>0&&(0,b.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"16px",marginTop:"16px"},children:[(0,b.jsx)("div",{style:{display:"flex",gap:"8px"},children:k.map((a,c)=>(0,b.jsx)(N,{filled:a},c))}),(0,b.jsx)("span",{style:{fontSize:"40px",fontWeight:700,color:"#e4e4e7"},children:g.toFixed(1)})]}),(0,b.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"16px",marginTop:"40px",padding:"16px 32px",backgroundColor:"#18181b",borderRadius:"12px",border:"1px solid #27272a"},children:[j&&O[j]&&(0,b.jsx)("img",{src:`${L}${O[j].logo}`,width:"32",height:"32",style:{objectFit:"contain",filter:"Apple TV+"===j?"invert(1)":"none"}}),(0,b.jsxs)("span",{style:{fontSize:"28px",color:"#d4d4d8",fontWeight:500},children:["Watched on ",i]})]})]})]}),(0,b.jsx)("div",{style:{marginTop:"auto",display:"flex",paddingBottom:"20px",opacity:.3},children:(0,b.jsx)("span",{style:{fontSize:"22px",fontWeight:700,letterSpacing:"0.15em",textTransform:"uppercase"},children:"deeperweave.com"})})]})]})}let Q=({platform:a})=>{let c=a.toLowerCase().trim(),d={bg:"bg-zinc-100 dark:bg-zinc-800",text:"text-zinc-600 dark:text-zinc-400",icon:null,label:a};return c.includes("netflix")?d={bg:"bg-black",text:"text-[#E50914]",icon:(0,b.jsx)(j.default,{src:"/logos/netflix.svg",alt:"Netflix",width:50,height:14,className:"h-3.5 w-auto object-contain"}),label:"Netflix"}:c.includes("prime")||c.includes("amazon")?d={bg:"bg-[#00A8E1]",text:"text-white",icon:(0,b.jsx)(j.default,{src:"/logos/prime-video.svg",alt:"Prime Video",width:50,height:14,className:"h-3.5 w-auto object-contain brightness-0 invert"}),label:"Prime"}:c.includes("disney")?d={bg:"bg-[#113CCF]",text:"text-white",icon:(0,b.jsx)(j.default,{src:"/logos/disney-plus.svg",alt:"Disney+",width:50,height:16,className:"h-4 w-auto object-contain"}),label:"Disney+"}:c.includes("hulu")?d={bg:"bg-[#1CE783]",text:"text-black",icon:(0,b.jsx)(j.default,{src:"/logos/hulu.svg",alt:"Hulu",width:50,height:14,className:"h-3 w-auto object-contain"}),label:"Hulu"}:c.includes("max")||c.includes("hbo")?d={bg:"bg-[#002BE7]",text:"text-white",icon:(0,b.jsx)(j.default,{src:"/logos/max.svg",alt:"Max",width:50,height:14,className:"h-3.5 w-auto object-contain brightness-0 invert"}),label:"Max"}:c.includes("apple")||c.includes("tv+")?d={bg:"bg-white",text:"text-black",icon:(0,b.jsx)(j.default,{src:"/logos/apple-tv.svg",alt:"Apple TV",width:50,height:14,className:"h-3.5 w-auto object-contain"}),label:"Apple TV"}:c.includes("cinema")||c.includes("theater")?d={bg:"bg-rose-600",text:"text-white",icon:(0,b.jsx)(p,{className:"w-3.5 h-3.5"}),label:"Cinema"}:(c.includes("tv")||c.includes("television"))&&(d={bg:"bg-zinc-800",text:"text-zinc-300",icon:(0,b.jsx)(q.TvIcon,{className:"w-3.5 h-3.5"}),label:"TV"}),(0,b.jsx)("div",{className:`inline-flex items-center justify-center gap-1.5 px-2 py-0.5 rounded-sm ${d.bg} shadow-sm border border-black/5 dark:border-white/5`,children:d.icon?d.icon:(0,b.jsx)("span",{className:`text-[10px] font-bold uppercase tracking-wide ${d.text}`,children:d.label})})};function R({entry:a,username:b,isOpen:d,onClose:e,onDownload:f,isDownloading:g}){let[h,i]=(0,c.useState)(!1);return null}function S({isOpen:a,onClose:b,notes:c,title:d,posterUrl:e,date:f,rating:g}){return null}function T({entry:a,index:e,isOwnProfile:f,username:g,isSFW:i}){let p=a.movies||a.series,[q,u]=(0,c.useState)(null),[w,x]=(0,c.useState)(null),[y,z]=(0,c.useState)(null),[A,B]=(0,c.useState)(!1),[F,G]=(0,c.useState)(null),H=(0,c.useRef)(null),[I,J]=(0,c.useState)(!1),[L,M]=(0,c.useState)(!1),N=a.movies?.adult===!0||a.series?.adult===!0;if((0,c.useEffect)(()=>{F&&H.current&&(async()=>{B(!0);try{await new Promise(a=>setTimeout(a,500));let a=await (0,E.toPng)(H.current,{cacheBust:!0,pixelRatio:1,width:1080,height:1920,backgroundColor:"#09090b"}),b=p?.title.replace(/[^a-z0-9]/gi,"_").toLowerCase()||"story",c=document.createElement("a");c.download=`${b}_${F}.png`,c.href=a,c.click(),r.toast.success("Image saved")}catch(a){console.error(a),r.toast.error("Failed to generate image")}finally{B(!1),G(null)}})()},[F,p?.title]),!p)return null;let O=new Date(a.watched_on).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",year:"numeric"}),T=Number(a.rating),U=T%1==0?T.toString():T.toFixed(1),V=a.rewatch_count||0,W=a.is_rewatch||V>0,X=p.release_date?.split("-")[0],Y=()=>z({tmdb_id:p.tmdb_id,title:p.title,media_type:a.movies?"movie":"tv"});return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(h.motion.div,{initial:{opacity:0,y:10},whileInView:{opacity:1,y:0},viewport:{once:!0,margin:"-50px"},className:"group relative w-full mb-4",id:`entry-${a.id}`,children:(0,b.jsxs)("div",{className:"flex flex-row w-full bg-white dark:bg-zinc-950 border border-zinc-200 dark:border-zinc-800 rounded-md overflow-hidden shadow-sm hover:shadow-md transition-all duration-300",children:[(0,b.jsxs)("div",{className:"relative w-24 min-h-[140px] md:w-32 shrink-0 cursor-pointer bg-zinc-100 dark:bg-zinc-900 group/poster",onClick:Y,children:[(0,b.jsx)(D.default,{isAdult:N,isSFW:i,children:(0,b.jsx)(j.default,{src:p.poster_url||"/placeholder-poster.png",alt:p.title,fill:!0,className:"object-cover object-center group-hover/poster:scale-105 transition-transform duration-500"})}),N&&(0,b.jsx)("div",{className:"absolute top-1 left-1 pointer-events-none z-10",children:(0,b.jsx)("div",{className:"w-2 h-2 rounded-full bg-red-600 shadow-sm border border-white/20"})})]}),(0,b.jsxs)("div",{className:"flex-1 flex flex-col p-4 min-w-0 relative",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-1",children:[(0,b.jsx)("span",{className:"text-xs uppercase tracking-wide font-semibold text-zinc-500 dark:text-zinc-500 italic",children:O}),f&&(0,b.jsx)("button",{onClick:a=>{a.stopPropagation(),J(!0)},className:"p-1 text-zinc-400 hover:text-zinc-900 dark:hover:text-zinc-100 transition-colors rounded-md hover:bg-zinc-100 dark:bg-zinc-900",children:(0,b.jsx)(k.EllipsisHorizontalIcon,{className:"w-5 h-5"})})]}),(0,b.jsxs)("div",{className:"flex items-baseline gap-2 mb-2 pr-6",children:[(0,b.jsx)("h3",{className:"text-base md:text-lg font-bold leading-tight text-zinc-900 dark:text-zinc-100 cursor-pointer hover:underline decoration-zinc-300 underline-offset-2 truncate",onClick:Y,title:p.title,children:p.title}),X&&(0,b.jsxs)("span",{className:"text-sm font-normal text-zinc-400 shrink-0",children:["(",X,")"]})]}),(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-x-2 gap-y-1 text-xs text-zinc-500 dark:text-zinc-400 mb-2.5",children:[T>0&&(0,b.jsxs)("div",{className:"flex items-center gap-1 font-bold text-zinc-900 dark:text-zinc-100",children:[(0,b.jsx)(m.StarIcon,{className:"w-3.5 h-3.5 text-zinc-400 dark:text-zinc-600"}),(0,b.jsx)("span",{children:U})]}),T>0&&a.viewing_context&&(0,b.jsx)("span",{className:"text-zinc-300 dark:text-zinc-700",children:"•"}),a.viewing_context&&(0,b.jsx)(Q,{platform:a.viewing_context}),(T>0||a.viewing_context)&&W&&(0,b.jsx)("span",{className:"text-zinc-300 dark:text-zinc-700",children:"•"}),W&&(0,b.jsxs)("div",{className:"inline-flex items-center gap-1 px-1.5 py-0.5 rounded bg-amber-100 dark:bg-amber-500/10 text-amber-700 dark:text-amber-500 font-bold uppercase tracking-wider text-[10px]",title:`You have rewatched this ${V} times`,children:[(0,b.jsx)(n,{className:"w-3 h-3 stroke-[3]"}),(0,b.jsx)("span",{children:V>0?`Rewatch ${V}`:"Rewatch"})]}),(T>0||a.viewing_context||W)&&a.timeline_collaborators.length>0&&(0,b.jsx)("span",{className:"text-zinc-300 dark:text-zinc-700",children:"•"}),a.timeline_collaborators.length>0&&(0,b.jsx)("div",{className:"flex -space-x-1",children:a.timeline_collaborators.slice(0,3).map(a=>a.profiles&&(0,b.jsx)("img",{src:a.profiles.profile_pic_url||"/placeholder-user.jpg",alt:a.profiles.username,className:"w-4 h-4 rounded-sm ring-1 ring-white dark:ring-zinc-950 object-cover hover:scale-110 hover:z-10 transition-transform cursor-pointer",onClick:b=>{b.stopPropagation(),x(a.profiles)},title:a.profiles.username},a.profiles.id))}),(T>0||a.viewing_context||W||a.timeline_collaborators.length>0)&&a.photo_url&&(0,b.jsx)("span",{className:"text-zinc-300 dark:text-zinc-700",children:"•"}),a.photo_url&&(0,b.jsx)("button",{onClick:b=>{b.stopPropagation(),u(a.photo_url)},className:"text-zinc-400 hover:text-zinc-900 dark:text-zinc-500 dark:hover:text-zinc-200 transition-colors",children:(0,b.jsx)(l,{className:"w-3.5 h-3.5"})})]}),a.notes&&(0,b.jsx)("div",{className:"mb-2 group/notes cursor-pointer",onClick:()=>M(!0),title:"Click to read full notes",children:(0,b.jsx)("p",{className:`text-sm text-zinc-600 dark:text-zinc-300 leading-relaxed line-clamp-2 group-hover/notes:text-zinc-900 dark:group-hover/notes:text-zinc-100 transition-colors ${s.geistSans.className}`,children:a.notes})}),a.posts?.slug&&(0,b.jsx)("div",{className:"mt-auto pt-1",children:(0,b.jsxs)(d.default,{href:`/blog/${a.posts.slug}`,className:"flex items-center gap-1.5 text-xs font-semibold text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 transition-colors",children:[(0,b.jsx)(o,{className:"w-3 h-3"}),(0,b.jsx)("span",{children:"Read Review"})]})})]})]})}),(0,b.jsx)(R,{entry:a,username:g,isOpen:I,onClose:()=>J(!1),onDownload:a=>{G(a)},isDownloading:A}),(0,b.jsx)(S,{isOpen:L,onClose:()=>M(!1),notes:a.notes||"",title:p.title,posterUrl:p.poster_url||"/placeholder-poster.png",date:O,rating:U}),y&&(0,b.jsx)(t.default,{tmdbId:y.tmdb_id,mediaType:y.media_type,initialData:"movie"===y.media_type?a.movies:a.series,isOpen:!0,onClose:()=>z(null)}),q&&(0,b.jsx)(v,{imageUrl:q,onClose:()=>u(null)}),w&&(0,b.jsx)(C,{user:w,onClose:()=>x(null)}),F&&(0,b.jsx)("div",{style:{position:"fixed",top:0,left:"-9999px",width:"1080px",height:"1920px",zIndex:-1,background:"#09090b"},children:(0,b.jsx)("div",{ref:H,style:{width:"100%",height:"100%"},children:"clean"===F?(0,b.jsx)(P,{entry:a}):(0,b.jsx)(K,{entry:a})})})]})}var U=a.i(32179),V=a.i(65574);let W=async a=>{let b=(0,V.createClient)(),{data:c,error:d}=await b.from("timeline_entries").select(`
      *,
      user:profiles!timeline_entries_user_id_fkey!inner(username, display_name, profile_pic_url),
      movies:movies(*),
      series:series(*),
      timeline_collaborators(*, profiles(id, username, display_name, profile_pic_url))
    `).eq("user.username",a).order("watched_on",{ascending:!0}).order("created_at",{ascending:!0});if(d)throw console.error("Supabase Timeline Error:",JSON.stringify(d,null,2)),d;let e={};return(c||[]).map(a=>{let b=Array.isArray(a.movies)?a.movies[0]:a.movies,c=Array.isArray(a.series)?a.series[0]:a.series,d=Array.isArray(a.user)?a.user[0]:a.user,f=(a.timeline_collaborators||[]).map(a=>({...a,profiles:Array.isArray(a.profiles)?a.profiles[0]:a.profiles})),g=b?`movie_${b.tmdb_id}`:c?`tv_${c.tmdb_id}`:null,h=0;return g&&(e[g]=(e[g]||0)+1,h=e[g]-1),{...a,movies:b||null,series:c||null,profiles:d||null,timeline_collaborators:f,is_rewatch:h>0,rewatch_count:h}}).reverse()};var X=a.i(16365);let Y={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.08}}};function Z({username:a,isOwnProfile:j}){let{data:k,isLoading:l}=(0,U.useQuery)({queryKey:["timeline",a],queryFn:()=>W(a),staleTime:3e5}),[m,n]=(0,c.useState)(!0);(0,c.useEffect)(()=>{(async()=>{let a=(0,V.createClient)(),{data:{user:b}}=await a.auth.getUser();n("sfw"===(b?.user_metadata?.content_preference||"sfw"))})()},[]);let o=k||[],[p,q]=(0,c.useState)(10),r=o.slice(0,p),s=p<o.length;return(0,b.jsxs)("div",{className:"w-full animate-in fade-in slide-in-from-bottom-4 duration-500 pb-20 relative z-10 max-w-4xl mx-auto pt-8 px-4 md:px-6",children:[(0,b.jsxs)("div",{className:"max-w-4xl flex items-center justify-between mb-6",children:[(0,b.jsx)("div",{className:"flex items-baseline gap-3",children:(0,b.jsxs)("h2",{className:"text-xl font-bold text-zinc-900 dark:text-zinc-100",children:["Watch History ",o.length>0&&`(${o.length})`]})}),j&&(0,b.jsxs)(d.default,{href:`/profile/${a}/timeline/create`,className:"flex items-center gap-2 px-3 py-1.5 bg-zinc-900 dark:bg-zinc-100 text-white dark:text-zinc-900 rounded-full text-xs font-bold transition-transform active:scale-95 hover:opacity-90",children:[(0,b.jsx)(e.PlusIcon,{className:"w-3.5 h-3.5"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Log Entry"})]})]}),l?(0,b.jsx)(X.TimelineSkeletonList,{}):o.length>0?(0,b.jsx)("div",{className:"flex flex-col items-center",children:(0,b.jsxs)("div",{className:"w-full max-w-4xl",children:[(0,b.jsx)(h.motion.div,{variants:Y,initial:"hidden",animate:"visible",children:(0,b.jsx)(i.AnimatePresence,{children:r.map((c,d)=>(0,b.jsx)(T,{entry:c,index:d,isOwnProfile:j,username:a,isSFW:m},c.id))})}),s&&(0,b.jsx)("div",{className:"flex justify-center mt-12 mb-8 relative z-20",children:(0,b.jsxs)(h.motion.button,{onClick:()=>{q(a=>Math.min(a+10,o.length))},whileHover:{scale:1.02},whileTap:{scale:.98},className:"group flex items-center gap-3 px-8 py-3 bg-white dark:bg-black border border-zinc-200 dark:border-zinc-800 hover:border-zinc-400 dark:hover:border-zinc-600 text-zinc-900 dark:text-zinc-100 transition-all rounded-sm shadow-sm",children:[(0,b.jsx)("span",{className:"text-xs font-bold uppercase tracking-widest",children:"Expand Log"}),(0,b.jsx)(f.ChevronDownIcon,{className:"w-4 h-4 text-zinc-400 group-hover:translate-y-1 transition-transform"}),(0,b.jsxs)("span",{className:"text-[10px] font-mono text-zinc-400 ml-2",children:["[",o.length-p," REMAINING]"]})]})})]})}):(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center py-20 border-2 border-dashed border-zinc-200 dark:border-zinc-800 rounded-3xl bg-zinc-50/50 dark:bg-zinc-900/20",children:[(0,b.jsx)("div",{className:"w-16 h-16 bg-zinc-100 dark:bg-zinc-800 rounded-full flex items-center justify-center mb-4 text-zinc-400",children:(0,b.jsx)(g.ArchiveBoxXMarkIcon,{className:"w-8 h-8",strokeWidth:1.5})}),(0,b.jsx)("h3",{className:"text-sm font-bold text-zinc-900 dark:text-zinc-100",children:"TimeLine Empty"}),(0,b.jsx)("p",{className:"text-xs text-zinc-500 mt-1 max-w-xs text-center",children:j?"No watch history recorded.":`${a} hasn't logged any watch history yet.`}),j&&(0,b.jsx)(d.default,{href:`/profile/${a}/timeline/create`,className:"mt-6 text-xs font-bold text-blue-600 dark:text-blue-400 hover:underline",children:"Log first film? →"})]})]})}a.s(["default",()=>Z],55654)}];

//# sourceMappingURL=app_ui_timeline_TimelineDisplay_tsx_3793fbe3._.js.map