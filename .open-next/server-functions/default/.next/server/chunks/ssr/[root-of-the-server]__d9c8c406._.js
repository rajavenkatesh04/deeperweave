module.exports=[76039,a=>{"use strict";var b=a.i(46344),c=a.i(65574);function d({postSlug:a}){return(0,b.useEffect)(()=>{(0,c.createClient)().rpc("increment_view_count",{post_slug:a}).then(({error:a})=>{a&&console.error("Error incrementing view count:",a)})},[a]),null}a.s(["default",()=>d])},12196,(a,b,c)=>{"use strict";let{entries:d,setPrototypeOf:e,isFrozen:f,getPrototypeOf:g,getOwnPropertyDescriptor:h}=Object,{freeze:i,seal:j,create:k}=Object,{apply:l,construct:m}="u">typeof Reflect&&Reflect;i||(i=function(a){return a}),j||(j=function(a){return a}),l||(l=function(a,b){for(var c=arguments.length,d=Array(c>2?c-2:0),e=2;e<c;e++)d[e-2]=arguments[e];return a.apply(b,d)}),m||(m=function(a){for(var b=arguments.length,c=Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];return new a(...c)});let n=B(Array.prototype.forEach),o=B(Array.prototype.lastIndexOf),p=B(Array.prototype.pop),q=B(Array.prototype.push),r=B(Array.prototype.splice),s=B(String.prototype.toLowerCase),t=B(String.prototype.toString),u=B(String.prototype.match),v=B(String.prototype.replace),w=B(String.prototype.indexOf),x=B(String.prototype.trim),y=B(Object.prototype.hasOwnProperty),z=B(RegExp.prototype.test),A=(Z=TypeError,function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];return m(Z,b)});function B(a){return function(b){b instanceof RegExp&&(b.lastIndex=0);for(var c=arguments.length,d=Array(c>1?c-1:0),e=1;e<c;e++)d[e-1]=arguments[e];return l(a,b,d)}}function C(a,b){let c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s;e&&e(a,null);let d=b.length;for(;d--;){let e=b[d];if("string"==typeof e){let a=c(e);a!==e&&(f(b)||(b[d]=a),e=a)}a[e]=!0}return a}function D(a){let b=k(null);for(let[c,e]of d(a))y(a,c)&&(Array.isArray(e)?b[c]=function(a){for(let b=0;b<a.length;b++)y(a,b)||(a[b]=null);return a}(e):e&&"object"==typeof e&&e.constructor===Object?b[c]=D(e):b[c]=e);return b}function E(a,b){for(;null!==a;){let c=h(a,b);if(c){if(c.get)return B(c.get);if("function"==typeof c.value)return B(c.value)}a=g(a)}return function(){return null}}let F=i(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),G=i(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),H=i(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),I=i(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),J=i(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),K=i(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),L=i(["#text"]),M=i(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),N=i(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),O=i(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),P=i(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Q=j(/\{\{[\w\W]*|[\w\W]*\}\}/gm),R=j(/<%[\w\W]*|[\w\W]*%>/gm),S=j(/\$\{[\w\W]*/gm),T=j(/^data-[\-\w.\u00B7-\uFFFF]+$/),U=j(/^aria-[\-\w]+$/),V=j(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),W=j(/^(?:\w+script|data):/i),X=j(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Y=j(/^html$/i);var Z,$=Object.freeze({__proto__:null,ARIA_ATTR:U,ATTR_WHITESPACE:X,CUSTOM_ELEMENT:j(/^[a-z][.\w]*(-[.\w]+)+$/i),DATA_ATTR:T,DOCTYPE_NAME:Y,ERB_EXPR:R,IS_ALLOWED_URI:V,IS_SCRIPT_OR_DATA:W,MUSTACHE_EXPR:Q,TMPLIT_EXPR:S});let _=function(a,b){if("object"!=typeof a||"function"!=typeof a.createPolicy)return null;let c=null,d="data-tt-policy-suffix";b&&b.hasAttribute(d)&&(c=b.getAttribute(d));let e="dompurify"+(c?"#"+c:"");try{return a.createPolicy(e,{createHTML:a=>a,createScriptURL:a=>a})}catch(a){return console.warn("TrustedTypes policy "+e+" could not be created."),null}},aa=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};b.exports=function a(){let b,c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=b=>a(b);if(e.version="3.3.1",e.removed=[],!c||!c.document||9!==c.document.nodeType||!c.Element)return e.isSupported=!1,e;let{document:f}=c,g=f,h=g.currentScript,{DocumentFragment:j,HTMLTemplateElement:l,Node:m,Element:B,NodeFilter:Q,NamedNodeMap:R=c.NamedNodeMap||c.MozNamedAttrMap,HTMLFormElement:S,DOMParser:T,trustedTypes:U}=c,W=B.prototype,X=E(W,"cloneNode"),Z=E(W,"remove"),ab=E(W,"nextSibling"),ac=E(W,"childNodes"),ad=E(W,"parentNode");if("function"==typeof l){let a=f.createElement("template");a.content&&a.content.ownerDocument&&(f=a.content.ownerDocument)}let ae="",{implementation:af,createNodeIterator:ag,createDocumentFragment:ah,getElementsByTagName:ai}=f,{importNode:aj}=g,ak=aa();e.isSupported="function"==typeof d&&"function"==typeof ad&&af&&void 0!==af.createHTMLDocument;let{MUSTACHE_EXPR:al,ERB_EXPR:am,TMPLIT_EXPR:an,DATA_ATTR:ao,ARIA_ATTR:ap,IS_SCRIPT_OR_DATA:aq,ATTR_WHITESPACE:ar,CUSTOM_ELEMENT:as}=$,{IS_ALLOWED_URI:at}=$,au=null,av=C({},[...F,...G,...H,...J,...L]),aw=null,ax=C({},[...M,...N,...O,...P]),ay=Object.seal(k(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),az=null,aA=null,aB=Object.seal(k(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}})),aC=!0,aD=!0,aE=!1,aF=!0,aG=!1,aH=!0,aI=!1,aJ=!1,aK=!1,aL=!1,aM=!1,aN=!1,aO=!0,aP=!1,aQ=!0,aR=!1,aS={},aT=null,aU=C({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),aV=null,aW=C({},["audio","video","img","source","image","track"]),aX=null,aY=C({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),aZ="http://www.w3.org/1998/Math/MathML",a$="http://www.w3.org/2000/svg",a_="http://www.w3.org/1999/xhtml",a0=a_,a1=!1,a2=null,a3=C({},[aZ,a$,a_],t),a4=C({},["mi","mo","mn","ms","mtext"]),a5=C({},["annotation-xml"]),a6=C({},["title","style","font","a","script"]),a7=null,a8=["application/xhtml+xml","text/html"],a9=null,ba=null,bb=f.createElement("form"),bc=function(a){return a instanceof RegExp||a instanceof Function},bd=function(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!ba||ba!==a){if(a&&"object"==typeof a||(a={}),a=D(a),a9="application/xhtml+xml"===(a7=-1===a8.indexOf(a.PARSER_MEDIA_TYPE)?"text/html":a.PARSER_MEDIA_TYPE)?t:s,au=y(a,"ALLOWED_TAGS")?C({},a.ALLOWED_TAGS,a9):av,aw=y(a,"ALLOWED_ATTR")?C({},a.ALLOWED_ATTR,a9):ax,a2=y(a,"ALLOWED_NAMESPACES")?C({},a.ALLOWED_NAMESPACES,t):a3,aX=y(a,"ADD_URI_SAFE_ATTR")?C(D(aY),a.ADD_URI_SAFE_ATTR,a9):aY,aV=y(a,"ADD_DATA_URI_TAGS")?C(D(aW),a.ADD_DATA_URI_TAGS,a9):aW,aT=y(a,"FORBID_CONTENTS")?C({},a.FORBID_CONTENTS,a9):aU,az=y(a,"FORBID_TAGS")?C({},a.FORBID_TAGS,a9):D({}),aA=y(a,"FORBID_ATTR")?C({},a.FORBID_ATTR,a9):D({}),aS=!!y(a,"USE_PROFILES")&&a.USE_PROFILES,aC=!1!==a.ALLOW_ARIA_ATTR,aD=!1!==a.ALLOW_DATA_ATTR,aE=a.ALLOW_UNKNOWN_PROTOCOLS||!1,aF=!1!==a.ALLOW_SELF_CLOSE_IN_ATTR,aG=a.SAFE_FOR_TEMPLATES||!1,aH=!1!==a.SAFE_FOR_XML,aI=a.WHOLE_DOCUMENT||!1,aL=a.RETURN_DOM||!1,aM=a.RETURN_DOM_FRAGMENT||!1,aN=a.RETURN_TRUSTED_TYPE||!1,aK=a.FORCE_BODY||!1,aO=!1!==a.SANITIZE_DOM,aP=a.SANITIZE_NAMED_PROPS||!1,aQ=!1!==a.KEEP_CONTENT,aR=a.IN_PLACE||!1,at=a.ALLOWED_URI_REGEXP||V,a0=a.NAMESPACE||a_,a4=a.MATHML_TEXT_INTEGRATION_POINTS||a4,a5=a.HTML_INTEGRATION_POINTS||a5,ay=a.CUSTOM_ELEMENT_HANDLING||{},a.CUSTOM_ELEMENT_HANDLING&&bc(a.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(ay.tagNameCheck=a.CUSTOM_ELEMENT_HANDLING.tagNameCheck),a.CUSTOM_ELEMENT_HANDLING&&bc(a.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(ay.attributeNameCheck=a.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),a.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof a.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(ay.allowCustomizedBuiltInElements=a.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),aG&&(aD=!1),aM&&(aL=!0),aS&&(au=C({},L),aw=[],!0===aS.html&&(C(au,F),C(aw,M)),!0===aS.svg&&(C(au,G),C(aw,N),C(aw,P)),!0===aS.svgFilters&&(C(au,H),C(aw,N),C(aw,P)),!0===aS.mathMl&&(C(au,J),C(aw,O),C(aw,P))),a.ADD_TAGS&&("function"==typeof a.ADD_TAGS?aB.tagCheck=a.ADD_TAGS:(au===av&&(au=D(au)),C(au,a.ADD_TAGS,a9))),a.ADD_ATTR&&("function"==typeof a.ADD_ATTR?aB.attributeCheck=a.ADD_ATTR:(aw===ax&&(aw=D(aw)),C(aw,a.ADD_ATTR,a9))),a.ADD_URI_SAFE_ATTR&&C(aX,a.ADD_URI_SAFE_ATTR,a9),a.FORBID_CONTENTS&&(aT===aU&&(aT=D(aT)),C(aT,a.FORBID_CONTENTS,a9)),a.ADD_FORBID_CONTENTS&&(aT===aU&&(aT=D(aT)),C(aT,a.ADD_FORBID_CONTENTS,a9)),aQ&&(au["#text"]=!0),aI&&C(au,["html","head","body"]),au.table&&(C(au,["tbody"]),delete az.tbody),a.TRUSTED_TYPES_POLICY){if("function"!=typeof a.TRUSTED_TYPES_POLICY.createHTML)throw A('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof a.TRUSTED_TYPES_POLICY.createScriptURL)throw A('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');ae=(b=a.TRUSTED_TYPES_POLICY).createHTML("")}else void 0===b&&(b=_(U,h)),null!==b&&"string"==typeof ae&&(ae=b.createHTML(""));i&&i(a),ba=a}},be=C({},[...G,...H,...I]),bf=C({},[...J,...K]),bg=function(a){let b=ad(a);b&&b.tagName||(b={namespaceURI:a0,tagName:"template"});let c=s(a.tagName),d=s(b.tagName);return!!a2[a.namespaceURI]&&(a.namespaceURI===a$?b.namespaceURI===a_?"svg"===c:b.namespaceURI===aZ?"svg"===c&&("annotation-xml"===d||a4[d]):!!be[c]:a.namespaceURI===aZ?b.namespaceURI===a_?"math"===c:b.namespaceURI===a$?"math"===c&&a5[d]:!!bf[c]:a.namespaceURI===a_?(b.namespaceURI!==a$||!!a5[d])&&(b.namespaceURI!==aZ||!!a4[d])&&!bf[c]&&(a6[c]||!be[c]):"application/xhtml+xml"===a7&&!!a2[a.namespaceURI])},bh=function(a){q(e.removed,{element:a});try{ad(a).removeChild(a)}catch(b){Z(a)}},bi=function(a,b){try{q(e.removed,{attribute:b.getAttributeNode(a),from:b})}catch(a){q(e.removed,{attribute:null,from:b})}if(b.removeAttribute(a),"is"===a)if(aL||aM)try{bh(b)}catch(a){}else try{b.setAttribute(a,"")}catch(a){}},bj=function(a){let c=null,d=null;if(aK)a="<remove></remove>"+a;else{let b=u(a,/^[\r\n\t ]+/);d=b&&b[0]}"application/xhtml+xml"===a7&&a0===a_&&(a='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+a+"</body></html>");let e=b?b.createHTML(a):a;if(a0===a_)try{c=new T().parseFromString(e,a7)}catch(a){}if(!c||!c.documentElement){c=af.createDocument(a0,"template",null);try{c.documentElement.innerHTML=a1?ae:e}catch(a){}}let g=c.body||c.documentElement;return(a&&d&&g.insertBefore(f.createTextNode(d),g.childNodes[0]||null),a0===a_)?ai.call(c,aI?"html":"body")[0]:aI?c.documentElement:g},bk=function(a){return ag.call(a.ownerDocument||a,a,Q.SHOW_ELEMENT|Q.SHOW_COMMENT|Q.SHOW_TEXT|Q.SHOW_PROCESSING_INSTRUCTION|Q.SHOW_CDATA_SECTION,null)},bl=function(a){return a instanceof S&&("string"!=typeof a.nodeName||"string"!=typeof a.textContent||"function"!=typeof a.removeChild||!(a.attributes instanceof R)||"function"!=typeof a.removeAttribute||"function"!=typeof a.setAttribute||"string"!=typeof a.namespaceURI||"function"!=typeof a.insertBefore||"function"!=typeof a.hasChildNodes)},bm=function(a){return"function"==typeof m&&a instanceof m};function bn(a,b,c){n(a,a=>{a.call(e,b,c,ba)})}let bo=function(a){let b=null;if(bn(ak.beforeSanitizeElements,a,null),bl(a))return bh(a),!0;let c=a9(a.nodeName);if(bn(ak.uponSanitizeElement,a,{tagName:c,allowedTags:au}),aH&&a.hasChildNodes()&&!bm(a.firstElementChild)&&z(/<[/\w!]/g,a.innerHTML)&&z(/<[/\w!]/g,a.textContent)||7===a.nodeType||aH&&8===a.nodeType&&z(/<[/\w]/g,a.data))return bh(a),!0;if(!(aB.tagCheck instanceof Function&&aB.tagCheck(c))&&(!au[c]||az[c])){if(!az[c]&&bq(c)&&(ay.tagNameCheck instanceof RegExp&&z(ay.tagNameCheck,c)||ay.tagNameCheck instanceof Function&&ay.tagNameCheck(c)))return!1;if(aQ&&!aT[c]){let b=ad(a)||a.parentNode,c=ac(a)||a.childNodes;if(c&&b){let d=c.length;for(let e=d-1;e>=0;--e){let d=X(c[e],!0);d.__removalCount=(a.__removalCount||0)+1,b.insertBefore(d,ab(a))}}}return bh(a),!0}return a instanceof B&&!bg(a)||("noscript"===c||"noembed"===c||"noframes"===c)&&z(/<\/no(script|embed|frames)/i,a.innerHTML)?(bh(a),!0):(aG&&3===a.nodeType&&(b=a.textContent,n([al,am,an],a=>{b=v(b,a," ")}),a.textContent!==b&&(q(e.removed,{element:a.cloneNode()}),a.textContent=b)),bn(ak.afterSanitizeElements,a,null),!1)},bp=function(a,b,c){if(aO&&("id"===b||"name"===b)&&(c in f||c in bb))return!1;if(aD&&!aA[b]&&z(ao,b));else if(aC&&z(ap,b));else if(aB.attributeCheck instanceof Function&&aB.attributeCheck(b,a));else if(!aw[b]||aA[b]){if(!(bq(a)&&(ay.tagNameCheck instanceof RegExp&&z(ay.tagNameCheck,a)||ay.tagNameCheck instanceof Function&&ay.tagNameCheck(a))&&(ay.attributeNameCheck instanceof RegExp&&z(ay.attributeNameCheck,b)||ay.attributeNameCheck instanceof Function&&ay.attributeNameCheck(b,a))||"is"===b&&ay.allowCustomizedBuiltInElements&&(ay.tagNameCheck instanceof RegExp&&z(ay.tagNameCheck,c)||ay.tagNameCheck instanceof Function&&ay.tagNameCheck(c))))return!1}else if(aX[b]);else if(z(at,v(c,ar,"")));else if(("src"===b||"xlink:href"===b||"href"===b)&&"script"!==a&&0===w(c,"data:")&&aV[a]);else if(aE&&!z(aq,v(c,ar,"")));else if(c)return!1;return!0},bq=function(a){return"annotation-xml"!==a&&u(a,as)},br=function(a){bn(ak.beforeSanitizeAttributes,a,null);let{attributes:c}=a;if(!c||bl(a))return;let d={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:aw,forceKeepAttr:void 0},f=c.length;for(;f--;){let{name:g,namespaceURI:h,value:i}=c[f],j=a9(g),k="value"===g?i:x(i);if(d.attrName=j,d.attrValue=k,d.keepAttr=!0,d.forceKeepAttr=void 0,bn(ak.uponSanitizeAttribute,a,d),k=d.attrValue,aP&&("id"===j||"name"===j)&&(bi(g,a),k="user-content-"+k),aH&&z(/((--!?|])>)|<\/(style|title|textarea)/i,k)||"attributename"===j&&u(k,"href")){bi(g,a);continue}if(d.forceKeepAttr)continue;if(!d.keepAttr||!aF&&z(/\/>/i,k)){bi(g,a);continue}aG&&n([al,am,an],a=>{k=v(k,a," ")});let l=a9(a.nodeName);if(!bp(l,j,k)){bi(g,a);continue}if(b&&"object"==typeof U&&"function"==typeof U.getAttributeType)if(h);else switch(U.getAttributeType(l,j)){case"TrustedHTML":k=b.createHTML(k);break;case"TrustedScriptURL":k=b.createScriptURL(k)}if(k!==i)try{h?a.setAttributeNS(h,g,k):a.setAttribute(g,k),bl(a)?bh(a):p(e.removed)}catch(b){bi(g,a)}}bn(ak.afterSanitizeAttributes,a,null)},bs=function a(b){let c=null,d=bk(b);for(bn(ak.beforeSanitizeShadowDOM,b,null);c=d.nextNode();)bn(ak.uponSanitizeShadowNode,c,null),bo(c),br(c),c.content instanceof j&&a(c.content);bn(ak.afterSanitizeShadowDOM,b,null)};return e.sanitize=function(a){let c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},d=null,f=null,h=null,i=null;if((a1=!a)&&(a="<!-->"),"string"!=typeof a&&!bm(a))if("function"==typeof a.toString){if("string"!=typeof(a=a.toString()))throw A("dirty is not a string, aborting")}else throw A("toString is not a function");if(!e.isSupported)return a;if(aJ||bd(c),e.removed=[],"string"==typeof a&&(aR=!1),aR){if(a.nodeName){let b=a9(a.nodeName);if(!au[b]||az[b])throw A("root node is forbidden and cannot be sanitized in-place")}}else if(a instanceof m)1===(f=(d=bj("<!---->")).ownerDocument.importNode(a,!0)).nodeType&&"BODY"===f.nodeName||"HTML"===f.nodeName?d=f:d.appendChild(f);else{if(!aL&&!aG&&!aI&&-1===a.indexOf("<"))return b&&aN?b.createHTML(a):a;if(!(d=bj(a)))return aL?null:aN?ae:""}d&&aK&&bh(d.firstChild);let k=bk(aR?a:d);for(;h=k.nextNode();)bo(h),br(h),h.content instanceof j&&bs(h.content);if(aR)return a;if(aL){if(aM)for(i=ah.call(d.ownerDocument);d.firstChild;)i.appendChild(d.firstChild);else i=d;return(aw.shadowroot||aw.shadowrootmode)&&(i=aj.call(g,i,!0)),i}let l=aI?d.outerHTML:d.innerHTML;return aI&&au["!doctype"]&&d.ownerDocument&&d.ownerDocument.doctype&&d.ownerDocument.doctype.name&&z(Y,d.ownerDocument.doctype.name)&&(l="<!DOCTYPE "+d.ownerDocument.doctype.name+">\n"+l),aG&&n([al,am,an],a=>{l=v(l,a," ")}),b&&aN?b.createHTML(l):l},e.setConfig=function(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};bd(a),aJ=!0},e.clearConfig=function(){ba=null,aJ=!1},e.isValidAttribute=function(a,b,c){return ba||bd({}),bp(a9(a),a9(b),c)},e.addHook=function(a,b){"function"==typeof b&&q(ak[a],b)},e.removeHook=function(a,b){if(void 0!==b){let c=o(ak[a],b);return -1===c?void 0:r(ak[a],c,1)[0]}return p(ak[a])},e.removeHooks=function(a){ak[a]=[]},e.removeAllHooks=function(){ak=aa()},e}()},1878,(a,b,c)=>{b.exports=a.x("jsdom-54e1ae3ba4578e38",()=>require("jsdom-54e1ae3ba4578e38"))},39275,(a,b,c)=>{function d(a){return a&&a.default||a}b.exports=a.g.DOMPurify=a.g.DOMPurify||function(){let b=d(a.r(12196)),{JSDOM:c}=d(a.r(1878)),{window:e}=new c("<!DOCTYPE html>");return b(e)}()},47968,a=>{"use strict";let b,c;var d=a.i(72888),e=a.i(17172),f=a.i(3896),g=a.i(28556),h=a.i(14910),i=a.i(46344),j=a.i(25759),k=a.i(23651);function l(a,b){let c,d=()=>{let{currentTime:d}=b,e=(null===d?0:d.value)/100;c!==e&&a(e),c=e};return k.frame.preUpdate(d,!0),()=>(0,k.cancelFrame)(d)}var m=a.i(72260),n=a.i(1668),o=a.i(87487);let p=new WeakMap,q=(a,b,c)=>(d,e)=>e&&e[0]?e[0][a+"Size"]:(0,n.isSVGElement)(d)&&"getBBox"in d?d.getBBox()[b]:d[c],r=q("inline","width","offsetWidth"),s=q("block","height","offsetHeight");function t({target:a,borderBoxSize:b}){p.get(a)?.forEach(c=>{c(a,{get width(){return r(a,b)},get height(){return s(a,b)}})})}function u(a){a.forEach(t)}let v=new Set;var w=a.i(71942),x=a.i(75675);let y=()=>({current:0,offset:[],progress:0,scrollLength:0,targetOffset:0,targetLength:0,containerLength:0,velocity:0}),z={x:{length:"Width",position:"Left"},y:{length:"Height",position:"Top"}};function A(a,b,c,d){let e=c[b],{length:f,position:g}=z[b],h=e.current,i=c.time;e.current=a[`scroll${g}`],e.scrollLength=a[`scroll${f}`]-a[`client${f}`],e.offset.length=0,e.offset[0]=0,e.offset[1]=e.scrollLength,e.progress=(0,w.progress)(0,e.scrollLength,e.current);let j=d-i;e.velocity=j>50?0:(0,x.velocityPerSecond)(e.current-h,j)}var B=a.i(36981),C=a.i(97921),D=a.i(51155),E=a.i(76652);let F={start:0,center:.5,end:1};function G(a,b,c=0){let d=0;if(a in F&&(a=F[a]),"string"==typeof a){let b=parseFloat(a);a.endsWith("px")?d=b:a.endsWith("%")?a=b/100:a.endsWith("vw")?d=b/100*document.documentElement.clientWidth:a.endsWith("vh")?d=b/100*document.documentElement.clientHeight:a=b}return"number"==typeof a&&(d=b*a),c+d}let H=[0,0],I=[[0,0],[1,1]],J={x:0,y:0},K=new WeakMap,L=new WeakMap,M=new WeakMap,N=new WeakMap,O=new WeakMap,P=a=>a===document.scrollingElement?window:a;function Q(a,{container:d=document.scrollingElement,trackContentSize:e=!1,...f}={}){if(!d)return j.noop;let g=M.get(d);g||(g=new Set,M.set(d,g));let h=function(a,b,c,d={}){return{measure:b=>{!function(a,b=a,c){if(c.x.targetOffset=0,c.y.targetOffset=0,b!==a){let d=b;for(;d&&d!==a;)c.x.targetOffset+=d.offsetLeft,c.y.targetOffset+=d.offsetTop,d=d.offsetParent}c.x.targetLength=b===a?b.scrollWidth:b.clientWidth,c.y.targetLength=b===a?b.scrollHeight:b.clientHeight,c.x.containerLength=a.clientWidth,c.y.containerLength=a.clientHeight}(a,d.target,c),A(a,"x",c,b),A(a,"y",c,b),c.time=b,(d.offset||d.target)&&function(a,b,c){let{offset:d=I}=c,{target:e=a,axis:f="y"}=c,g="y"===f?"height":"width",h=e!==a?function(a,b){let c={x:0,y:0},d=a;for(;d&&d!==b;)if((0,E.isHTMLElement)(d))c.x+=d.offsetLeft,c.y+=d.offsetTop,d=d.offsetParent;else if("svg"===d.tagName){let a=d.getBoundingClientRect(),b=(d=d.parentElement).getBoundingClientRect();c.x+=a.left-b.left,c.y+=a.top-b.top}else if(d instanceof SVGGraphicsElement){let{x:a,y:b}=d.getBBox();c.x+=a,c.y+=b;let e=null,f=d.parentNode;for(;!e;)"svg"===f.tagName&&(e=f),f=d.parentNode;d=e}else break;return c}(e,a):J,i=e===a?{width:a.scrollWidth,height:a.scrollHeight}:"getBBox"in e&&"svg"!==e.tagName?e.getBBox():{width:e.clientWidth,height:e.clientHeight},j={width:a.clientWidth,height:a.clientHeight};b[f].offset.length=0;let k=!b[f].interpolate,l=d.length;for(let a=0;a<l;a++){let c=function(a,b,c,d){let e=Array.isArray(a)?a:H,f=0;return"number"==typeof a?e=[a,a]:"string"==typeof a&&(e=(a=a.trim()).includes(" ")?a.split(" "):[a,F[a]?a:"0"]),(f=G(e[0],c,d))-G(e[1],b)}(d[a],j[g],i[g],h[f]);k||c===b[f].interpolatorOffsets[a]||(k=!0),b[f].offset[a]=c}k&&(b[f].interpolate=(0,B.interpolate)(b[f].offset,(0,C.defaultOffset)(d),{clamp:!1}),b[f].interpolatorOffsets=[...b[f].offset]),b[f].progress=(0,D.clamp)(0,1,b[f].interpolate(b[f].current))}(a,c,d)},notify:()=>b(c)}}(d,a,{time:0,x:y(),y:y()},f);if(g.add(h),!K.has(d)){let a,e=()=>{for(let a of g)a.measure(k.frameData.timestamp);k.frame.preUpdate(f)},f=()=>{for(let a of g)a.notify()},h=()=>k.frame.read(e);K.set(d,h);let i=P(d);window.addEventListener("resize",h,{passive:!0}),d!==document.documentElement&&L.set(d,"function"==typeof d?(v.add(d),c||(c=()=>{let a={get width(){return window.innerWidth},get height(){return window.innerHeight}};v.forEach(b=>b(a))},window.addEventListener("resize",c)),()=>{v.delete(d),v.size||"function"!=typeof c||(window.removeEventListener("resize",c),c=void 0)}):(!b&&"u">typeof ResizeObserver&&(b=new ResizeObserver(u)),(a=(0,o.resolveElements)(d)).forEach(a=>{let c=p.get(a);c||(c=new Set,p.set(a,c)),c.add(h),b?.observe(a)}),()=>{a.forEach(a=>{let c=p.get(a);c?.delete(h),c?.size||b?.unobserve(a)})})),i.addEventListener("scroll",h,{passive:!0}),h()}if(e&&!O.has(d)){let a=K.get(d),b={width:d.scrollWidth,height:d.scrollHeight};N.set(d,b);let c=k.frame.read(()=>{let c=d.scrollWidth,e=d.scrollHeight;(b.width!==c||b.height!==e)&&(a(),b.width=c,b.height=e)},!0);O.set(d,c)}let i=K.get(d);return k.frame.read(i,!1,!0),()=>{(0,k.cancelFrame)(i);let a=M.get(d);if(!a||(a.delete(h),a.size))return;let b=K.get(d);K.delete(d),b&&(P(d).removeEventListener("scroll",b),L.get(d)?.(),window.removeEventListener("resize",b));let c=O.get(d);c&&((0,k.cancelFrame)(c),O.delete(d)),N.delete(d)}}let R=new Map;function S({source:a,container:b,...c}){var d;let e,f,{axis:g}=c;a&&(b=a);let h=R.get(b)??new Map;R.set(b,h);let i=c.target??"self",j=h.get(i)??{},k=g+(c.offset??[]).join(",");return j[k]||(j[k]=!c.target&&(0,m.supportsScrollTimeline)()?new ScrollTimeline({source:b,axis:g}):(d={container:b,...c},e={value:0},f=Q(a=>{e.value=100*a[d.axis].progress},d),{currentTime:e,cancel:f})),j[k]}var T=a.i(46462),U=a.i(63536);let V=()=>({scrollX:(0,g.motionValue)(0),scrollY:(0,g.motionValue)(0),scrollXProgress:(0,g.motionValue)(0),scrollYProgress:(0,g.motionValue)(0)}),W=a=>!!a&&!a.current;var X=a.i(20965),Y=a.i(8304),Z=a.i(21211);let $=(0,Z.default)("arrow-up",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]),_=(0,Z.default)("film",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]]),aa=(0,Z.default)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]),ab=(0,Z.default)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),ac=(0,Z.default)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),ad=(0,Z.default)("message-square",[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]]),ae=(0,Z.default)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);var af=a.i(81159),ag=a.i(31470),ah=a.i(39275),ai=a.i(14591),aj=a.i(32179),ak=a.i(48549),al=a.i(18697),am=a.i(28854),an=a.i(90830),ao=class extends am.Subscribable{#a;#b=void 0;#c;#d;constructor(a,b){super(),this.#a=a,this.setOptions(b),this.bindMethods(),this.#e()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(a){let b=this.options;this.options=this.#a.defaultMutationOptions(a),(0,an.shallowEqualObjects)(this.options,b)||this.#a.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#c,observer:this}),b?.mutationKey&&this.options.mutationKey&&(0,an.hashKey)(b.mutationKey)!==(0,an.hashKey)(this.options.mutationKey)?this.reset():this.#c?.state.status==="pending"&&this.#c.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#c?.removeObserver(this)}onMutationUpdate(a){this.#e(),this.#f(a)}getCurrentResult(){return this.#b}reset(){this.#c?.removeObserver(this),this.#c=void 0,this.#e(),this.#f()}mutate(a,b){return this.#d=b,this.#c?.removeObserver(this),this.#c=this.#a.getMutationCache().build(this.#a,this.options),this.#c.addObserver(this),this.#c.execute(a)}#e(){let a=this.#c?.state??(0,ak.getDefaultState)();this.#b={...a,isPending:"pending"===a.status,isSuccess:"success"===a.status,isError:"error"===a.status,isIdle:"idle"===a.status,mutate:this.mutate,reset:this.reset}}#f(a){al.notifyManager.batch(()=>{if(this.#d&&this.hasListeners()){let b=this.#b.variables,c=this.#b.context,d={client:this.#a,meta:this.options.meta,mutationKey:this.options.mutationKey};if(a?.type==="success"){try{this.#d.onSuccess?.(a.data,b,c,d)}catch(a){Promise.reject(a)}try{this.#d.onSettled?.(a.data,null,b,c,d)}catch(a){Promise.reject(a)}}else if(a?.type==="error"){try{this.#d.onError?.(a.error,b,c,d)}catch(a){Promise.reject(a)}try{this.#d.onSettled?.(void 0,a.error,b,c,d)}catch(a){Promise.reject(a)}}}this.listeners.forEach(a=>{a(this.#b)})})}},ap=a.i(58298),aq=a.i(62068);let ar=(0,aq.createServerReference)("4078da1d4fb9a5542ae1d51973e0b8a06cc0aeab4f",aq.callServer,void 0,aq.findSourceMapURL,"likePost"),as=(0,aq.createServerReference)("40e5446b1292d63454d14ed79d9d274ea883ca0188",aq.callServer,void 0,aq.findSourceMapURL,"unlikePost");var at=a.i(95811),au=a.i(29872),av=a.i(96212);function aw({postId:a,initialLikes:b,userHasLiked:c}){let e,{data:f}=(0,aj.useQuery)({queryKey:["post-likes",a],initialData:{isLiked:c,count:b},staleTime:1/0}),{mutate:g,isPending:h}=(e=(0,ap.useQueryClient)(),function(a,b){let c=(0,ap.useQueryClient)(void 0),[d]=i.useState(()=>new ao(c,a));i.useEffect(()=>{d.setOptions(a)},[d,a]);let e=i.useSyncExternalStore(i.useCallback(a=>d.subscribe(al.notifyManager.batchCalls(a)),[d]),()=>d.getCurrentResult(),()=>d.getCurrentResult()),f=i.useCallback((a,b)=>{d.mutate(a,b).catch(an.noop)},[d]);if(e.error&&(0,an.shouldThrowError)(d.options.throwOnError,[e.error]))throw e.error;return{...e,mutate:f,mutateAsync:e.mutate}}({mutationFn:b=>b?as(a):ar(a),onMutate:async b=>{await e.cancelQueries({queryKey:["post-likes",a]});let c=e.getQueryData(["post-likes",a]);return e.setQueryData(["post-likes",a],a=>({...a,isLiked:!b,count:b?a.count-1:a.count+1})),{previousData:c}},onError:(b,c,d)=>{e.setQueryData(["post-likes",a],d?.previousData),at.toast.error("Failed to update like")},onSettled:()=>{e.invalidateQueries({queryKey:["post-likes",a]})}})),j=f.isLiked?av.HeartIcon:au.HeartIcon;return(0,d.jsxs)("button",{onClick:()=>{g(f.isLiked)},disabled:h,className:"flex items-center gap-2 text-gray-500 transition-colors duration-200 ease-in-out hover:text-red-500 disabled:cursor-not-allowed disabled:opacity-60 dark:text-zinc-400 dark:hover:text-red-500","aria-label":f.isLiked?"Unlike post":"Like post",children:[(0,d.jsx)(j,{className:`h-6 w-6 transition-all duration-150 ${f.isLiked?"text-red-500 scale-110":"scale-100"}`}),(0,d.jsx)("span",{className:"font-semibold",children:f.count.toLocaleString()})]})}var ax=a.i(45189);let ay=(0,aq.createServerReference)("6071c570ebbe999a62b617f1e0741c053c497daeeb",aq.callServer,void 0,aq.findSourceMapURL,"postComment"),az=(0,Z.default)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),aA=(0,Z.default)("send-horizontal",[["path",{d:"M3.714 3.048a.498.498 0 0 0-.683.627l2.843 7.627a2 2 0 0 1 0 1.396l-2.842 7.627a.498.498 0 0 0 .682.627l18-8.5a.5.5 0 0 0 0-.904z",key:"117uat"}],["path",{d:"M6 12h16",key:"s4cdu5"}]]);function aB(){let{pending:a}=(0,ax.useFormStatus)();return(0,d.jsxs)("button",{type:"submit",disabled:a,className:"group flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-full text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:[a?"Posting...":"Comment",(0,d.jsx)(aA,{size:14,className:`group-hover:translate-x-1 transition-transform ${a?"opacity-0":"opacity-100"}`})]})}function aC({postId:a,comments:b,currentUserProfile:c}){let e=(0,i.useRef)(null),f=!!c,[g,h]=(0,i.useState)(!1),[j,k]=(0,i.useState)(""),l=async(b,c)=>{if(!f)return{error:"You must be logged in."};let d=await ay(a,c);return d?.success&&(k(""),h(!1)),d},[m,n]=(0,i.useActionState)(l,null);m?.error&&e.current&&e.current.reset();let o=[...b].reverse(),p=g||j.length>0;return(0,d.jsxs)("section",{className:"w-full max-w-4xl",children:[(0,d.jsxs)("div",{className:"flex gap-4 mb-8",children:[(0,d.jsx)("div",{className:"shrink-0 pt-1",children:f?(0,d.jsx)("div",{className:"relative w-10 h-10 rounded-full overflow-hidden bg-zinc-100 dark:bg-zinc-800",children:(0,d.jsx)(af.default,{src:c.profile_pic_url||"/placeholder-user.jpg",fill:!0,alt:"Your Avatar",className:"object-cover"})}):(0,d.jsx)("div",{className:"w-10 h-10 rounded-full bg-zinc-200 dark:bg-zinc-800 flex items-center justify-center",children:(0,d.jsx)(az,{size:20,className:"text-zinc-500"})})}),(0,d.jsx)("div",{className:"flex-1",children:(0,d.jsxs)("form",{ref:e,action:n,className:"relative",children:[(0,d.jsx)("label",{htmlFor:"comment",className:"sr-only",children:"Add a comment"}),(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsx)("textarea",{id:"comment",name:"comment",rows:g?3:1,value:j,onChange:a=>k(a.target.value),onFocus:()=>h(!0),disabled:!f,placeholder:f?"Add a comment...":"Sign in to comment...",className:"peer w-full bg-transparent border-none outline-none ring-0 shadow-none text-sm md:text-base text-zinc-900 dark:text-zinc-100 placeholder:text-zinc-500 resize-none overflow-hidden py-2 px-0 leading-relaxed",required:!0,style:{boxShadow:"none"}}),(0,d.jsx)("div",{className:"absolute bottom-0 left-0 w-full h-[1px] bg-zinc-300 dark:bg-zinc-700"}),(0,d.jsx)("div",{className:`absolute bottom-0 left-0 h-[2px] bg-zinc-900 dark:bg-white transition-all duration-300 ease-out ${g?"w-full":"w-0"}`})]}),(p||m?.error)&&(0,d.jsxs)("div",{className:"flex items-center justify-between mt-3 animate-in fade-in slide-in-from-top-1 duration-200",children:[(0,d.jsx)("div",{className:"text-red-600 text-xs",children:m?.error&&m.error}),(0,d.jsxs)("div",{className:"flex items-center gap-3 ml-auto",children:[(0,d.jsx)("button",{type:"button",onClick:()=>{h(!1),k("")},className:"px-4 py-2 text-sm font-medium text-zinc-600 dark:text-zinc-300 hover:text-zinc-900 dark:hover:text-white hover:bg-zinc-100 dark:hover:bg-zinc-800 rounded-full transition-colors",children:"Cancel"}),f?(0,d.jsx)(aB,{}):(0,d.jsx)(ag.default,{href:"/auth/login",className:"px-4 py-2 bg-blue-600 text-white rounded-full text-sm font-medium hover:bg-blue-700 transition-colors",children:"Sign In"})]})]})]})})]}),(0,d.jsx)("div",{className:"space-y-6",children:0===b.length?(0,d.jsx)("div",{className:"text-center py-10",children:(0,d.jsx)("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm",children:"No comments yet. Be the first to share your thoughts."})}):o.map(a=>{let b,c;return(0,d.jsxs)("div",{className:"flex gap-4 group",children:[(0,d.jsx)(ag.default,{href:`/profile/${a.author.username}`,className:"shrink-0 mt-1",children:(0,d.jsx)("div",{className:"relative w-10 h-10 rounded-full overflow-hidden bg-zinc-100 dark:bg-zinc-800",children:(0,d.jsx)(af.default,{src:a.author.profile_pic_url||"/placeholder-user.jpg",fill:!0,alt:a.author.display_name,className:"object-cover"})})}),(0,d.jsxs)("div",{className:"flex-1",children:[(0,d.jsxs)("div",{className:"flex items-baseline gap-2 mb-1",children:[(0,d.jsxs)(ag.default,{href:`/profile/${a.author.username}`,className:"text-xs md:text-sm font-semibold text-zinc-900 dark:text-zinc-100 hover:text-blue-600 dark:hover:text-blue-400 transition-colors",children:["@",a.author.username]}),(0,d.jsx)("span",{className:"text-xs text-zinc-500 dark:text-zinc-400",children:(b=new Date(a.created_at),(c=Math.floor((new Date().getTime()-b.getTime())/1e3))<60?"Just now":c<3600?`${Math.floor(c/60)} minutes ago`:c<86400?`${Math.floor(c/3600)} hours ago`:c<604800?`${Math.floor(c/86400)} days ago`:b.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"}))})]}),(0,d.jsx)("p",{className:"text-sm text-zinc-800 dark:text-zinc-300 leading-relaxed whitespace-pre-wrap",children:a.content})]})]},a.id)})})]})}var aD=a.i(69353);let aE={initial:{opacity:0},animate:{opacity:1,transition:{duration:.6,ease:"easeOut"}}},aF={initial:{opacity:0,y:20},animate:{opacity:1,y:0,transition:{duration:.5,delay:.2}}},aG=()=>(0,d.jsx)(e.motion.button,{className:"fixed bottom-6 right-6 z-40 p-3 bg-zinc-900 text-white dark:bg-zinc-100 dark:text-black rounded-full shadow-lg hover:scale-110 transition-transform",onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},whileTap:{scale:.9},children:(0,d.jsx)($,{size:20})});function aH({post:a,author:b,movie:c,series:g,likeCount:k,userHasLiked:m,comments:n,viewerData:o,nsfw:p,rating:q}){let[r,s]=(0,i.useState)(!p),[t,u]=(0,i.useState)(!1),{scrollY:v}=function({container:a,target:b,...c}={}){let d=(0,T.useConstant)(V),e=(0,i.useRef)(null),f=(0,i.useRef)(!1),g=(0,i.useCallback)(()=>(e.current=function(a,{axis:b="y",container:c=document.scrollingElement,...d}={}){var e,f;let g;if(!c)return j.noop;let h={axis:b,container:c,...d};return"function"==typeof a?(e=a,f=h,2===e.length?Q(a=>{e(a[f.axis].progress,a)},f):l(e,S(f))):(g=S(h),a.attachTimeline({timeline:h.target?void 0:g,observe:a=>(a.pause(),l(b=>{a.time=a.iterationDuration*b},g))}))}((a,{x:b,y:c})=>{d.scrollX.set(b.current),d.scrollXProgress.set(b.progress),d.scrollY.set(c.current),d.scrollYProgress.set(c.progress)},{...c,container:a?.current||void 0,target:b?.current||void 0}),()=>{e.current?.()}),[a,b,JSON.stringify(c.offset)]);return(0,U.useIsomorphicLayoutEffect)(()=>{if(f.current=!1,!(W(a)||W(b)))return g();f.current=!0},[g]),(0,i.useEffect)(()=>f.current?((0,h.invariant)(!W(a),"Container ref is defined but not hydrated","use-scroll-ref"),(0,h.invariant)(!W(b),"Target ref is defined but not hydrated","use-scroll-ref"),g()):void 0,[g]),d}(),w=(0,X.useTransform)(v,[300,400],[0,1]),x=(0,X.useTransform)(v,[0,100],[0,1]),y=ah.default.sanitize(a.content_html),z=c||g,A=c?"movie":"tv";(0,i.useEffect)(()=>{a?.title&&(document.title=`${a.title} | Deeper Weave`)},[a?.title]);let B=new Date(a.created_at).toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"});return(0,d.jsxs)(e.motion.article,{className:"min-h-screen pt-16 bg-white dark:bg-black text-zinc-900 dark:text-zinc-100 font-sans selection:bg-zinc-200 dark:selection:bg-zinc-800",variants:aE,initial:"initial",animate:"animate",children:[(0,d.jsxs)(e.motion.nav,{style:{backgroundColor:`rgba(var(--background-rgb), ${x})`},className:"fixed top-0 left-0 right-0 z-[60] h-16 flex items-center px-4 md:px-8 border-b border-transparent data-[scrolled=true]:border-zinc-200 dark:data-[scrolled=true]:border-zinc-900 transition-colors",children:[(0,d.jsx)("div",{className:"absolute inset-0 bg-white/80 dark:bg-black/80 backdrop-blur-md -z-10"}),(0,d.jsxs)("div",{className:"max-w-5xl mx-auto w-full flex items-center justify-between",children:[(0,d.jsxs)("button",{onClick:()=>window.history.back(),className:"flex items-center gap-2 text-zinc-600 hover:text-black dark:text-zinc-400 dark:hover:text-white transition-colors",children:[(0,d.jsx)(ab,{size:20}),(0,d.jsx)("span",{className:"text-sm font-medium",children:"Back"})]}),(0,d.jsx)(e.motion.div,{style:{opacity:w},className:"flex-1 flex justify-center px-4 overflow-hidden",children:(0,d.jsx)("span",{className:"text-sm font-semibold truncate text-zinc-900 dark:text-white",children:a.title})}),(0,d.jsx)("div",{className:"w-[60px]"})]})]}),(0,d.jsxs)("div",{className:"relative w-full h-[60vh] md:h-[80vh] flex flex-col justify-end overflow-hidden bg-zinc-50 dark:bg-zinc-950",children:[a.banner_url&&(0,d.jsxs)("div",{className:"absolute inset-0",children:[(0,d.jsx)(af.default,{src:a.banner_url,alt:"",fill:!0,className:"object-cover transition-transform duration-[2s] hover:scale-105 opacity-100 dark:opacity-60",priority:!0}),(0,d.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-transparent via-transparent to-transparent dark:from-black dark:via-black/60 dark:to-transparent"})]}),(0,d.jsx)("div",{className:"relative z-10 w-full max-w-5xl mx-auto px-6 pb-10 md:pb-16",children:(0,d.jsxs)("div",{className:"space-y-4 md:space-y-6",children:[(0,d.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,d.jsx)("span",{className:"text-zinc-900/80 dark:text-zinc-400 text-xs md:text-sm font-medium px-2 py-1 bg-white/50 dark:bg-transparent rounded-md backdrop-blur-sm dark:backdrop-blur-none",children:B}),(a.is_premium||a.is_nsfw||a.has_spoilers)&&(0,d.jsxs)("div",{className:"flex gap-2 scale-90 origin-left",children:[a.is_premium&&(0,d.jsx)(aD.PremiumBadge,{}),a.is_nsfw&&(0,d.jsx)(aD.NsfwBadge,{}),a.has_spoilers&&(0,d.jsx)(aD.SpoilerBadge,{})]})]}),(0,d.jsx)("h1",{className:"font-serif text-3xl md:text-5xl lg:text-6xl font-bold leading-tight tracking-tight text-zinc-900 dark:text-white max-w-3xl drop-shadow-sm dark:drop-shadow-none",children:a.title}),q&&(0,d.jsx)("div",{className:"flex items-center gap-1",children:[void 0,void 0,void 0,void 0,void 0].map((a,b)=>(0,d.jsx)("div",{className:`h-1.5 w-6 rounded-full shadow-sm ${b<q?"bg-zinc-900 dark:bg-white":"bg-zinc-300/80 dark:bg-zinc-800"}`},b))})]})})]}),(0,d.jsxs)("div",{className:"relative max-w-5xl mx-auto px-6 py-12 md:py-16",children:[(0,d.jsx)(f.AnimatePresence,{children:p&&!r&&(0,d.jsxs)(e.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-x-0 top-0 z-20 h-[500px] flex flex-col items-center justify-center bg-white/90 dark:bg-black/90 backdrop-blur-sm text-center px-4",children:[(0,d.jsx)(ac,{className:"w-10 h-10 mb-4 text-zinc-400"}),(0,d.jsx)("h2",{className:"text-lg font-bold text-zinc-900 dark:text-white mb-2",children:"Sensitive Content"}),(0,d.jsx)("p",{className:"text-sm text-zinc-600 dark:text-zinc-400 mb-6 max-w-md",children:"This post contains material that may not be suitable for all audiences."}),(0,d.jsx)("button",{onClick:()=>s(!0),className:"px-6 py-3 bg-zinc-900 hover:bg-zinc-800 dark:bg-white dark:hover:bg-zinc-200 text-white dark:text-black text-sm font-medium rounded-lg transition-colors",children:"View Content"})]})}),(0,d.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-10 lg:gap-16",children:[(0,d.jsxs)(e.motion.div,{className:`lg:col-span-8 space-y-12 transition-all duration-500 ${!r?"blur-sm opacity-50 h-[400px] overflow-hidden":""}`,variants:aF,children:[(0,d.jsx)("div",{className:"   prose prose-lg prose-zinc dark:prose-invert max-w-none   prose-headings:font-serif prose-headings:font-semibold      /* Updated Font Weight: Normal instead of Light */   prose-p:font-normal prose-p:leading-8   prose-p:text-zinc-800 dark:prose-p:text-zinc-300      prose-a:text-zinc-900 dark:prose-a:text-white prose-a:no-underline hover:prose-a:underline      /* Image Fixes */   [&_img]:max-w-full [&_img]:w-auto [&_img]:mx-auto [&_img]:rounded-lg [&_img]:shadow-sm   [&_img]:max-h-[350px]   md:[&_img]:max-h-[550px]      /* First Letter */   first-letter:text-4xl first-letter:font-serif first-letter:font-bold   first-letter:mr-2 first-letter:float-left text-zinc-900 dark:text-white   ",dangerouslySetInnerHTML:{__html:y}}),(0,d.jsxs)("aside",{className:"mt-12 pt-8 border-t border-zinc-200 dark:border-zinc-800 flex flex-col gap-6",children:["review"===a.type&&z&&(0,d.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,d.jsx)("h3",{className:"text-xs font-bold uppercase tracking-wider text-zinc-500 pl-1",children:"In this post"}),(0,d.jsxs)("div",{onClick:()=>u(!0),className:"group cursor-pointer flex gap-4 p-4 rounded-xl border border-zinc-200 dark:border-zinc-800 hover:border-zinc-400 dark:hover:border-zinc-600 transition-all bg-zinc-50 dark:bg-zinc-900/30",children:[(0,d.jsx)("div",{className:"relative w-16 h-24 sm:w-20 sm:h-28 flex-shrink-0 rounded-lg overflow-hidden bg-zinc-200 dark:bg-zinc-800 shadow-sm",children:z.poster_url?(0,d.jsx)(af.default,{src:z.poster_url,alt:"",fill:!0,className:"object-cover"}):(0,d.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,d.jsx)(_,{className:"w-6 h-6 text-zinc-400"})})}),(0,d.jsxs)("div",{className:"flex flex-col justify-center min-w-0",children:[(0,d.jsx)("h4",{className:"font-serif text-lg md:text-xl font-bold text-zinc-900 dark:text-white truncate group-hover:underline decoration-1 underline-offset-4",children:z.title}),(0,d.jsxs)("div",{className:"flex items-center gap-2 mt-1 text-xs text-zinc-500",children:[(0,d.jsx)("span",{className:"capitalize",children:"movie"===A?"Film":"Series"}),(0,d.jsx)("span",{children:"â€¢"}),(0,d.jsx)("span",{children:new Date(z.release_date).getFullYear()})]}),(0,d.jsxs)("div",{className:"mt-3 flex items-center gap-1 text-xs font-medium text-zinc-900 dark:text-zinc-300",children:["View Details ",(0,d.jsx)(aa,{size:12})]})]})]}),(0,d.jsx)(ai.default,{tmdbId:z.tmdb_id,initialData:z,mediaType:A,isOpen:t,onClose:()=>u(!1)})]}),(0,d.jsxs)("div",{className:"block lg:hidden flex flex-col gap-3",children:[(0,d.jsx)("h3",{className:"text-xs font-bold uppercase tracking-wider text-zinc-500 pl-1",children:"Written By"}),(0,d.jsx)(ag.default,{href:`/profile/${b.username}`,className:"group block relative w-full",children:(0,d.jsxs)("div",{className:"flex items-center gap-4 p-4 rounded-xl border border-zinc-200 dark:border-zinc-800 hover:border-zinc-400 dark:hover:border-zinc-600 transition-all bg-zinc-50 dark:bg-zinc-900/30",children:[(0,d.jsx)("div",{className:"relative w-16 h-16 flex-shrink-0 rounded-full overflow-hidden border border-zinc-200 dark:border-zinc-700 shadow-sm group-hover:scale-105 transition-transform",children:(0,d.jsx)(af.default,{src:b.profile_pic_url||"/placeholder-user.jpg",alt:b.display_name||"Author",fill:!0,className:"object-cover"})}),(0,d.jsxs)("div",{className:"flex flex-col justify-center min-w-0",children:[(0,d.jsx)("h4",{className:"font-serif text-lg font-bold text-zinc-900 dark:text-white group-hover:underline decoration-zinc-400 underline-offset-4 decoration-1",children:b.display_name}),(0,d.jsxs)("p",{className:"text-sm font-medium text-zinc-500 group-hover:text-zinc-700 dark:group-hover:text-zinc-400 transition-colors",children:["@",b.username]}),(0,d.jsxs)("div",{className:"mt-1 flex items-center gap-1 text-xs font-medium text-zinc-400 group-hover:text-zinc-600 dark:group-hover:text-zinc-300 transition-colors",children:["View Profile ",(0,d.jsx)(ae,{size:12})]})]})]})})]})]}),(0,d.jsxs)("div",{className:"pt-2 space-y-8",children:[(0,d.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[(0,d.jsx)("h3",{className:"font-serif text-2xl font-bold text-zinc-900 dark:text-white",children:"Discussion"}),(0,d.jsxs)("div",{className:"flex items-center gap-6",children:[(0,d.jsx)(aw,{postId:a.id,initialLikes:k,userHasLiked:m}),(0,d.jsxs)("div",{className:"flex items-center gap-2 text-zinc-500 text-sm",children:[(0,d.jsx)(ad,{size:18}),(0,d.jsx)("span",{children:n.length})]}),(0,d.jsxs)("div",{className:"flex items-center gap-2 text-zinc-500 text-sm",children:[(0,d.jsx)(Y.Eye,{size:18}),(0,d.jsx)("span",{children:a.view_count.toLocaleString()})]})]})]}),(0,d.jsx)(aC,{postId:a.id,comments:n,currentUserProfile:o?.profile??null})]})]}),(0,d.jsx)("div",{className:"hidden lg:block lg:col-span-4 lg:pl-8 lg:border-l border-zinc-100 dark:border-zinc-800",children:(0,d.jsx)("div",{className:"lg:sticky lg:top-24 space-y-8",children:(0,d.jsxs)("div",{className:"text-center space-y-4",children:[(0,d.jsx)(ag.default,{href:`/profile/${b.username}`,className:"block relative group",children:(0,d.jsx)("div",{className:"relative w-24 h-24 mx-auto rounded-full overflow-hidden border border-zinc-200 dark:border-zinc-800 group-hover:border-zinc-400 transition-colors",children:(0,d.jsx)(af.default,{src:b.profile_pic_url||"/placeholder-user.jpg",alt:b.display_name||"Author",fill:!0,className:"object-cover"})})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-xs text-zinc-500 uppercase tracking-widest font-bold mb-1",children:"Written By"}),(0,d.jsx)(ag.default,{href:`/profile/${b.username}`,className:"text-lg font-bold text-zinc-900 dark:text-white hover:underline",children:b.display_name}),(0,d.jsxs)("p",{className:"text-sm text-zinc-500",children:["@",b.username]})]})]})})})]})]}),(0,d.jsx)(aG,{})]})}a.s(["default",()=>aH],47968)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__d9c8c406._.js.map